<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="12">
  <HTTPTask id="48" hostname="www.bc_demo1.com" path="/js/core/jquery-ui-1.7.2.custom.min.js" url="http://www.bc_demo1.com:4900/js/core/jquery-ui-1.7.2.custom.min.js" ip="127.0.0.1" port="4900" connectionId="12" origin="Primary" frame="1" startTime="9308486" endTime="9308595">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Accept" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>emgtY24=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cDovL3d3dy5iY19kZW1vMS5jb206NDkwMC9uYXYuaHRtbA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgOS4wOyBXaW5kb3dzIE5UIDYuMDsgVHJpZGVudC81LjAp</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Host" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>d3d3LmJjX2RlbW8xLmNvbTo0OTAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>S2VlcC1BbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9qcy9jb3JlL2pxdWVyeS11aS0xLjcuMi5jdXN0b20ubWluLmpzIEhUVFAvMS4xDQpBY2NlcHQ6ICovKg0KQWNjZXB0LUxhbmd1YWdlOiB6aC1jbg0KUmVmZXJlcjogaHR0cDovL3d3dy5iY19kZW1vMS5jb206NDkwMC9uYXYuaHRtbA0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlDQpVc2VyLUFnZW50OiBNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSA5LjA7IFdpbmRvd3MgTlQgNi4wOyBUcmlkZW50LzUuMCkNCkhvc3Q6IHd3dy5iY19kZW1vMS5jb206NDkwMA0KQ29ubmVjdGlvbjogS2VlcC1BbGl2ZQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Server" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QXBhY2hlLUNveW90ZS8xLjE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iMTkyNjI4LTEzMzk3MjM2MDc1NzEi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAxNSBKdW4gMjAxMiAwMToyNjo0NyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>dGV4dC9qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Length" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTkyNjI4</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>RnJpLCAxNSBKdW4gMjAxMiAwMTo1MjoyNyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpTZXJ2ZXI6IEFwYWNoZS1Db3lvdGUvMS4xDQpFVGFnOiBXLyIxOTI2MjgtMTMzOTcyMzYwNzU3MSINCkxhc3QtTW9kaWZpZWQ6IEZyaSwgMTUgSnVuIDIwMTIgMDE6MjY6NDcgR01UDQpDb250ZW50LVR5cGU6IHRleHQvamF2YXNjcmlwdA0KQ29udGVudC1MZW5ndGg6IDE5MjYyOA0KRGF0ZTogRnJpLCAxNSBKdW4gMjAxMiAwMTo1MjoyNyBHTVQNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyoKICogalF1ZXJ5IFVJIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkKICovCmpRdWVyeS51aXx8KGZ1bmN0aW9uKGMpe3ZhciBpPWMuZm4ucmVtb3ZlLGQ9Yy5icm93c2VyLm1vemlsbGEmJihwYXJzZUZsb2F0KGMuYnJvd3Nlci52ZXJzaW9uKTwxLjkpO2MudWk9e3ZlcnNpb246IjEuNy4yIixwbHVnaW46e2FkZDpmdW5jdGlvbihrLGwsbil7dmFyIG09Yy51aVtrXS5wcm90b3R5cGU7Zm9yKHZhciBqIGluIG4pe20ucGx1Z2luc1tqXT1tLnBsdWdpbnNbal18fFtdO20ucGx1Z2luc1tqXS5wdXNoKFtsLG5bal1dKX19LGNhbGw6ZnVuY3Rpb24oaixsLGspe3ZhciBuPWoucGx1Z2luc1tsXTtpZighbnx8IWouZWxlbWVudFswXS5wYXJlbnROb2RlKXtyZXR1cm59Zm9yKHZhciBtPTA7bTxuLmxlbmd0aDttKyspe2lmKGoub3B0aW9uc1tuW21dWzBdXSl7blttXVsxXS5hcHBseShqLmVsZW1lbnQsayl9fX19LGNvbnRhaW5zOmZ1bmN0aW9uKGssail7cmV0dXJuIGRvY3VtZW50LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2suY29tcGFyZURvY3VtZW50UG9zaXRpb24oaikmMTY6ayE9PWomJmsuY29udGFpbnMoail9LGhhc1Njcm9sbDpmdW5jdGlvbihtLGspe2lmKGMobSkuY3NzKCJvdmVyZmxvdyIpPT0iaGlkZGVuIil7cmV0dXJuIGZhbHNlfXZhciBqPShrJiZrPT0ibGVmdCIpPyJzY3JvbGxMZWZ0Ijoic2Nyb2xsVG9wIixsPWZhbHNlO2lmKG1bal0+MCl7cmV0dXJuIHRydWV9bVtqXT0xO2w9KG1bal0+MCk7bVtqXT0wO3JldHVybiBsfSxpc092ZXJBeGlzOmZ1bmN0aW9uKGssaixsKXtyZXR1cm4oaz5qKSYmKGs8KGorbCkpfSxpc092ZXI6ZnVuY3Rpb24obyxrLG4sbSxqLGwpe3JldHVybiBjLnVpLmlzT3ZlckF4aXMobyxuLGopJiZjLnVpLmlzT3ZlckF4aXMoayxtLGwpfSxrZXlDb2RlOntCQUNLU1BBQ0U6OCxDQVBTX0xPQ0s6MjAsQ09NTUE6MTg4LENPTlRST0w6MTcsREVMRVRFOjQ2LERPV046NDAsRU5EOjM1LEVOVEVSOjEzLEVTQ0FQRToyNyxIT01FOjM2LElOU0VSVDo0NSxMRUZUOjM3LE5VTVBBRF9BREQ6MTA3LE5VTVBBRF9ERUNJTUFMOjExMCxOVU1QQURfRElWSURFOjExMSxOVU1QQURfRU5URVI6MTA4LE5VTVBBRF9NVUxUSVBMWToxMDYsTlVNUEFEX1NVQlRSQUNUOjEwOSxQQUdFX0RPV046MzQsUEFHRV9VUDozMyxQRVJJT0Q6MTkwLFJJR0hUOjM5LFNISUZUOjE2LFNQQUNFOjMyLFRBQjo5LFVQOjM4fX07aWYoZCl7dmFyIGY9Yy5hdHRyLGU9Yy5mbi5yZW1vdmVBdHRyLGg9Imh0dHA6Ly93d3cudzMub3JnLzIwMDUvMDcvYWFhIixhPS9eYXJpYS0vLGI9L153YWlyb2xlOi87Yy5hdHRyPWZ1bmN0aW9uKGssaixsKXt2YXIgbT1sIT09dW5kZWZpbmVkO3JldHVybihqPT0icm9sZSI/KG0/Zi5jYWxsKHRoaXMsayxqLCJ3YWlyb2xlOiIrbCk6KGYuYXBwbHkodGhpcyxhcmd1bWVudHMpfHwiIikucmVwbGFjZShiLCIiKSk6KGEudGVzdChqKT8obT9rLnNldEF0dHJpYnV0ZU5TKGgsai5yZXBsYWNlKGEsImFhYToiKSxsKTpmLmNhbGwodGhpcyxrLGoucmVwbGFjZShhLCJhYWE6IikpKTpmLmFwcGx5KHRoaXMsYXJndW1lbnRzKSkpfTtjLmZuLnJlbW92ZUF0dHI9ZnVuY3Rpb24oail7cmV0dXJuKGEudGVzdChqKT90aGlzLmVhY2goZnVuY3Rpb24oKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKGgsai5yZXBsYWNlKGEsIiIpKX0pOmUuY2FsbCh0aGlzLGopKX19Yy5mbi5leHRlbmQoe3JlbW92ZTpmdW5jdGlvbigpe2MoIioiLHRoaXMpLmFkZCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7Yyh0aGlzKS50cmlnZ2VySGFuZGxlcigicmVtb3ZlIil9KTtyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGVuYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHIoInVuc2VsZWN0YWJsZSIsIm9mZiIpLmNzcygiTW96VXNlclNlbGVjdCIsIiIpLnVuYmluZCgic2VsZWN0c3RhcnQudWkiKX0sZGlzYWJsZVNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHIoInVuc2VsZWN0YWJsZSIsIm9uIikuY3NzKCJNb3pVc2VyU2VsZWN0Iiwibm9uZSIpLmJpbmQoInNlbGVjdHN0YXJ0LnVpIixmdW5jdGlvbigpe3JldHVybiBmYWxzZX0pfSxzY3JvbGxQYXJlbnQ6ZnVuY3Rpb24oKXt2YXIgajtpZigoYy5icm93c2VyLm1zaWUmJigvKHN0YXRpY3xyZWxhdGl2ZSkvKS50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKSl8fCgvYWJzb2x1dGUvKS50ZXN0KHRoaXMuY3NzKCJwb3NpdGlvbiIpKSl7aj10aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4oLyhyZWxhdGl2ZXxhYnNvbHV0ZXxmaXhlZCkvKS50ZXN0KGMuY3VyQ1NTKHRoaXMsInBvc2l0aW9uIiwxKSkmJigvKGF1dG98c2Nyb2xsKS8pLnRlc3QoYy5jdXJDU1ModGhpcywib3ZlcmZsb3ciLDEpK2MuY3VyQ1NTKHRoaXMsIm92ZXJmbG93LXkiLDEpK2MuY3VyQ1NTKHRoaXMsIm92ZXJmbG93LXgiLDEpKX0pLmVxKDApfWVsc2V7aj10aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4oLyhhdXRvfHNjcm9sbCkvKS50ZXN0KGMuY3VyQ1NTKHRoaXMsIm92ZXJmbG93IiwxKStjLmN1ckNTUyh0aGlzLCJvdmVyZmxvdy15IiwxKStjLmN1ckNTUyh0aGlzLCJvdmVyZmxvdy14IiwxKSl9KS5lcSgwKX1yZXR1cm4oL2ZpeGVkLykudGVzdCh0aGlzLmNzcygicG9zaXRpb24iKSl8fCFqLmxlbmd0aD9jKGRvY3VtZW50KTpqfX0pO2MuZXh0ZW5kKGMuZXhwclsiOiJdLHtkYXRhOmZ1bmN0aW9uKGwsayxqKXtyZXR1cm4gISFjLmRhdGEobCxqWzNdKX0sZm9jdXNhYmxlOmZ1bmN0aW9uKGspe3ZhciBsPWsubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxqPWMuYXR0cihrLCJ0YWJpbmRleCIpO3JldHVybigvaW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbnxvYmplY3QvLnRlc3QobCk/IWsuZGlzYWJsZWQ6ImEiPT1sfHwiYXJlYSI9PWw/ay5ocmVmfHwhaXNOYU4oaik6IWlzTmFOKGopKSYmIWMoaylbImFyZWEiPT1sPyJwYXJlbnRzIjoiY2xvc2VzdCJdKCI6aGlkZGVuIikubGVuZ3RofSx0YWJiYWJsZTpmdW5jdGlvbihrKXt2YXIgaj1jLmF0dHIoaywidGFiaW5kZXgiKTtyZXR1cm4oaXNOYU4oail8fGo+PTApJiZjKGspLmlzKCI6Zm9jdXNhYmxlIil9fSk7ZnVuY3Rpb24gZyhtLG4sbyxsKXtmdW5jdGlvbiBrKHEpe3ZhciBwPWNbbV1bbl1bcV18fFtdO3JldHVybih0eXBlb2YgcD09InN0cmluZyI/cC5zcGxpdCgvLD9ccysvKTpwKX12YXIgaj1rKCJnZXR0ZXIiKTtpZihsLmxlbmd0aD09MSYmdHlwZW9mIGxbMF09PSJzdHJpbmciKXtqPWouY29uY2F0KGsoImdldHRlclNldHRlciIpKX1yZXR1cm4oYy5pbkFycmF5KG8saikhPS0xKX1jLndpZGdldD1mdW5jdGlvbihrLGope3ZhciBsPWsuc3BsaXQoIi4iKVswXTtrPWsuc3BsaXQoIi4iKVsxXTtjLmZuW2tdPWZ1bmN0aW9uKHApe3ZhciBuPSh0eXBlb2YgcD09InN0cmluZyIpLG89QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKG4mJnAuc3Vic3RyaW5nKDAsMSk9PSJfIil7cmV0dXJuIHRoaXN9aWYobiYmZyhsLGsscCxvKSl7dmFyIG09Yy5kYXRhKHRoaXNbMF0sayk7cmV0dXJuKG0/bVtwXS5hcHBseShtLG8pOnVuZGVmaW5lZCl9cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBxPWMuZGF0YSh0aGlzLGspOyghcSYmIW4mJmMuZGF0YSh0aGlzLGssbmV3IGNbbF1ba10odGhpcyxwKSkuX2luaXQoKSk7KHEmJm4mJmMuaXNGdW5jdGlvbihxW3BdKSYmcVtwXS5hcHBseShxLG8pKX0pfTtjW2xdPWNbbF18fHt9O2NbbF1ba109ZnVuY3Rpb24obyxuKXt2YXIgbT10aGlzO3RoaXMubmFtZXNwYWNlPWw7dGhpcy53aWRnZXROYW1lPWs7dGhpcy53aWRnZXRFdmVudFByZWZpeD1jW2xdW2tdLmV2ZW50UHJlZml4fHxrO3RoaXMud2lkZ2V0QmFzZUNsYXNzPWwrIi0iK2s7dGhpcy5vcHRpb25zPWMuZXh0ZW5kKHt9LGMud2lkZ2V0LmRlZmF1bHRzLGNbbF1ba10uZGVmYXVsdHMsYy5tZXRhZGF0YSYmYy5tZXRhZGF0YS5nZXQobylba10sbik7dGhpcy5lbGVtZW50PWMobykuYmluZCgic2V0RGF0YS4iK2ssZnVuY3Rpb24ocSxwLHIpe2lmKHEudGFyZ2V0PT1vKXtyZXR1cm4gbS5fc2V0RGF0YShwLHIpfX0pLmJpbmQoImdldERhdGEuIitrLGZ1bmN0aW9uKHEscCl7aWYocS50YXJnZXQ9PW8pe3JldHVybiBtLl9nZXREYXRhKHApfX0pLmJpbmQoInJlbW92ZSIsZnVuY3Rpb24oKXtyZXR1cm4gbS5kZXN0cm95KCl9KX07Y1tsXVtrXS5wcm90b3R5cGU9Yy5leHRlbmQoe30sYy53aWRnZXQucHJvdG90eXBlLGopO2NbbF1ba10uZ2V0dGVyU2V0dGVyPSJvcHRpb24ifTtjLndpZGdldC5wcm90b3R5cGU9e19pbml0OmZ1bmN0aW9uKCl7fSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZURhdGEodGhpcy53aWRnZXROYW1lKS5yZW1vdmVDbGFzcyh0aGlzLndpZGdldEJhc2VDbGFzcysiLWRpc2FibGVkICIrdGhpcy5uYW1lc3BhY2UrIi1zdGF0ZS1kaXNhYmxlZCIpLnJlbW92ZUF0dHIoImFyaWEtZGlzYWJsZWQiKX0sb3B0aW9uOmZ1bmN0aW9uKGwsbSl7dmFyIGs9bCxqPXRoaXM7aWYodHlwZW9mIGw9PSJzdHJpbmciKXtpZihtPT09dW5kZWZpbmVkKXtyZXR1cm4gdGhpcy5fZ2V0RGF0YShsKX1rPXt9O2tbbF09bX1jLmVhY2goayxmdW5jdGlvbihuLG8pe2ouX3NldERhdGEobixvKX0pfSxfZ2V0RGF0YTpmdW5jdGlvbihqKXtyZXR1cm4gdGhpcy5vcHRpb25zW2pdfSxfc2V0RGF0YTpmdW5jdGlvbihqLGspe3RoaXMub3B0aW9uc1tqXT1rO2lmKGo9PSJkaXNhYmxlZCIpe3RoaXMuZWxlbWVudFtrPyJhZGRDbGFzcyI6InJlbW92ZUNsYXNzIl0odGhpcy53aWRnZXRCYXNlQ2xhc3MrIi1kaXNhYmxlZCAiK3RoaXMubmFtZXNwYWNlKyItc3RhdGUtZGlzYWJsZWQiKS5hdHRyKCJhcmlhLWRpc2FibGVkIixrKX19LGVuYWJsZTpmdW5jdGlvbigpe3RoaXMuX3NldERhdGEoImRpc2FibGVkIixmYWxzZSl9LGRpc2FibGU6ZnVuY3Rpb24oKXt0aGlzLl9zZXREYXRhKCJkaXNhYmxlZCIsdHJ1ZSl9LF90cmlnZ2VyOmZ1bmN0aW9uKGwsbSxuKXt2YXIgcD10aGlzLm9wdGlvbnNbbF0saj0obD09dGhpcy53aWRnZXRFdmVudFByZWZpeD9sOnRoaXMud2lkZ2V0RXZlbnRQcmVmaXgrbCk7bT1jLkV2ZW50KG0pO20udHlwZT1qO2lmKG0ub3JpZ2luYWxFdmVudCl7Zm9yKHZhciBrPWMuZXZlbnQucHJvcHMubGVuZ3RoLG87azspe289Yy5ldmVudC5wcm9wc1stLWtdO21bb109bS5vcmlnaW5hbEV2ZW50W29dfX10aGlzLmVsZW1lbnQudHJpZ2dlcihtLG4pO3JldHVybiAhKGMuaXNGdW5jdGlvbihwKSYmcC5jYWxsKHRoaXMuZWxlbWVudFswXSxtLG4pPT09ZmFsc2V8fG0uaXNEZWZhdWx0UHJldmVudGVkKCkpfX07Yy53aWRnZXQuZGVmYXVsdHM9e2Rpc2FibGVkOmZhbHNlfTtjLnVpLm1vdXNlPXtfbW91c2VJbml0OmZ1bmN0aW9uKCl7dmFyIGo9dGhpczt0aGlzLmVsZW1lbnQuYmluZCgibW91c2Vkb3duLiIrdGhpcy53aWRnZXROYW1lLGZ1bmN0aW9uKGspe3JldHVybiBqLl9tb3VzZURvd24oayl9KS5iaW5kKCJjbGljay4iK3RoaXMud2lkZ2V0TmFtZSxmdW5jdGlvbihrKXtpZihqLl9wcmV2ZW50Q2xpY2tFdmVudCl7ai5fcHJldmVudENsaWNrRXZlbnQ9ZmFsc2U7ay5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtyZXR1cm4gZmFsc2V9fSk7aWYoYy5icm93c2VyLm1zaWUpe3RoaXMuX21vdXNlVW5zZWxlY3RhYmxlPXRoaXMuZWxlbWVudC5hdHRyKCJ1bnNlbGVjdGFibGUiKTt0aGlzLmVsZW1lbnQuYXR0cigidW5zZWxlY3RhYmxlIiwib24iKX10aGlzLnN0YXJ0ZWQ9ZmFsc2V9LF9tb3VzZURlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQudW5iaW5kKCIuIit0aGlzLndpZGdldE5hbWUpOyhjLmJyb3dzZXIubXNpZSYmdGhpcy5lbGVtZW50LmF0dHIoInVuc2VsZWN0YWJsZSIsdGhpcy5fbW91c2VVbnNlbGVjdGFibGUpKX0sX21vdXNlRG93bjpmdW5jdGlvbihsKXtsLm9yaWdpbmFsRXZlbnQ9bC5vcmlnaW5hbEV2ZW50fHx7fTtpZihsLm9yaWdpbmFsRXZlbnQubW91c2VIYW5kbGVkKXtyZXR1cm59KHRoaXMuX21vdXNlU3RhcnRlZCYmdGhpcy5fbW91c2VVcChsKSk7dGhpcy5fbW91c2VEb3duRXZlbnQ9bDt2YXIgaz10aGlzLG09KGwud2hpY2g9PTEpLGo9KHR5cGVvZiB0aGlzLm9wdGlvbnMuY2FuY2VsPT0ic3RyaW5nIj9jKGwudGFyZ2V0KS5wYXJlbnRzKCkuYWRkKGwudGFyZ2V0KS5maWx0ZXIodGhpcy5vcHRpb25zLmNhbmNlbCkubGVuZ3RoOmZhbHNlKTtpZighbXx8anx8IXRoaXMuX21vdXNlQ2FwdHVyZShsKSl7cmV0dXJuIHRydWV9dGhpcy5tb3VzZURlbGF5TWV0PSF0aGlzLm9wdGlvbnMuZGVsYXk7aWYoIXRoaXMubW91c2VEZWxheU1ldCl7dGhpcy5fbW91c2VEZWxheVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtrLm1vdXNlRGVsYXlNZXQ9dHJ1ZX0sdGhpcy5vcHRpb25zLmRlbGF5KX1pZih0aGlzLl9tb3VzZURpc3RhbmNlTWV0KGwpJiZ0aGlzLl9tb3VzZURlbGF5TWV0KGwpKXt0aGlzLl9tb3VzZVN0YXJ0ZWQ9KHRoaXMuX21vdXNlU3RhcnQobCkhPT1mYWxzZSk7aWYoIXRoaXMuX21vdXNlU3RhcnRlZCl7bC5wcmV2ZW50RGVmYXVsdCgpO3JldHVybiB0cnVlfX10aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZT1mdW5jdGlvbihuKXtyZXR1cm4gay5fbW91c2VNb3ZlKG4pfTt0aGlzLl9tb3VzZVVwRGVsZWdhdGU9ZnVuY3Rpb24obil7cmV0dXJuIGsuX21vdXNlVXAobil9O2MoZG9jdW1lbnQpLmJpbmQoIm1vdXNlbW92ZS4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZU1vdmVEZWxlZ2F0ZSkuYmluZCgibW91c2V1cC4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpOyhjLmJyb3dzZXIuc2FmYXJpfHxsLnByZXZlbnREZWZhdWx0KCkpO2wub3JpZ2luYWxFdmVudC5tb3VzZUhhbmRsZWQ9dHJ1ZTtyZXR1cm4gdHJ1ZX0sX21vdXNlTW92ZTpmdW5jdGlvbihqKXtpZihjLmJyb3dzZXIubXNpZSYmIWouYnV0dG9uKXtyZXR1cm4gdGhpcy5fbW91c2VVcChqKX1pZih0aGlzLl9tb3VzZVN0YXJ0ZWQpe3RoaXMuX21vdXNlRHJhZyhqKTtyZXR1cm4gai5wcmV2ZW50RGVmYXVsdCgpfWlmKHRoaXMuX21vdXNlRGlzdGFuY2VNZXQoaikmJnRoaXMuX21vdXNlRGVsYXlNZXQoaikpe3RoaXMuX21vdXNlU3RhcnRlZD0odGhpcy5fbW91c2VTdGFydCh0aGlzLl9tb3VzZURvd25FdmVudCxqKSE9PWZhbHNlKTsodGhpcy5fbW91c2VTdGFydGVkP3RoaXMuX21vdXNlRHJhZyhqKTp0aGlzLl9tb3VzZVVwKGopKX1yZXR1cm4gIXRoaXMuX21vdXNlU3RhcnRlZH0sX21vdXNlVXA6ZnVuY3Rpb24oail7Yyhkb2N1bWVudCkudW5iaW5kKCJtb3VzZW1vdmUuIit0aGlzLndpZGdldE5hbWUsdGhpcy5fbW91c2VNb3ZlRGVsZWdhdGUpLnVuYmluZCgibW91c2V1cC4iK3RoaXMud2lkZ2V0TmFtZSx0aGlzLl9tb3VzZVVwRGVsZWdhdGUpO2lmKHRoaXMuX21vdXNlU3RhcnRlZCl7dGhpcy5fbW91c2VTdGFydGVkPWZhbHNlO3RoaXMuX3ByZXZlbnRDbGlja0V2ZW50PShqLnRhcmdldD09dGhpcy5fbW91c2VEb3duRXZlbnQudGFyZ2V0KTt0aGlzLl9tb3VzZVN0b3Aoail9cmV0dXJuIGZhbHNlfSxfbW91c2VEaXN0YW5jZU1ldDpmdW5jdGlvbihqKXtyZXR1cm4oTWF0aC5tYXgoTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVgtai5wYWdlWCksTWF0aC5hYnModGhpcy5fbW91c2VEb3duRXZlbnQucGFnZVktai5wYWdlWSkpPj10aGlzLm9wdGlvbnMuZGlzdGFuY2UpfSxfbW91c2VEZWxheU1ldDpmdW5jdGlvbihqKXtyZXR1cm4gdGhpcy5tb3VzZURlbGF5TWV0fSxfbW91c2VTdGFydDpmdW5jdGlvbihqKXt9LF9tb3VzZURyYWc6ZnVuY3Rpb24oail7fSxfbW91c2VTdG9wOmZ1bmN0aW9uKGope30sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihqKXtyZXR1cm4gdHJ1ZX19O2MudWkubW91c2UuZGVmYXVsdHM9e2NhbmNlbDpudWxsLGRpc3RhbmNlOjEsZGVsYXk6MH19KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgRHJhZ2dhYmxlIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvRHJhZ2dhYmxlcwogKgogKiBEZXBlbmRzOgogKgl1aS5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLmRyYWdnYWJsZSIsYS5leHRlbmQoe30sYS51aS5tb3VzZSx7X2luaXQ6ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuaGVscGVyPT0ib3JpZ2luYWwiJiYhKC9eKD86cnxhfGYpLykudGVzdCh0aGlzLmVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpKSl7dGhpcy5lbGVtZW50WzBdLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSJ9KHRoaXMub3B0aW9ucy5hZGRDbGFzc2VzJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLWRyYWdnYWJsZSIpKTsodGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLWRyYWdnYWJsZS1kaXNhYmxlZCIpKTt0aGlzLl9tb3VzZUluaXQoKX0sZGVzdHJveTpmdW5jdGlvbigpe2lmKCF0aGlzLmVsZW1lbnQuZGF0YSgiZHJhZ2dhYmxlIikpe3JldHVybn10aGlzLmVsZW1lbnQucmVtb3ZlRGF0YSgiZHJhZ2dhYmxlIikudW5iaW5kKCIuZHJhZ2dhYmxlIikucmVtb3ZlQ2xhc3MoInVpLWRyYWdnYWJsZSB1aS1kcmFnZ2FibGUtZHJhZ2dpbmcgdWktZHJhZ2dhYmxlLWRpc2FibGVkIik7dGhpcy5fbW91c2VEZXN0cm95KCl9LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5vcHRpb25zO2lmKHRoaXMuaGVscGVyfHxjLmRpc2FibGVkfHxhKGIudGFyZ2V0KS5pcygiLnVpLXJlc2l6YWJsZS1oYW5kbGUiKSl7cmV0dXJuIGZhbHNlfXRoaXMuaGFuZGxlPXRoaXMuX2dldEhhbmRsZShiKTtpZighdGhpcy5oYW5kbGUpe3JldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX0sX21vdXNlU3RhcnQ6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5vcHRpb25zO3RoaXMuaGVscGVyPXRoaXMuX2NyZWF0ZUhlbHBlcihiKTt0aGlzLl9jYWNoZUhlbHBlclByb3BvcnRpb25zKCk7aWYoYS51aS5kZG1hbmFnZXIpe2EudWkuZGRtYW5hZ2VyLmN1cnJlbnQ9dGhpc310aGlzLl9jYWNoZU1hcmdpbnMoKTt0aGlzLmNzc1Bvc2l0aW9uPXRoaXMuaGVscGVyLmNzcygicG9zaXRpb24iKTt0aGlzLnNjcm9sbFBhcmVudD10aGlzLmhlbHBlci5zY3JvbGxQYXJlbnQoKTt0aGlzLm9mZnNldD10aGlzLmVsZW1lbnQub2Zmc2V0KCk7dGhpcy5vZmZzZXQ9e3RvcDp0aGlzLm9mZnNldC50b3AtdGhpcy5tYXJnaW5zLnRvcCxsZWZ0OnRoaXMub2Zmc2V0LmxlZnQtdGhpcy5tYXJnaW5zLmxlZnR9O2EuZXh0ZW5kKHRoaXMub2Zmc2V0LHtjbGljazp7bGVmdDpiLnBhZ2VYLXRoaXMub2Zmc2V0LmxlZnQsdG9wOmIucGFnZVktdGhpcy5vZmZzZXQudG9wfSxwYXJlbnQ6dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkscmVsYXRpdmU6dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKX0pO3RoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGIpO3RoaXMub3JpZ2luYWxQYWdlWD1iLnBhZ2VYO3RoaXMub3JpZ2luYWxQYWdlWT1iLnBhZ2VZO2lmKGMuY3Vyc29yQXQpe3RoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoYy5jdXJzb3JBdCl9aWYoYy5jb250YWlubWVudCl7dGhpcy5fc2V0Q29udGFpbm1lbnQoKX10aGlzLl90cmlnZ2VyKCJzdGFydCIsYik7dGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO2lmKGEudWkuZGRtYW5hZ2VyJiYhYy5kcm9wQmVoYXZpb3VyKXthLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLGIpfXRoaXMuaGVscGVyLmFkZENsYXNzKCJ1aS1kcmFnZ2FibGUtZHJhZ2dpbmciKTt0aGlzLl9tb3VzZURyYWcoYix0cnVlKTtyZXR1cm4gdHJ1ZX0sX21vdXNlRHJhZzpmdW5jdGlvbihiLGQpe3RoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihiKTt0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpO2lmKCFkKXt2YXIgYz10aGlzLl91aUhhc2goKTt0aGlzLl90cmlnZ2VyKCJkcmFnIixiLGMpO3RoaXMucG9zaXRpb249Yy5wb3NpdGlvbn1pZighdGhpcy5vcHRpb25zLmF4aXN8fHRoaXMub3B0aW9ucy5heGlzIT0ieSIpe3RoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0KyJweCJ9aWYoIXRoaXMub3B0aW9ucy5heGlzfHx0aGlzLm9wdGlvbnMuYXhpcyE9IngiKXt0aGlzLmhlbHBlclswXS5zdHlsZS50b3A9dGhpcy5wb3NpdGlvbi50b3ArInB4In1pZihhLnVpLmRkbWFuYWdlcil7YS51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLGIpfXJldHVybiBmYWxzZX0sX21vdXNlU3RvcDpmdW5jdGlvbihjKXt2YXIgZD1mYWxzZTtpZihhLnVpLmRkbWFuYWdlciYmIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyKXtkPWEudWkuZGRtYW5hZ2VyLmRyb3AodGhpcyxjKX1pZih0aGlzLmRyb3BwZWQpe2Q9dGhpcy5kcm9wcGVkO3RoaXMuZHJvcHBlZD1mYWxzZX1pZigodGhpcy5vcHRpb25zLnJldmVydD09ImludmFsaWQiJiYhZCl8fCh0aGlzLm9wdGlvbnMucmV2ZXJ0PT0idmFsaWQiJiZkKXx8dGhpcy5vcHRpb25zLnJldmVydD09PXRydWV8fChhLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLnJldmVydCkmJnRoaXMub3B0aW9ucy5yZXZlcnQuY2FsbCh0aGlzLmVsZW1lbnQsZCkpKXt2YXIgYj10aGlzO2EodGhpcy5oZWxwZXIpLmFuaW1hdGUodGhpcy5vcmlnaW5hbFBvc2l0aW9uLHBhcnNlSW50KHRoaXMub3B0aW9ucy5yZXZlcnREdXJhdGlvbiwxMCksZnVuY3Rpb24oKXtiLl90cmlnZ2VyKCJzdG9wIixjKTtiLl9jbGVhcigpfSl9ZWxzZXt0aGlzLl90cmlnZ2VyKCJzdG9wIixjKTt0aGlzLl9jbGVhcigpfXJldHVybiBmYWxzZX0sX2dldEhhbmRsZTpmdW5jdGlvbihiKXt2YXIgYz0hdGhpcy5vcHRpb25zLmhhbmRsZXx8IWEodGhpcy5vcHRpb25zLmhhbmRsZSx0aGlzLmVsZW1lbnQpLmxlbmd0aD90cnVlOmZhbHNlO2EodGhpcy5vcHRpb25zLmhhbmRsZSx0aGlzLmVsZW1lbnQpLmZpbmQoIioiKS5hbmRTZWxmKCkuZWFjaChmdW5jdGlvbigpe2lmKHRoaXM9PWIudGFyZ2V0KXtjPXRydWV9fSk7cmV0dXJuIGN9LF9jcmVhdGVIZWxwZXI6ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5vcHRpb25zO3ZhciBiPWEuaXNGdW5jdGlvbihkLmhlbHBlcik/YShkLmhlbHBlci5hcHBseSh0aGlzLmVsZW1lbnRbMF0sW2NdKSk6KGQuaGVscGVyPT0iY2xvbmUiP3RoaXMuZWxlbWVudC5jbG9uZSgpOnRoaXMuZWxlbWVudCk7aWYoIWIucGFyZW50cygiYm9keSIpLmxlbmd0aCl7Yi5hcHBlbmRUbygoZC5hcHBlbmRUbz09InBhcmVudCI/dGhpcy5lbGVtZW50WzBdLnBhcmVudE5vZGU6ZC5hcHBlbmRUbykpfWlmKGJbMF0hPXRoaXMuZWxlbWVudFswXSYmISgvKGZpeGVkfGFic29sdXRlKS8pLnRlc3QoYi5jc3MoInBvc2l0aW9uIikpKXtiLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpfXJldHVybiBifSxfYWRqdXN0T2Zmc2V0RnJvbUhlbHBlcjpmdW5jdGlvbihiKXtpZihiLmxlZnQhPXVuZGVmaW5lZCl7dGhpcy5vZmZzZXQuY2xpY2subGVmdD1iLmxlZnQrdGhpcy5tYXJnaW5zLmxlZnR9aWYoYi5yaWdodCE9dW5kZWZpbmVkKXt0aGlzLm9mZnNldC5jbGljay5sZWZ0PXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtYi5yaWdodCt0aGlzLm1hcmdpbnMubGVmdH1pZihiLnRvcCE9dW5kZWZpbmVkKXt0aGlzLm9mZnNldC5jbGljay50b3A9Yi50b3ArdGhpcy5tYXJnaW5zLnRvcH1pZihiLmJvdHRvbSE9dW5kZWZpbmVkKXt0aGlzLm9mZnNldC5jbGljay50b3A9dGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtYi5ib3R0b20rdGhpcy5tYXJnaW5zLnRvcH19LF9nZXRQYXJlbnRPZmZzZXQ6ZnVuY3Rpb24oKXt0aGlzLm9mZnNldFBhcmVudD10aGlzLmhlbHBlci5vZmZzZXRQYXJlbnQoKTt2YXIgYj10aGlzLm9mZnNldFBhcmVudC5vZmZzZXQoKTtpZih0aGlzLmNzc1Bvc2l0aW9uPT0iYWJzb2x1dGUiJiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJmEudWkuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pKXtiLmxlZnQrPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTtiLnRvcCs9dGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCl9aWYoKHRoaXMub2Zmc2V0UGFyZW50WzBdPT1kb2N1bWVudC5ib2R5KXx8KHRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUmJnRoaXMub2Zmc2V0UGFyZW50WzBdLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09Imh0bWwiJiZhLmJyb3dzZXIubXNpZSkpe2I9e3RvcDowLGxlZnQ6MH19cmV0dXJue3RvcDpiLnRvcCsocGFyc2VJbnQodGhpcy5vZmZzZXRQYXJlbnQuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCksbGVmdDpiLmxlZnQrKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKX19LF9nZXRSZWxhdGl2ZU9mZnNldDpmdW5jdGlvbigpe2lmKHRoaXMuY3NzUG9zaXRpb249PSJyZWxhdGl2ZSIpe3ZhciBiPXRoaXMuZWxlbWVudC5wb3NpdGlvbigpO3JldHVybnt0b3A6Yi50b3AtKHBhcnNlSW50KHRoaXMuaGVscGVyLmNzcygidG9wIiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKSxsZWZ0OmIubGVmdC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJsZWZ0IiksMTApfHwwKSt0aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCl9fWVsc2V7cmV0dXJue3RvcDowLGxlZnQ6MH19fSxfY2FjaGVNYXJnaW5zOmZ1bmN0aW9uKCl7dGhpcy5tYXJnaW5zPXtsZWZ0OihwYXJzZUludCh0aGlzLmVsZW1lbnQuY3NzKCJtYXJnaW5MZWZ0IiksMTApfHwwKSx0b3A6KHBhcnNlSW50KHRoaXMuZWxlbWVudC5jc3MoIm1hcmdpblRvcCIpLDEwKXx8MCl9fSxfY2FjaGVIZWxwZXJQcm9wb3J0aW9uczpmdW5jdGlvbigpe3RoaXMuaGVscGVyUHJvcG9ydGlvbnM9e3dpZHRoOnRoaXMuaGVscGVyLm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5oZWxwZXIub3V0ZXJIZWlnaHQoKX19LF9zZXRDb250YWlubWVudDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3B0aW9ucztpZihlLmNvbnRhaW5tZW50PT0icGFyZW50Iil7ZS5jb250YWlubWVudD10aGlzLmhlbHBlclswXS5wYXJlbnROb2RlfWlmKGUuY29udGFpbm1lbnQ9PSJkb2N1bWVudCJ8fGUuY29udGFpbm1lbnQ9PSJ3aW5kb3ciKXt0aGlzLmNvbnRhaW5tZW50PVswLXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQsMC10aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcCxhKGUuY29udGFpbm1lbnQ9PSJkb2N1bWVudCI/ZG9jdW1lbnQ6d2luZG93KS53aWR0aCgpLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsKGEoZS5jb250YWlubWVudD09ImRvY3VtZW50Ij9kb2N1bWVudDp3aW5kb3cpLmhlaWdodCgpfHxkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0KS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXX1pZighKC9eKGRvY3VtZW50fHdpbmRvd3xwYXJlbnQpJC8pLnRlc3QoZS5jb250YWlubWVudCkmJmUuY29udGFpbm1lbnQuY29uc3RydWN0b3IhPUFycmF5KXt2YXIgYz1hKGUuY29udGFpbm1lbnQpWzBdO2lmKCFjKXtyZXR1cm59dmFyIGQ9YShlLmNvbnRhaW5tZW50KS5vZmZzZXQoKTt2YXIgYj0oYShjKS5jc3MoIm92ZXJmbG93IikhPSJoaWRkZW4iKTt0aGlzLmNvbnRhaW5tZW50PVtkLmxlZnQrKHBhcnNlSW50KGEoYykuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApKyhwYXJzZUludChhKGMpLmNzcygicGFkZGluZ0xlZnQiKSwxMCl8fDApLXRoaXMubWFyZ2lucy5sZWZ0LGQudG9wKyhwYXJzZUludChhKGMpLmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApKyhwYXJzZUludChhKGMpLmNzcygicGFkZGluZ1RvcCIpLDEwKXx8MCktdGhpcy5tYXJnaW5zLnRvcCxkLmxlZnQrKGI/TWF0aC5tYXgoYy5zY3JvbGxXaWR0aCxjLm9mZnNldFdpZHRoKTpjLm9mZnNldFdpZHRoKS0ocGFyc2VJbnQoYShjKS5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KGEoYykuY3NzKCJwYWRkaW5nUmlnaHQiKSwxMCl8fDApLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgtdGhpcy5tYXJnaW5zLmxlZnQsZC50b3ArKGI/TWF0aC5tYXgoYy5zY3JvbGxIZWlnaHQsYy5vZmZzZXRIZWlnaHQpOmMub2Zmc2V0SGVpZ2h0KS0ocGFyc2VJbnQoYShjKS5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKS0ocGFyc2VJbnQoYShjKS5jc3MoInBhZGRpbmdCb3R0b20iKSwxMCl8fDApLXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LXRoaXMubWFyZ2lucy50b3BdfWVsc2V7aWYoZS5jb250YWlubWVudC5jb25zdHJ1Y3Rvcj09QXJyYXkpe3RoaXMuY29udGFpbm1lbnQ9ZS5jb250YWlubWVudH19fSxfY29udmVydFBvc2l0aW9uVG86ZnVuY3Rpb24oZixoKXtpZighaCl7aD10aGlzLnBvc2l0aW9ufXZhciBjPWY9PSJhYnNvbHV0ZSI/MTotMTt2YXIgZT10aGlzLm9wdGlvbnMsYj10aGlzLmNzc1Bvc2l0aW9uPT0iYWJzb2x1dGUiJiYhKHRoaXMuc2Nyb2xsUGFyZW50WzBdIT1kb2N1bWVudCYmYS51aS5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSkpP3RoaXMub2Zmc2V0UGFyZW50OnRoaXMuc2Nyb2xsUGFyZW50LGc9KC8oaHRtbHxib2R5KS9pKS50ZXN0KGJbMF0udGFnTmFtZSk7cmV0dXJue3RvcDooaC50b3ArdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wKmMrdGhpcy5vZmZzZXQucGFyZW50LnRvcCpjLShhLmJyb3dzZXIuc2FmYXJpJiZ0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPzA6KHRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOihnPzA6Yi5zY3JvbGxUb3AoKSkpKmMpKSxsZWZ0OihoLmxlZnQrdGhpcy5vZmZzZXQucmVsYXRpdmUubGVmdCpjK3RoaXMub2Zmc2V0LnBhcmVudC5sZWZ0KmMtKGEuYnJvd3Nlci5zYWZhcmkmJnRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/MDoodGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOmc/MDpiLnNjcm9sbExlZnQoKSkqYykpfX0sX2dlbmVyYXRlUG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIGg9dGhpcy5vcHRpb25zLGI9dGhpcy5jc3NQb3NpdGlvbj09ImFic29sdXRlIiYmISh0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJmEudWkuY29udGFpbnModGhpcy5zY3JvbGxQYXJlbnRbMF0sdGhpcy5vZmZzZXRQYXJlbnRbMF0pKT90aGlzLm9mZnNldFBhcmVudDp0aGlzLnNjcm9sbFBhcmVudCxpPSgvKGh0bWx8Ym9keSkvaSkudGVzdChiWzBdLnRhZ05hbWUpO2lmKHRoaXMuY3NzUG9zaXRpb249PSJyZWxhdGl2ZSImJiEodGhpcy5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZ0aGlzLnNjcm9sbFBhcmVudFswXSE9dGhpcy5vZmZzZXRQYXJlbnRbMF0pKXt0aGlzLm9mZnNldC5yZWxhdGl2ZT10aGlzLl9nZXRSZWxhdGl2ZU9mZnNldCgpfXZhciBkPWUucGFnZVg7dmFyIGM9ZS5wYWdlWTtpZih0aGlzLm9yaWdpbmFsUG9zaXRpb24pe2lmKHRoaXMuY29udGFpbm1lbnQpe2lmKGUucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdDx0aGlzLmNvbnRhaW5tZW50WzBdKXtkPXRoaXMuY29udGFpbm1lbnRbMF0rdGhpcy5vZmZzZXQuY2xpY2subGVmdH1pZihlLnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDx0aGlzLmNvbnRhaW5tZW50WzFdKXtjPXRoaXMuY29udGFpbm1lbnRbMV0rdGhpcy5vZmZzZXQuY2xpY2sudG9wfWlmKGUucGFnZVgtdGhpcy5vZmZzZXQuY2xpY2subGVmdD50aGlzLmNvbnRhaW5tZW50WzJdKXtkPXRoaXMuY29udGFpbm1lbnRbMl0rdGhpcy5vZmZzZXQuY2xpY2subGVmdH1pZihlLnBhZ2VZLXRoaXMub2Zmc2V0LmNsaWNrLnRvcD50aGlzLmNvbnRhaW5tZW50WzNdKXtjPXRoaXMuY29udGFpbm1lbnRbM10rdGhpcy5vZmZzZXQuY2xpY2sudG9wfX1pZihoLmdyaWQpe3ZhciBnPXRoaXMub3JpZ2luYWxQYWdlWStNYXRoLnJvdW5kKChjLXRoaXMub3JpZ2luYWxQYWdlWSkvaC5ncmlkWzFdKSpoLmdyaWRbMV07Yz10aGlzLmNvbnRhaW5tZW50PyghKGctdGhpcy5vZmZzZXQuY2xpY2sudG9wPHRoaXMuY29udGFpbm1lbnRbMV18fGctdGhpcy5vZmZzZXQuY2xpY2sudG9wPnRoaXMuY29udGFpbm1lbnRbM10pP2c6KCEoZy10aGlzLm9mZnNldC5jbGljay50b3A8dGhpcy5jb250YWlubWVudFsxXSk/Zy1oLmdyaWRbMV06ZytoLmdyaWRbMV0pKTpnO3ZhciBmPXRoaXMub3JpZ2luYWxQYWdlWCtNYXRoLnJvdW5kKChkLXRoaXMub3JpZ2luYWxQYWdlWCkvaC5ncmlkWzBdKSpoLmdyaWRbMF07ZD10aGlzLmNvbnRhaW5tZW50PyghKGYtdGhpcy5vZmZzZXQuY2xpY2subGVmdDx0aGlzLmNvbnRhaW5tZW50WzBdfHxmLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ+dGhpcy5jb250YWlubWVudFsyXSk/ZjooIShmLXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ8dGhpcy5jb250YWlubWVudFswXSk/Zi1oLmdyaWRbMF06ZitoLmdyaWRbMF0pKTpmfX1yZXR1cm57dG9wOihjLXRoaXMub2Zmc2V0LmNsaWNrLnRvcC10aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AtdGhpcy5vZmZzZXQucGFyZW50LnRvcCsoYS5icm93c2VyLnNhZmFyaSYmdGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8wOih0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxUb3AoKTooaT8wOmIuc2Nyb2xsVG9wKCkpKSkpLGxlZnQ6KGQtdGhpcy5vZmZzZXQuY2xpY2subGVmdC10aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0KyhhLmJyb3dzZXIuc2FmYXJpJiZ0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPzA6KHRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKTppPzA6Yi5zY3JvbGxMZWZ0KCkpKSl9fSxfY2xlYXI6ZnVuY3Rpb24oKXt0aGlzLmhlbHBlci5yZW1vdmVDbGFzcygidWktZHJhZ2dhYmxlLWRyYWdnaW5nIik7aWYodGhpcy5oZWxwZXJbMF0hPXRoaXMuZWxlbWVudFswXSYmIXRoaXMuY2FuY2VsSGVscGVyUmVtb3ZhbCl7dGhpcy5oZWxwZXIucmVtb3ZlKCl9dGhpcy5oZWxwZXI9bnVsbDt0aGlzLmNhbmNlbEhlbHBlclJlbW92YWw9ZmFsc2V9LF90cmlnZ2VyOmZ1bmN0aW9uKGIsYyxkKXtkPWR8fHRoaXMuX3VpSGFzaCgpO2EudWkucGx1Z2luLmNhbGwodGhpcyxiLFtjLGRdKTtpZihiPT0iZHJhZyIpe3RoaXMucG9zaXRpb25BYnM9dGhpcy5fY29udmVydFBvc2l0aW9uVG8oImFic29sdXRlIil9cmV0dXJuIGEud2lkZ2V0LnByb3RvdHlwZS5fdHJpZ2dlci5jYWxsKHRoaXMsYixjLGQpfSxwbHVnaW5zOnt9LF91aUhhc2g6ZnVuY3Rpb24oYil7cmV0dXJue2hlbHBlcjp0aGlzLmhlbHBlcixwb3NpdGlvbjp0aGlzLnBvc2l0aW9uLGFic29sdXRlUG9zaXRpb246dGhpcy5wb3NpdGlvbkFicyxvZmZzZXQ6dGhpcy5wb3NpdGlvbkFic319fSkpO2EuZXh0ZW5kKGEudWkuZHJhZ2dhYmxlLHt2ZXJzaW9uOiIxLjcuMiIsZXZlbnRQcmVmaXg6ImRyYWciLGRlZmF1bHRzOnthZGRDbGFzc2VzOnRydWUsYXBwZW5kVG86InBhcmVudCIsYXhpczpmYWxzZSxjYW5jZWw6IjppbnB1dCxvcHRpb24iLGNvbm5lY3RUb1NvcnRhYmxlOmZhbHNlLGNvbnRhaW5tZW50OmZhbHNlLGN1cnNvcjoiYXV0byIsY3Vyc29yQXQ6ZmFsc2UsZGVsYXk6MCxkaXN0YW5jZToxLGdyaWQ6ZmFsc2UsaGFuZGxlOmZhbHNlLGhlbHBlcjoib3JpZ2luYWwiLGlmcmFtZUZpeDpmYWxzZSxvcGFjaXR5OmZhbHNlLHJlZnJlc2hQb3NpdGlvbnM6ZmFsc2UscmV2ZXJ0OmZhbHNlLHJldmVydER1cmF0aW9uOjUwMCxzY29wZToiZGVmYXVsdCIsc2Nyb2xsOnRydWUsc2Nyb2xsU2Vuc2l0aXZpdHk6MjAsc2Nyb2xsU3BlZWQ6MjAsc25hcDpmYWxzZSxzbmFwTW9kZToiYm90aCIsc25hcFRvbGVyYW5jZToyMCxzdGFjazpmYWxzZSx6SW5kZXg6ZmFsc2V9fSk7YS51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJjb25uZWN0VG9Tb3J0YWJsZSIse3N0YXJ0OmZ1bmN0aW9uKGMsZSl7dmFyIGQ9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKSxmPWQub3B0aW9ucyxiPWEuZXh0ZW5kKHt9LGUse2l0ZW06ZC5lbGVtZW50fSk7ZC5zb3J0YWJsZXM9W107YShmLmNvbm5lY3RUb1NvcnRhYmxlKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGc9YS5kYXRhKHRoaXMsInNvcnRhYmxlIik7aWYoZyYmIWcub3B0aW9ucy5kaXNhYmxlZCl7ZC5zb3J0YWJsZXMucHVzaCh7aW5zdGFuY2U6ZyxzaG91bGRSZXZlcnQ6Zy5vcHRpb25zLnJldmVydH0pO2cuX3JlZnJlc2hJdGVtcygpO2cuX3RyaWdnZXIoImFjdGl2YXRlIixjLGIpfX0pfSxzdG9wOmZ1bmN0aW9uKGMsZSl7dmFyIGQ9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKSxiPWEuZXh0ZW5kKHt9LGUse2l0ZW06ZC5lbGVtZW50fSk7YS5lYWNoKGQuc29ydGFibGVzLGZ1bmN0aW9uKCl7aWYodGhpcy5pbnN0YW5jZS5pc092ZXIpe3RoaXMuaW5zdGFuY2UuaXNPdmVyPTA7ZC5jYW5jZWxIZWxwZXJSZW1vdmFsPXRydWU7dGhpcy5pbnN0YW5jZS5jYW5jZWxIZWxwZXJSZW1vdmFsPWZhbHNlO2lmKHRoaXMuc2hvdWxkUmV2ZXJ0KXt0aGlzLmluc3RhbmNlLm9wdGlvbnMucmV2ZXJ0PXRydWV9dGhpcy5pbnN0YW5jZS5fbW91c2VTdG9wKGMpO3RoaXMuaW5zdGFuY2Uub3B0aW9ucy5oZWxwZXI9dGhpcy5pbnN0YW5jZS5vcHRpb25zLl9oZWxwZXI7aWYoZC5vcHRpb25zLmhlbHBlcj09Im9yaWdpbmFsIil7dGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbS5jc3Moe3RvcDoiYXV0byIsbGVmdDoiYXV0byJ9KX19ZWxzZXt0aGlzLmluc3RhbmNlLmNhbmNlbEhlbHBlclJlbW92YWw9ZmFsc2U7dGhpcy5pbnN0YW5jZS5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsYyxiKX19KX0sZHJhZzpmdW5jdGlvbihjLGYpe3ZhciBlPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIiksYj10aGlzO3ZhciBkPWZ1bmN0aW9uKGkpe3ZhciBuPXRoaXMub2Zmc2V0LmNsaWNrLnRvcCxtPXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7dmFyIGc9dGhpcy5wb3NpdGlvbkFicy50b3Asaz10aGlzLnBvc2l0aW9uQWJzLmxlZnQ7dmFyIGo9aS5oZWlnaHQsbD1pLndpZHRoO3ZhciBwPWkudG9wLGg9aS5sZWZ0O3JldHVybiBhLnVpLmlzT3ZlcihnK24sayttLHAsaCxqLGwpfTthLmVhY2goZS5zb3J0YWJsZXMsZnVuY3Rpb24oZyl7dGhpcy5pbnN0YW5jZS5wb3NpdGlvbkFicz1lLnBvc2l0aW9uQWJzO3RoaXMuaW5zdGFuY2UuaGVscGVyUHJvcG9ydGlvbnM9ZS5oZWxwZXJQcm9wb3J0aW9uczt0aGlzLmluc3RhbmNlLm9mZnNldC5jbGljaz1lLm9mZnNldC5jbGljaztpZih0aGlzLmluc3RhbmNlLl9pbnRlcnNlY3RzV2l0aCh0aGlzLmluc3RhbmNlLmNvbnRhaW5lckNhY2hlKSl7aWYoIXRoaXMuaW5zdGFuY2UuaXNPdmVyKXt0aGlzLmluc3RhbmNlLmlzT3Zlcj0xO3RoaXMuaW5zdGFuY2UuY3VycmVudEl0ZW09YShiKS5jbG9uZSgpLmFwcGVuZFRvKHRoaXMuaW5zdGFuY2UuZWxlbWVudCkuZGF0YSgic29ydGFibGUtaXRlbSIsdHJ1ZSk7dGhpcy5pbnN0YW5jZS5vcHRpb25zLl9oZWxwZXI9dGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcjt0aGlzLmluc3RhbmNlLm9wdGlvbnMuaGVscGVyPWZ1bmN0aW9uKCl7cmV0dXJuIGYuaGVscGVyWzBdfTtjLnRhcmdldD10aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtWzBdO3RoaXMuaW5zdGFuY2UuX21vdXNlQ2FwdHVyZShjLHRydWUpO3RoaXMuaW5zdGFuY2UuX21vdXNlU3RhcnQoYyx0cnVlLHRydWUpO3RoaXMuaW5zdGFuY2Uub2Zmc2V0LmNsaWNrLnRvcD1lLm9mZnNldC5jbGljay50b3A7dGhpcy5pbnN0YW5jZS5vZmZzZXQuY2xpY2subGVmdD1lLm9mZnNldC5jbGljay5sZWZ0O3RoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC5sZWZ0LT1lLm9mZnNldC5wYXJlbnQubGVmdC10aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQubGVmdDt0aGlzLmluc3RhbmNlLm9mZnNldC5wYXJlbnQudG9wLT1lLm9mZnNldC5wYXJlbnQudG9wLXRoaXMuaW5zdGFuY2Uub2Zmc2V0LnBhcmVudC50b3A7ZS5fdHJpZ2dlcigidG9Tb3J0YWJsZSIsYyk7ZS5kcm9wcGVkPXRoaXMuaW5zdGFuY2UuZWxlbWVudDtlLmN1cnJlbnRJdGVtPWUuZWxlbWVudDt0aGlzLmluc3RhbmNlLmZyb21PdXRzaWRlPWV9aWYodGhpcy5pbnN0YW5jZS5jdXJyZW50SXRlbSl7dGhpcy5pbnN0YW5jZS5fbW91c2VEcmFnKGMpfX1lbHNle2lmKHRoaXMuaW5zdGFuY2UuaXNPdmVyKXt0aGlzLmluc3RhbmNlLmlzT3Zlcj0wO3RoaXMuaW5zdGFuY2UuY2FuY2VsSGVscGVyUmVtb3ZhbD10cnVlO3RoaXMuaW5zdGFuY2Uub3B0aW9ucy5yZXZlcnQ9ZmFsc2U7dGhpcy5pbnN0YW5jZS5fdHJpZ2dlcigib3V0IixjLHRoaXMuaW5zdGFuY2UuX3VpSGFzaCh0aGlzLmluc3RhbmNlKSk7dGhpcy5pbnN0YW5jZS5fbW91c2VTdG9wKGMsdHJ1ZSk7dGhpcy5pbnN0YW5jZS5vcHRpb25zLmhlbHBlcj10aGlzLmluc3RhbmNlLm9wdGlvbnMuX2hlbHBlcjt0aGlzLmluc3RhbmNlLmN1cnJlbnRJdGVtLnJlbW92ZSgpO2lmKHRoaXMuaW5zdGFuY2UucGxhY2Vob2xkZXIpe3RoaXMuaW5zdGFuY2UucGxhY2Vob2xkZXIucmVtb3ZlKCl9ZS5fdHJpZ2dlcigiZnJvbVNvcnRhYmxlIixjKTtlLmRyb3BwZWQ9ZmFsc2V9fX0pfX0pO2EudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwiY3Vyc29yIix7c3RhcnQ6ZnVuY3Rpb24oYyxkKXt2YXIgYj1hKCJib2R5IiksZT1hKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLm9wdGlvbnM7aWYoYi5jc3MoImN1cnNvciIpKXtlLl9jdXJzb3I9Yi5jc3MoImN1cnNvciIpfWIuY3NzKCJjdXJzb3IiLGUuY3Vyc29yKX0sc3RvcDpmdW5jdGlvbihiLGMpe3ZhciBkPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIikub3B0aW9ucztpZihkLl9jdXJzb3Ipe2EoImJvZHkiKS5jc3MoImN1cnNvciIsZC5fY3Vyc29yKX19fSk7YS51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJpZnJhbWVGaXgiLHtzdGFydDpmdW5jdGlvbihiLGMpe3ZhciBkPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIikub3B0aW9uczthKGQuaWZyYW1lRml4PT09dHJ1ZT8iaWZyYW1lIjpkLmlmcmFtZUZpeCkuZWFjaChmdW5jdGlvbigpe2EoJzxkaXYgY2xhc3M9InVpLWRyYWdnYWJsZS1pZnJhbWVGaXgiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZmZmOyI+PC9kaXY+JykuY3NzKHt3aWR0aDp0aGlzLm9mZnNldFdpZHRoKyJweCIsaGVpZ2h0OnRoaXMub2Zmc2V0SGVpZ2h0KyJweCIscG9zaXRpb246ImFic29sdXRlIixvcGFjaXR5OiIwLjAwMSIsekluZGV4OjEwMDB9KS5jc3MoYSh0aGlzKS5vZmZzZXQoKSkuYXBwZW5kVG8oImJvZHkiKX0pfSxzdG9wOmZ1bmN0aW9uKGIsYyl7YSgiZGl2LnVpLWRyYWdnYWJsZS1pZnJhbWVGaXgiKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMpfSl9fSk7YS51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJvcGFjaXR5Iix7c3RhcnQ6ZnVuY3Rpb24oYyxkKXt2YXIgYj1hKGQuaGVscGVyKSxlPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIikub3B0aW9ucztpZihiLmNzcygib3BhY2l0eSIpKXtlLl9vcGFjaXR5PWIuY3NzKCJvcGFjaXR5Iil9Yi5jc3MoIm9wYWNpdHkiLGUub3BhY2l0eSl9LHN0b3A6ZnVuY3Rpb24oYixjKXt2YXIgZD1hKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLm9wdGlvbnM7aWYoZC5fb3BhY2l0eSl7YShjLmhlbHBlcikuY3NzKCJvcGFjaXR5IixkLl9vcGFjaXR5KX19fSk7YS51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJzY3JvbGwiLHtzdGFydDpmdW5jdGlvbihjLGQpe3ZhciBiPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIik7aWYoYi5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZiLnNjcm9sbFBhcmVudFswXS50YWdOYW1lIT0iSFRNTCIpe2Iub3ZlcmZsb3dPZmZzZXQ9Yi5zY3JvbGxQYXJlbnQub2Zmc2V0KCl9fSxkcmFnOmZ1bmN0aW9uKGQsZSl7dmFyIGM9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKSxmPWMub3B0aW9ucyxiPWZhbHNlO2lmKGMuc2Nyb2xsUGFyZW50WzBdIT1kb2N1bWVudCYmYy5zY3JvbGxQYXJlbnRbMF0udGFnTmFtZSE9IkhUTUwiKXtpZighZi5heGlzfHxmLmF4aXMhPSJ4Iil7aWYoKGMub3ZlcmZsb3dPZmZzZXQudG9wK2Muc2Nyb2xsUGFyZW50WzBdLm9mZnNldEhlaWdodCktZC5wYWdlWTxmLnNjcm9sbFNlbnNpdGl2aXR5KXtjLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9Yj1jLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3ArZi5zY3JvbGxTcGVlZH1lbHNle2lmKGQucGFnZVktYy5vdmVyZmxvd09mZnNldC50b3A8Zi5zY3JvbGxTZW5zaXRpdml0eSl7Yy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wPWI9Yy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wLWYuc2Nyb2xsU3BlZWR9fX1pZighZi5heGlzfHxmLmF4aXMhPSJ5Iil7aWYoKGMub3ZlcmZsb3dPZmZzZXQubGVmdCtjLnNjcm9sbFBhcmVudFswXS5vZmZzZXRXaWR0aCktZC5wYWdlWDxmLnNjcm9sbFNlbnNpdGl2aXR5KXtjLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0PWI9Yy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdCtmLnNjcm9sbFNwZWVkfWVsc2V7aWYoZC5wYWdlWC1jLm92ZXJmbG93T2Zmc2V0LmxlZnQ8Zi5zY3JvbGxTZW5zaXRpdml0eSl7Yy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1iPWMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQtZi5zY3JvbGxTcGVlZH19fX1lbHNle2lmKCFmLmF4aXN8fGYuYXhpcyE9IngiKXtpZihkLnBhZ2VZLWEoZG9jdW1lbnQpLnNjcm9sbFRvcCgpPGYuc2Nyb2xsU2Vuc2l0aXZpdHkpe2I9YShkb2N1bWVudCkuc2Nyb2xsVG9wKGEoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLWYuc2Nyb2xsU3BlZWQpfWVsc2V7aWYoYSh3aW5kb3cpLmhlaWdodCgpLShkLnBhZ2VZLWEoZG9jdW1lbnQpLnNjcm9sbFRvcCgpKTxmLnNjcm9sbFNlbnNpdGl2aXR5KXtiPWEoZG9jdW1lbnQpLnNjcm9sbFRvcChhKGRvY3VtZW50KS5zY3JvbGxUb3AoKStmLnNjcm9sbFNwZWVkKX19fWlmKCFmLmF4aXN8fGYuYXhpcyE9InkiKXtpZihkLnBhZ2VYLWEoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTxmLnNjcm9sbFNlbnNpdGl2aXR5KXtiPWEoZG9jdW1lbnQpLnNjcm9sbExlZnQoYShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpLWYuc2Nyb2xsU3BlZWQpfWVsc2V7aWYoYSh3aW5kb3cpLndpZHRoKCktKGQucGFnZVgtYShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKTxmLnNjcm9sbFNlbnNpdGl2aXR5KXtiPWEoZG9jdW1lbnQpLnNjcm9sbExlZnQoYShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpK2Yuc2Nyb2xsU3BlZWQpfX19fWlmKGIhPT1mYWxzZSYmYS51aS5kZG1hbmFnZXImJiFmLmRyb3BCZWhhdmlvdXIpe2EudWkuZGRtYW5hZ2VyLnByZXBhcmVPZmZzZXRzKGMsZCl9fX0pO2EudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwic25hcCIse3N0YXJ0OmZ1bmN0aW9uKGMsZCl7dmFyIGI9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKSxlPWIub3B0aW9ucztiLnNuYXBFbGVtZW50cz1bXTthKGUuc25hcC5jb25zdHJ1Y3RvciE9U3RyaW5nPyhlLnNuYXAuaXRlbXN8fCI6ZGF0YShkcmFnZ2FibGUpIik6ZS5zbmFwKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGc9YSh0aGlzKTt2YXIgZj1nLm9mZnNldCgpO2lmKHRoaXMhPWIuZWxlbWVudFswXSl7Yi5zbmFwRWxlbWVudHMucHVzaCh7aXRlbTp0aGlzLHdpZHRoOmcub3V0ZXJXaWR0aCgpLGhlaWdodDpnLm91dGVySGVpZ2h0KCksdG9wOmYudG9wLGxlZnQ6Zi5sZWZ0fSl9fSl9LGRyYWc6ZnVuY3Rpb24odSxwKXt2YXIgZz1hKHRoaXMpLmRhdGEoImRyYWdnYWJsZSIpLHE9Zy5vcHRpb25zO3ZhciB5PXEuc25hcFRvbGVyYW5jZTt2YXIgeD1wLm9mZnNldC5sZWZ0LHc9eCtnLmhlbHBlclByb3BvcnRpb25zLndpZHRoLGY9cC5vZmZzZXQudG9wLGU9ZitnLmhlbHBlclByb3BvcnRpb25zLmhlaWdodDtmb3IodmFyIHY9Zy5zbmFwRWxlbWVudHMubGVuZ3RoLTE7dj49MDt2LS0pe3ZhciBzPWcuc25hcEVsZW1lbnRzW3ZdLmxlZnQsbj1zK2cuc25hcEVsZW1lbnRzW3ZdLndpZHRoLG09Zy5zbmFwRWxlbWVudHNbdl0udG9wLEE9bStnLnNuYXBFbGVtZW50c1t2XS5oZWlnaHQ7aWYoISgocy15PHgmJng8bit5JiZtLXk8ZiYmZjxBK3kpfHwocy15PHgmJng8bit5JiZtLXk8ZSYmZTxBK3kpfHwocy15PHcmJnc8bit5JiZtLXk8ZiYmZjxBK3kpfHwocy15PHcmJnc8bit5JiZtLXk8ZSYmZTxBK3kpKSl7aWYoZy5zbmFwRWxlbWVudHNbdl0uc25hcHBpbmcpeyhnLm9wdGlvbnMuc25hcC5yZWxlYXNlJiZnLm9wdGlvbnMuc25hcC5yZWxlYXNlLmNhbGwoZy5lbGVtZW50LHUsYS5leHRlbmQoZy5fdWlIYXNoKCkse3NuYXBJdGVtOmcuc25hcEVsZW1lbnRzW3ZdLml0ZW19KSkpfWcuc25hcEVsZW1lbnRzW3ZdLnNuYXBwaW5nPWZhbHNlO2NvbnRpbnVlfWlmKHEuc25hcE1vZGUhPSJpbm5lciIpe3ZhciBjPU1hdGguYWJzKG0tZSk8PXk7dmFyIHo9TWF0aC5hYnMoQS1mKTw9eTt2YXIgaj1NYXRoLmFicyhzLXcpPD15O3ZhciBrPU1hdGguYWJzKG4teCk8PXk7aWYoYyl7cC5wb3NpdGlvbi50b3A9Zy5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOm0tZy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbGVmdDowfSkudG9wLWcubWFyZ2lucy50b3B9aWYoeil7cC5wb3NpdGlvbi50b3A9Zy5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOkEsbGVmdDowfSkudG9wLWcubWFyZ2lucy50b3B9aWYoail7cC5wb3NpdGlvbi5sZWZ0PWcuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6cy1nLmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdC1nLm1hcmdpbnMubGVmdH1pZihrKXtwLnBvc2l0aW9uLmxlZnQ9Zy5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOjAsbGVmdDpufSkubGVmdC1nLm1hcmdpbnMubGVmdH19dmFyIGg9KGN8fHp8fGp8fGspO2lmKHEuc25hcE1vZGUhPSJvdXRlciIpe3ZhciBjPU1hdGguYWJzKG0tZik8PXk7dmFyIHo9TWF0aC5hYnMoQS1lKTw9eTt2YXIgaj1NYXRoLmFicyhzLXgpPD15O3ZhciBrPU1hdGguYWJzKG4tdyk8PXk7aWYoYyl7cC5wb3NpdGlvbi50b3A9Zy5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOm0sbGVmdDowfSkudG9wLWcubWFyZ2lucy50b3B9aWYoeil7cC5wb3NpdGlvbi50b3A9Zy5fY29udmVydFBvc2l0aW9uVG8oInJlbGF0aXZlIix7dG9wOkEtZy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQsbGVmdDowfSkudG9wLWcubWFyZ2lucy50b3B9aWYoail7cC5wb3NpdGlvbi5sZWZ0PWcuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6c30pLmxlZnQtZy5tYXJnaW5zLmxlZnR9aWYoayl7cC5wb3NpdGlvbi5sZWZ0PWcuX2NvbnZlcnRQb3NpdGlvblRvKCJyZWxhdGl2ZSIse3RvcDowLGxlZnQ6bi1nLmhlbHBlclByb3BvcnRpb25zLndpZHRofSkubGVmdC1nLm1hcmdpbnMubGVmdH19aWYoIWcuc25hcEVsZW1lbnRzW3ZdLnNuYXBwaW5nJiYoY3x8enx8anx8a3x8aCkpeyhnLm9wdGlvbnMuc25hcC5zbmFwJiZnLm9wdGlvbnMuc25hcC5zbmFwLmNhbGwoZy5lbGVtZW50LHUsYS5leHRlbmQoZy5fdWlIYXNoKCkse3NuYXBJdGVtOmcuc25hcEVsZW1lbnRzW3ZdLml0ZW19KSkpfWcuc25hcEVsZW1lbnRzW3ZdLnNuYXBwaW5nPShjfHx6fHxqfHxrfHxoKX19fSk7YS51aS5wbHVnaW4uYWRkKCJkcmFnZ2FibGUiLCJzdGFjayIse3N0YXJ0OmZ1bmN0aW9uKGIsYyl7dmFyIGU9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKS5vcHRpb25zO3ZhciBkPWEubWFrZUFycmF5KGEoZS5zdGFjay5ncm91cCkpLnNvcnQoZnVuY3Rpb24oZyxmKXtyZXR1cm4ocGFyc2VJbnQoYShnKS5jc3MoInpJbmRleCIpLDEwKXx8ZS5zdGFjay5taW4pLShwYXJzZUludChhKGYpLmNzcygiekluZGV4IiksMTApfHxlLnN0YWNrLm1pbil9KTthKGQpLmVhY2goZnVuY3Rpb24oZil7dGhpcy5zdHlsZS56SW5kZXg9ZS5zdGFjay5taW4rZn0pO3RoaXNbMF0uc3R5bGUuekluZGV4PWUuc3RhY2subWluK2QubGVuZ3RofX0pO2EudWkucGx1Z2luLmFkZCgiZHJhZ2dhYmxlIiwiekluZGV4Iix7c3RhcnQ6ZnVuY3Rpb24oYyxkKXt2YXIgYj1hKGQuaGVscGVyKSxlPWEodGhpcykuZGF0YSgiZHJhZ2dhYmxlIikub3B0aW9ucztpZihiLmNzcygiekluZGV4Iikpe2UuX3pJbmRleD1iLmNzcygiekluZGV4Iil9Yi5jc3MoInpJbmRleCIsZS56SW5kZXgpfSxzdG9wOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9YSh0aGlzKS5kYXRhKCJkcmFnZ2FibGUiKS5vcHRpb25zO2lmKGQuX3pJbmRleCl7YShjLmhlbHBlcikuY3NzKCJ6SW5kZXgiLGQuX3pJbmRleCl9fX0pfSkoalF1ZXJ5KTs7LyoKICogalF1ZXJ5IFVJIERyb3BwYWJsZSAxLjcuMgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDkgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KQogKiBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL0Ryb3BwYWJsZXMKICoKICogRGVwZW5kczoKICoJdWkuY29yZS5qcwogKgl1aS5kcmFnZ2FibGUuanMKICovCihmdW5jdGlvbihhKXthLndpZGdldCgidWkuZHJvcHBhYmxlIix7X2luaXQ6ZnVuY3Rpb24oKXt2YXIgYz10aGlzLm9wdGlvbnMsYj1jLmFjY2VwdDt0aGlzLmlzb3Zlcj0wO3RoaXMuaXNvdXQ9MTt0aGlzLm9wdGlvbnMuYWNjZXB0PXRoaXMub3B0aW9ucy5hY2NlcHQmJmEuaXNGdW5jdGlvbih0aGlzLm9wdGlvbnMuYWNjZXB0KT90aGlzLm9wdGlvbnMuYWNjZXB0OmZ1bmN0aW9uKGUpe3JldHVybiBlLmlzKGIpfTt0aGlzLnByb3BvcnRpb25zPXt3aWR0aDp0aGlzLmVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsaGVpZ2h0OnRoaXMuZWxlbWVudFswXS5vZmZzZXRIZWlnaHR9O2EudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdGhpcy5vcHRpb25zLnNjb3BlXT1hLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3RoaXMub3B0aW9ucy5zY29wZV18fFtdO2EudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbdGhpcy5vcHRpb25zLnNjb3BlXS5wdXNoKHRoaXMpOyh0aGlzLm9wdGlvbnMuYWRkQ2xhc3NlcyYmdGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1kcm9wcGFibGUiKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYj1hLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW3RoaXMub3B0aW9ucy5zY29wZV07Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspe2lmKGJbY109PXRoaXMpe2Iuc3BsaWNlKGMsMSl9fXRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktZHJvcHBhYmxlIHVpLWRyb3BwYWJsZS1kaXNhYmxlZCIpLnJlbW92ZURhdGEoImRyb3BwYWJsZSIpLnVuYmluZCgiLmRyb3BwYWJsZSIpfSxfc2V0RGF0YTpmdW5jdGlvbihiLGMpe2lmKGI9PSJhY2NlcHQiKXt0aGlzLm9wdGlvbnMuYWNjZXB0PWMmJmEuaXNGdW5jdGlvbihjKT9jOmZ1bmN0aW9uKGUpe3JldHVybiBlLmlzKGMpfX1lbHNle2Eud2lkZ2V0LnByb3RvdHlwZS5fc2V0RGF0YS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSxfYWN0aXZhdGU6ZnVuY3Rpb24oYyl7dmFyIGI9YS51aS5kZG1hbmFnZXIuY3VycmVudDtpZih0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3Mpe3RoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpfShiJiZ0aGlzLl90cmlnZ2VyKCJhY3RpdmF0ZSIsYyx0aGlzLnVpKGIpKSl9LF9kZWFjdGl2YXRlOmZ1bmN0aW9uKGMpe3ZhciBiPWEudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7aWYodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKX0oYiYmdGhpcy5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsYyx0aGlzLnVpKGIpKSl9LF9vdmVyOmZ1bmN0aW9uKGMpe3ZhciBiPWEudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7aWYoIWJ8fChiLmN1cnJlbnRJdGVtfHxiLmVsZW1lbnQpWzBdPT10aGlzLmVsZW1lbnRbMF0pe3JldHVybn1pZih0aGlzLm9wdGlvbnMuYWNjZXB0LmNhbGwodGhpcy5lbGVtZW50WzBdLChiLmN1cnJlbnRJdGVtfHxiLmVsZW1lbnQpKSl7aWYodGhpcy5vcHRpb25zLmhvdmVyQ2xhc3Mpe3RoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyl9dGhpcy5fdHJpZ2dlcigib3ZlciIsYyx0aGlzLnVpKGIpKX19LF9vdXQ6ZnVuY3Rpb24oYyl7dmFyIGI9YS51aS5kZG1hbmFnZXIuY3VycmVudDtpZighYnx8KGIuY3VycmVudEl0ZW18fGIuZWxlbWVudClbMF09PXRoaXMuZWxlbWVudFswXSl7cmV0dXJufWlmKHRoaXMub3B0aW9ucy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sKGIuY3VycmVudEl0ZW18fGIuZWxlbWVudCkpKXtpZih0aGlzLm9wdGlvbnMuaG92ZXJDbGFzcyl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKX10aGlzLl90cmlnZ2VyKCJvdXQiLGMsdGhpcy51aShiKSl9fSxfZHJvcDpmdW5jdGlvbihjLGQpe3ZhciBiPWR8fGEudWkuZGRtYW5hZ2VyLmN1cnJlbnQ7aWYoIWJ8fChiLmN1cnJlbnRJdGVtfHxiLmVsZW1lbnQpWzBdPT10aGlzLmVsZW1lbnRbMF0pe3JldHVybiBmYWxzZX12YXIgZT1mYWxzZTt0aGlzLmVsZW1lbnQuZmluZCgiOmRhdGEoZHJvcHBhYmxlKSIpLm5vdCgiLnVpLWRyYWdnYWJsZS1kcmFnZ2luZyIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZj1hLmRhdGEodGhpcywiZHJvcHBhYmxlIik7aWYoZi5vcHRpb25zLmdyZWVkeSYmYS51aS5pbnRlcnNlY3QoYixhLmV4dGVuZChmLHtvZmZzZXQ6Zi5lbGVtZW50Lm9mZnNldCgpfSksZi5vcHRpb25zLnRvbGVyYW5jZSkpe2U9dHJ1ZTtyZXR1cm4gZmFsc2V9fSk7aWYoZSl7cmV0dXJuIGZhbHNlfWlmKHRoaXMub3B0aW9ucy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sKGIuY3VycmVudEl0ZW18fGIuZWxlbWVudCkpKXtpZih0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3Mpe3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpfWlmKHRoaXMub3B0aW9ucy5ob3ZlckNsYXNzKXt0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmhvdmVyQ2xhc3MpfXRoaXMuX3RyaWdnZXIoImRyb3AiLGMsdGhpcy51aShiKSk7cmV0dXJuIHRoaXMuZWxlbWVudH1yZXR1cm4gZmFsc2V9LHVpOmZ1bmN0aW9uKGIpe3JldHVybntkcmFnZ2FibGU6KGIuY3VycmVudEl0ZW18fGIuZWxlbWVudCksaGVscGVyOmIuaGVscGVyLHBvc2l0aW9uOmIucG9zaXRpb24sYWJzb2x1dGVQb3NpdGlvbjpiLnBvc2l0aW9uQWJzLG9mZnNldDpiLnBvc2l0aW9uQWJzfX19KTthLmV4dGVuZChhLnVpLmRyb3BwYWJsZSx7dmVyc2lvbjoiMS43LjIiLGV2ZW50UHJlZml4OiJkcm9wIixkZWZhdWx0czp7YWNjZXB0OiIqIixhY3RpdmVDbGFzczpmYWxzZSxhZGRDbGFzc2VzOnRydWUsZ3JlZWR5OmZhbHNlLGhvdmVyQ2xhc3M6ZmFsc2Usc2NvcGU6ImRlZmF1bHQiLHRvbGVyYW5jZToiaW50ZXJzZWN0In19KTthLnVpLmludGVyc2VjdD1mdW5jdGlvbihxLGosbyl7aWYoIWoub2Zmc2V0KXtyZXR1cm4gZmFsc2V9dmFyIGU9KHEucG9zaXRpb25BYnN8fHEucG9zaXRpb24uYWJzb2x1dGUpLmxlZnQsZD1lK3EuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsbj0ocS5wb3NpdGlvbkFic3x8cS5wb3NpdGlvbi5hYnNvbHV0ZSkudG9wLG09bitxLmhlbHBlclByb3BvcnRpb25zLmhlaWdodDt2YXIgZz1qLm9mZnNldC5sZWZ0LGM9ZytqLnByb3BvcnRpb25zLndpZHRoLHA9ai5vZmZzZXQudG9wLGs9cCtqLnByb3BvcnRpb25zLmhlaWdodDtzd2l0Y2gobyl7Y2FzZSJmaXQiOnJldHVybihnPGUmJmQ8YyYmcDxuJiZtPGspO2JyZWFrO2Nhc2UiaW50ZXJzZWN0IjpyZXR1cm4oZzxlKyhxLmhlbHBlclByb3BvcnRpb25zLndpZHRoLzIpJiZkLShxLmhlbHBlclByb3BvcnRpb25zLndpZHRoLzIpPGMmJnA8bisocS5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQvMikmJm0tKHEuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzIpPGspO2JyZWFrO2Nhc2UicG9pbnRlciI6dmFyIGg9KChxLnBvc2l0aW9uQWJzfHxxLnBvc2l0aW9uLmFic29sdXRlKS5sZWZ0KyhxLmNsaWNrT2Zmc2V0fHxxLm9mZnNldC5jbGljaykubGVmdCksaT0oKHEucG9zaXRpb25BYnN8fHEucG9zaXRpb24uYWJzb2x1dGUpLnRvcCsocS5jbGlja09mZnNldHx8cS5vZmZzZXQuY2xpY2spLnRvcCksZj1hLnVpLmlzT3ZlcihpLGgscCxnLGoucHJvcG9ydGlvbnMuaGVpZ2h0LGoucHJvcG9ydGlvbnMud2lkdGgpO3JldHVybiBmO2JyZWFrO2Nhc2UidG91Y2giOnJldHVybigobj49cCYmbjw9ayl8fChtPj1wJiZtPD1rKXx8KG48cCYmbT5rKSkmJigoZT49ZyYmZTw9Yyl8fChkPj1nJiZkPD1jKXx8KGU8ZyYmZD5jKSk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gZmFsc2U7YnJlYWt9fTthLnVpLmRkbWFuYWdlcj17Y3VycmVudDpudWxsLGRyb3BwYWJsZXM6eyJkZWZhdWx0IjpbXX0scHJlcGFyZU9mZnNldHM6ZnVuY3Rpb24oZSxnKXt2YXIgYj1hLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW2Uub3B0aW9ucy5zY29wZV07dmFyIGY9Zz9nLnR5cGU6bnVsbDt2YXIgaD0oZS5jdXJyZW50SXRlbXx8ZS5lbGVtZW50KS5maW5kKCI6ZGF0YShkcm9wcGFibGUpIikuYW5kU2VsZigpO2Ryb3BwYWJsZXNMb29wOmZvcih2YXIgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXtpZihiW2RdLm9wdGlvbnMuZGlzYWJsZWR8fChlJiYhYltkXS5vcHRpb25zLmFjY2VwdC5jYWxsKGJbZF0uZWxlbWVudFswXSwoZS5jdXJyZW50SXRlbXx8ZS5lbGVtZW50KSkpKXtjb250aW51ZX1mb3IodmFyIGM9MDtjPGgubGVuZ3RoO2MrKyl7aWYoaFtjXT09YltkXS5lbGVtZW50WzBdKXtiW2RdLnByb3BvcnRpb25zLmhlaWdodD0wO2NvbnRpbnVlIGRyb3BwYWJsZXNMb29wfX1iW2RdLnZpc2libGU9YltkXS5lbGVtZW50LmNzcygiZGlzcGxheSIpIT0ibm9uZSI7aWYoIWJbZF0udmlzaWJsZSl7Y29udGludWV9YltkXS5vZmZzZXQ9YltkXS5lbGVtZW50Lm9mZnNldCgpO2JbZF0ucHJvcG9ydGlvbnM9e3dpZHRoOmJbZF0uZWxlbWVudFswXS5vZmZzZXRXaWR0aCxoZWlnaHQ6YltkXS5lbGVtZW50WzBdLm9mZnNldEhlaWdodH07aWYoZj09Im1vdXNlZG93biIpe2JbZF0uX2FjdGl2YXRlLmNhbGwoYltkXSxnKX19fSxkcm9wOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9ZmFsc2U7YS5lYWNoKGEudWkuZGRtYW5hZ2VyLmRyb3BwYWJsZXNbYi5vcHRpb25zLnNjb3BlXSxmdW5jdGlvbigpe2lmKCF0aGlzLm9wdGlvbnMpe3JldHVybn1pZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLnZpc2libGUmJmEudWkuaW50ZXJzZWN0KGIsdGhpcyx0aGlzLm9wdGlvbnMudG9sZXJhbmNlKSl7ZD10aGlzLl9kcm9wLmNhbGwodGhpcyxjKX1pZighdGhpcy5vcHRpb25zLmRpc2FibGVkJiZ0aGlzLnZpc2libGUmJnRoaXMub3B0aW9ucy5hY2NlcHQuY2FsbCh0aGlzLmVsZW1lbnRbMF0sKGIuY3VycmVudEl0ZW18fGIuZWxlbWVudCkpKXt0aGlzLmlzb3V0PTE7dGhpcy5pc292ZXI9MDt0aGlzLl9kZWFjdGl2YXRlLmNhbGwodGhpcyxjKX19KTtyZXR1cm4gZH0sZHJhZzpmdW5jdGlvbihiLGMpe2lmKGIub3B0aW9ucy5yZWZyZXNoUG9zaXRpb25zKXthLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyhiLGMpfWEuZWFjaChhLnVpLmRkbWFuYWdlci5kcm9wcGFibGVzW2Iub3B0aW9ucy5zY29wZV0sZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuZGlzYWJsZWR8fHRoaXMuZ3JlZWR5Q2hpbGR8fCF0aGlzLnZpc2libGUpe3JldHVybn12YXIgZT1hLnVpLmludGVyc2VjdChiLHRoaXMsdGhpcy5vcHRpb25zLnRvbGVyYW5jZSk7dmFyIGc9IWUmJnRoaXMuaXNvdmVyPT0xPyJpc291dCI6KGUmJnRoaXMuaXNvdmVyPT0wPyJpc292ZXIiOm51bGwpO2lmKCFnKXtyZXR1cm59dmFyIGY7aWYodGhpcy5vcHRpb25zLmdyZWVkeSl7dmFyIGQ9dGhpcy5lbGVtZW50LnBhcmVudHMoIjpkYXRhKGRyb3BwYWJsZSk6ZXEoMCkiKTtpZihkLmxlbmd0aCl7Zj1hLmRhdGEoZFswXSwiZHJvcHBhYmxlIik7Zi5ncmVlZHlDaGlsZD0oZz09Imlzb3ZlciI/MTowKX19aWYoZiYmZz09Imlzb3ZlciIpe2YuaXNvdmVyPTA7Zi5pc291dD0xO2YuX291dC5jYWxsKGYsYyl9dGhpc1tnXT0xO3RoaXNbZz09Imlzb3V0Ij8iaXNvdmVyIjoiaXNvdXQiXT0wO3RoaXNbZz09Imlzb3ZlciI/Il9vdmVyIjoiX291dCJdLmNhbGwodGhpcyxjKTtpZihmJiZnPT0iaXNvdXQiKXtmLmlzb3V0PTA7Zi5pc292ZXI9MTtmLl9vdmVyLmNhbGwoZixjKX19KX19fSkoalF1ZXJ5KTs7LyoKICogalF1ZXJ5IFVJIFJlc2l6YWJsZSAxLjcuMgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDkgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KQogKiBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL1Jlc2l6YWJsZXMKICoKICogRGVwZW5kczoKICoJdWkuY29yZS5qcwogKi8KKGZ1bmN0aW9uKGMpe2Mud2lkZ2V0KCJ1aS5yZXNpemFibGUiLGMuZXh0ZW5kKHt9LGMudWkubW91c2Use19pbml0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxqPXRoaXMub3B0aW9uczt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXJlc2l6YWJsZSIpO2MuZXh0ZW5kKHRoaXMse19hc3BlY3RSYXRpbzohIShqLmFzcGVjdFJhdGlvKSxhc3BlY3RSYXRpbzpqLmFzcGVjdFJhdGlvLG9yaWdpbmFsRWxlbWVudDp0aGlzLmVsZW1lbnQsX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHM6W10sX2hlbHBlcjpqLmhlbHBlcnx8ai5naG9zdHx8ai5hbmltYXRlP2ouaGVscGVyfHwidWktcmVzaXphYmxlLWhlbHBlciI6bnVsbH0pO2lmKHRoaXMuZWxlbWVudFswXS5ub2RlTmFtZS5tYXRjaCgvY2FudmFzfHRleHRhcmVhfGlucHV0fHNlbGVjdHxidXR0b258aW1nL2kpKXtpZigvcmVsYXRpdmUvLnRlc3QodGhpcy5lbGVtZW50LmNzcygicG9zaXRpb24iKSkmJmMuYnJvd3Nlci5vcGVyYSl7dGhpcy5lbGVtZW50LmNzcyh7cG9zaXRpb246InJlbGF0aXZlIix0b3A6ImF1dG8iLGxlZnQ6ImF1dG8ifSl9dGhpcy5lbGVtZW50LndyYXAoYygnPGRpdiBjbGFzcz0idWktd3JhcHBlciIgc3R5bGU9Im92ZXJmbG93OiBoaWRkZW47Ij48L2Rpdj4nKS5jc3Moe3Bvc2l0aW9uOnRoaXMuZWxlbWVudC5jc3MoInBvc2l0aW9uIiksd2lkdGg6dGhpcy5lbGVtZW50Lm91dGVyV2lkdGgoKSxoZWlnaHQ6dGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCksdG9wOnRoaXMuZWxlbWVudC5jc3MoInRvcCIpLGxlZnQ6dGhpcy5lbGVtZW50LmNzcygibGVmdCIpfSkpO3RoaXMuZWxlbWVudD10aGlzLmVsZW1lbnQucGFyZW50KCkuZGF0YSgicmVzaXphYmxlIix0aGlzLmVsZW1lbnQuZGF0YSgicmVzaXphYmxlIikpO3RoaXMuZWxlbWVudElzV3JhcHBlcj10cnVlO3RoaXMuZWxlbWVudC5jc3Moe21hcmdpbkxlZnQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5MZWZ0IiksbWFyZ2luVG9wOnRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygibWFyZ2luVG9wIiksbWFyZ2luUmlnaHQ6dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW5SaWdodCIpLG1hcmdpbkJvdHRvbTp0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoIm1hcmdpbkJvdHRvbSIpfSk7dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHttYXJnaW5MZWZ0OjAsbWFyZ2luVG9wOjAsbWFyZ2luUmlnaHQ6MCxtYXJnaW5Cb3R0b206MH0pO3RoaXMub3JpZ2luYWxSZXNpemVTdHlsZT10aGlzLm9yaWdpbmFsRWxlbWVudC5jc3MoInJlc2l6ZSIpO3RoaXMub3JpZ2luYWxFbGVtZW50LmNzcygicmVzaXplIiwibm9uZSIpO3RoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplRWxlbWVudHMucHVzaCh0aGlzLm9yaWdpbmFsRWxlbWVudC5jc3Moe3Bvc2l0aW9uOiJzdGF0aWMiLHpvb206MSxkaXNwbGF5OiJibG9jayJ9KSk7dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHttYXJnaW46dGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKCJtYXJnaW4iKX0pO3RoaXMuX3Byb3BvcnRpb25hbGx5UmVzaXplKCl9dGhpcy5oYW5kbGVzPWouaGFuZGxlc3x8KCFjKCIudWktcmVzaXphYmxlLWhhbmRsZSIsdGhpcy5lbGVtZW50KS5sZW5ndGg/ImUscyxzZSI6e246Ii51aS1yZXNpemFibGUtbiIsZToiLnVpLXJlc2l6YWJsZS1lIixzOiIudWktcmVzaXphYmxlLXMiLHc6Ii51aS1yZXNpemFibGUtdyIsc2U6Ii51aS1yZXNpemFibGUtc2UiLHN3OiIudWktcmVzaXphYmxlLXN3IixuZToiLnVpLXJlc2l6YWJsZS1uZSIsbnc6Ii51aS1yZXNpemFibGUtbncifSk7aWYodGhpcy5oYW5kbGVzLmNvbnN0cnVjdG9yPT1TdHJpbmcpe2lmKHRoaXMuaGFuZGxlcz09ImFsbCIpe3RoaXMuaGFuZGxlcz0ibixlLHMsdyxzZSxzdyxuZSxudyJ9dmFyIGs9dGhpcy5oYW5kbGVzLnNwbGl0KCIsIik7dGhpcy5oYW5kbGVzPXt9O2Zvcih2YXIgZj0wO2Y8ay5sZW5ndGg7ZisrKXt2YXIgaD1jLnRyaW0oa1tmXSksZD0idWktcmVzaXphYmxlLSIraDt2YXIgZz1jKCc8ZGl2IGNsYXNzPSJ1aS1yZXNpemFibGUtaGFuZGxlICcrZCsnIj48L2Rpdj4nKTtpZigvc3d8c2V8bmV8bncvLnRlc3QoaCkpe2cuY3NzKHt6SW5kZXg6KytqLnpJbmRleH0pfWlmKCJzZSI9PWgpe2cuYWRkQ2xhc3MoInVpLWljb24gdWktaWNvbi1ncmlwc21hbGwtZGlhZ29uYWwtc2UiKX10aGlzLmhhbmRsZXNbaF09Ii51aS1yZXNpemFibGUtIitoO3RoaXMuZWxlbWVudC5hcHBlbmQoZyl9fXRoaXMuX3JlbmRlckF4aXM9ZnVuY3Rpb24ocCl7cD1wfHx0aGlzLmVsZW1lbnQ7Zm9yKHZhciBtIGluIHRoaXMuaGFuZGxlcyl7aWYodGhpcy5oYW5kbGVzW21dLmNvbnN0cnVjdG9yPT1TdHJpbmcpe3RoaXMuaGFuZGxlc1ttXT1jKHRoaXMuaGFuZGxlc1ttXSx0aGlzLmVsZW1lbnQpLnNob3coKX1pZih0aGlzLmVsZW1lbnRJc1dyYXBwZXImJnRoaXMub3JpZ2luYWxFbGVtZW50WzBdLm5vZGVOYW1lLm1hdGNoKC90ZXh0YXJlYXxpbnB1dHxzZWxlY3R8YnV0dG9uL2kpKXt2YXIgbj1jKHRoaXMuaGFuZGxlc1ttXSx0aGlzLmVsZW1lbnQpLG89MDtvPS9zd3xuZXxud3xzZXxufHMvLnRlc3QobSk/bi5vdXRlckhlaWdodCgpOm4ub3V0ZXJXaWR0aCgpO3ZhciBsPVsicGFkZGluZyIsL25lfG53fG4vLnRlc3QobSk/IlRvcCI6L3NlfHN3fHMvLnRlc3QobSk/IkJvdHRvbSI6L15lJC8udGVzdChtKT8iUmlnaHQiOiJMZWZ0Il0uam9pbigiIik7cC5jc3MobCxvKTt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpfWlmKCFjKHRoaXMuaGFuZGxlc1ttXSkubGVuZ3RoKXtjb250aW51ZX19fTt0aGlzLl9yZW5kZXJBeGlzKHRoaXMuZWxlbWVudCk7dGhpcy5faGFuZGxlcz1jKCIudWktcmVzaXphYmxlLWhhbmRsZSIsdGhpcy5lbGVtZW50KS5kaXNhYmxlU2VsZWN0aW9uKCk7dGhpcy5faGFuZGxlcy5tb3VzZW92ZXIoZnVuY3Rpb24oKXtpZighZS5yZXNpemluZyl7aWYodGhpcy5jbGFzc05hbWUpe3ZhciBpPXRoaXMuY2xhc3NOYW1lLm1hdGNoKC91aS1yZXNpemFibGUtKHNlfHN3fG5lfG53fG58ZXxzfHcpL2kpfWUuYXhpcz1pJiZpWzFdP2lbMV06InNlIn19KTtpZihqLmF1dG9IaWRlKXt0aGlzLl9oYW5kbGVzLmhpZGUoKTtjKHRoaXMuZWxlbWVudCkuYWRkQ2xhc3MoInVpLXJlc2l6YWJsZS1hdXRvaGlkZSIpLmhvdmVyKGZ1bmN0aW9uKCl7Yyh0aGlzKS5yZW1vdmVDbGFzcygidWktcmVzaXphYmxlLWF1dG9oaWRlIik7ZS5faGFuZGxlcy5zaG93KCl9LGZ1bmN0aW9uKCl7aWYoIWUucmVzaXppbmcpe2ModGhpcykuYWRkQ2xhc3MoInVpLXJlc2l6YWJsZS1hdXRvaGlkZSIpO2UuX2hhbmRsZXMuaGlkZSgpfX0pfXRoaXMuX21vdXNlSW5pdCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5fbW91c2VEZXN0cm95KCk7dmFyIGQ9ZnVuY3Rpb24oZil7YyhmKS5yZW1vdmVDbGFzcygidWktcmVzaXphYmxlIHVpLXJlc2l6YWJsZS1kaXNhYmxlZCB1aS1yZXNpemFibGUtcmVzaXppbmciKS5yZW1vdmVEYXRhKCJyZXNpemFibGUiKS51bmJpbmQoIi5yZXNpemFibGUiKS5maW5kKCIudWktcmVzaXphYmxlLWhhbmRsZSIpLnJlbW92ZSgpfTtpZih0aGlzLmVsZW1lbnRJc1dyYXBwZXIpe2QodGhpcy5lbGVtZW50KTt2YXIgZT10aGlzLmVsZW1lbnQ7ZS5wYXJlbnQoKS5hcHBlbmQodGhpcy5vcmlnaW5hbEVsZW1lbnQuY3NzKHtwb3NpdGlvbjplLmNzcygicG9zaXRpb24iKSx3aWR0aDplLm91dGVyV2lkdGgoKSxoZWlnaHQ6ZS5vdXRlckhlaWdodCgpLHRvcDplLmNzcygidG9wIiksbGVmdDplLmNzcygibGVmdCIpfSkpLmVuZCgpLnJlbW92ZSgpfXRoaXMub3JpZ2luYWxFbGVtZW50LmNzcygicmVzaXplIix0aGlzLm9yaWdpbmFsUmVzaXplU3R5bGUpO2QodGhpcy5vcmlnaW5hbEVsZW1lbnQpfSxfbW91c2VDYXB0dXJlOmZ1bmN0aW9uKGUpe3ZhciBmPWZhbHNlO2Zvcih2YXIgZCBpbiB0aGlzLmhhbmRsZXMpe2lmKGModGhpcy5oYW5kbGVzW2RdKVswXT09ZS50YXJnZXQpe2Y9dHJ1ZX19cmV0dXJuIHRoaXMub3B0aW9ucy5kaXNhYmxlZHx8ISFmfSxfbW91c2VTdGFydDpmdW5jdGlvbihmKXt2YXIgaT10aGlzLm9wdGlvbnMsZT10aGlzLmVsZW1lbnQucG9zaXRpb24oKSxkPXRoaXMuZWxlbWVudDt0aGlzLnJlc2l6aW5nPXRydWU7dGhpcy5kb2N1bWVudFNjcm9sbD17dG9wOmMoZG9jdW1lbnQpLnNjcm9sbFRvcCgpLGxlZnQ6Yyhkb2N1bWVudCkuc2Nyb2xsTGVmdCgpfTtpZihkLmlzKCIudWktZHJhZ2dhYmxlIil8fCgvYWJzb2x1dGUvKS50ZXN0KGQuY3NzKCJwb3NpdGlvbiIpKSl7ZC5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdG9wOmUudG9wLGxlZnQ6ZS5sZWZ0fSl9aWYoYy5icm93c2VyLm9wZXJhJiYoL3JlbGF0aXZlLykudGVzdChkLmNzcygicG9zaXRpb24iKSkpe2QuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLHRvcDoiYXV0byIsbGVmdDoiYXV0byJ9KX10aGlzLl9yZW5kZXJQcm94eSgpO3ZhciBqPWIodGhpcy5oZWxwZXIuY3NzKCJsZWZ0IikpLGc9Yih0aGlzLmhlbHBlci5jc3MoInRvcCIpKTtpZihpLmNvbnRhaW5tZW50KXtqKz1jKGkuY29udGFpbm1lbnQpLnNjcm9sbExlZnQoKXx8MDtnKz1jKGkuY29udGFpbm1lbnQpLnNjcm9sbFRvcCgpfHwwfXRoaXMub2Zmc2V0PXRoaXMuaGVscGVyLm9mZnNldCgpO3RoaXMucG9zaXRpb249e2xlZnQ6aix0b3A6Z307dGhpcy5zaXplPXRoaXMuX2hlbHBlcj97d2lkdGg6ZC5vdXRlcldpZHRoKCksaGVpZ2h0OmQub3V0ZXJIZWlnaHQoKX06e3dpZHRoOmQud2lkdGgoKSxoZWlnaHQ6ZC5oZWlnaHQoKX07dGhpcy5vcmlnaW5hbFNpemU9dGhpcy5faGVscGVyP3t3aWR0aDpkLm91dGVyV2lkdGgoKSxoZWlnaHQ6ZC5vdXRlckhlaWdodCgpfTp7d2lkdGg6ZC53aWR0aCgpLGhlaWdodDpkLmhlaWdodCgpfTt0aGlzLm9yaWdpbmFsUG9zaXRpb249e2xlZnQ6aix0b3A6Z307dGhpcy5zaXplRGlmZj17d2lkdGg6ZC5vdXRlcldpZHRoKCktZC53aWR0aCgpLGhlaWdodDpkLm91dGVySGVpZ2h0KCktZC5oZWlnaHQoKX07dGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb249e2xlZnQ6Zi5wYWdlWCx0b3A6Zi5wYWdlWX07dGhpcy5hc3BlY3RSYXRpbz0odHlwZW9mIGkuYXNwZWN0UmF0aW89PSJudW1iZXIiKT9pLmFzcGVjdFJhdGlvOigodGhpcy5vcmlnaW5hbFNpemUud2lkdGgvdGhpcy5vcmlnaW5hbFNpemUuaGVpZ2h0KXx8MSk7dmFyIGg9YygiLnVpLXJlc2l6YWJsZS0iK3RoaXMuYXhpcykuY3NzKCJjdXJzb3IiKTtjKCJib2R5IikuY3NzKCJjdXJzb3IiLGg9PSJhdXRvIj90aGlzLmF4aXMrIi1yZXNpemUiOmgpO2QuYWRkQ2xhc3MoInVpLXJlc2l6YWJsZS1yZXNpemluZyIpO3RoaXMuX3Byb3BhZ2F0ZSgic3RhcnQiLGYpO3JldHVybiB0cnVlfSxfbW91c2VEcmFnOmZ1bmN0aW9uKGQpe3ZhciBnPXRoaXMuaGVscGVyLGY9dGhpcy5vcHRpb25zLGw9e30scD10aGlzLGk9dGhpcy5vcmlnaW5hbE1vdXNlUG9zaXRpb24sbT10aGlzLmF4aXM7dmFyIHE9KGQucGFnZVgtaS5sZWZ0KXx8MCxuPShkLnBhZ2VZLWkudG9wKXx8MDt2YXIgaD10aGlzLl9jaGFuZ2VbbV07aWYoIWgpe3JldHVybiBmYWxzZX12YXIgaz1oLmFwcGx5KHRoaXMsW2QscSxuXSksaj1jLmJyb3dzZXIubXNpZSYmYy5icm93c2VyLnZlcnNpb248NyxlPXRoaXMuc2l6ZURpZmY7aWYodGhpcy5fYXNwZWN0UmF0aW98fGQuc2hpZnRLZXkpe2s9dGhpcy5fdXBkYXRlUmF0aW8oayxkKX1rPXRoaXMuX3Jlc3BlY3RTaXplKGssZCk7dGhpcy5fcHJvcGFnYXRlKCJyZXNpemUiLGQpO2cuY3NzKHt0b3A6dGhpcy5wb3NpdGlvbi50b3ArInB4IixsZWZ0OnRoaXMucG9zaXRpb24ubGVmdCsicHgiLHdpZHRoOnRoaXMuc2l6ZS53aWR0aCsicHgiLGhlaWdodDp0aGlzLnNpemUuaGVpZ2h0KyJweCJ9KTtpZighdGhpcy5faGVscGVyJiZ0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLmxlbmd0aCl7dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemUoKX10aGlzLl91cGRhdGVDYWNoZShrKTt0aGlzLl90cmlnZ2VyKCJyZXNpemUiLGQsdGhpcy51aSgpKTtyZXR1cm4gZmFsc2V9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZyl7dGhpcy5yZXNpemluZz1mYWxzZTt2YXIgaD10aGlzLm9wdGlvbnMsbD10aGlzO2lmKHRoaXMuX2hlbHBlcil7dmFyIGY9dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cyxkPWYubGVuZ3RoJiYoL3RleHRhcmVhL2kpLnRlc3QoZlswXS5ub2RlTmFtZSksZT1kJiZjLnVpLmhhc1Njcm9sbChmWzBdLCJsZWZ0Iik/MDpsLnNpemVEaWZmLmhlaWdodCxqPWQ/MDpsLnNpemVEaWZmLndpZHRoO3ZhciBtPXt3aWR0aDoobC5zaXplLndpZHRoLWopLGhlaWdodDoobC5zaXplLmhlaWdodC1lKX0saT0ocGFyc2VJbnQobC5lbGVtZW50LmNzcygibGVmdCIpLDEwKSsobC5wb3NpdGlvbi5sZWZ0LWwub3JpZ2luYWxQb3NpdGlvbi5sZWZ0KSl8fG51bGwsaz0ocGFyc2VJbnQobC5lbGVtZW50LmNzcygidG9wIiksMTApKyhsLnBvc2l0aW9uLnRvcC1sLm9yaWdpbmFsUG9zaXRpb24udG9wKSl8fG51bGw7aWYoIWguYW5pbWF0ZSl7dGhpcy5lbGVtZW50LmNzcyhjLmV4dGVuZChtLHt0b3A6ayxsZWZ0Oml9KSl9bC5oZWxwZXIuaGVpZ2h0KGwuc2l6ZS5oZWlnaHQpO2wuaGVscGVyLndpZHRoKGwuc2l6ZS53aWR0aCk7aWYodGhpcy5faGVscGVyJiYhaC5hbmltYXRlKXt0aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZSgpfX1jKCJib2R5IikuY3NzKCJjdXJzb3IiLCJhdXRvIik7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1yZXNpemFibGUtcmVzaXppbmciKTt0aGlzLl9wcm9wYWdhdGUoInN0b3AiLGcpO2lmKHRoaXMuX2hlbHBlcil7dGhpcy5oZWxwZXIucmVtb3ZlKCl9cmV0dXJuIGZhbHNlfSxfdXBkYXRlQ2FjaGU6ZnVuY3Rpb24oZCl7dmFyIGU9dGhpcy5vcHRpb25zO3RoaXMub2Zmc2V0PXRoaXMuaGVscGVyLm9mZnNldCgpO2lmKGEoZC5sZWZ0KSl7dGhpcy5wb3NpdGlvbi5sZWZ0PWQubGVmdH1pZihhKGQudG9wKSl7dGhpcy5wb3NpdGlvbi50b3A9ZC50b3B9aWYoYShkLmhlaWdodCkpe3RoaXMuc2l6ZS5oZWlnaHQ9ZC5oZWlnaHR9aWYoYShkLndpZHRoKSl7dGhpcy5zaXplLndpZHRoPWQud2lkdGh9fSxfdXBkYXRlUmF0aW86ZnVuY3Rpb24oZyxmKXt2YXIgaD10aGlzLm9wdGlvbnMsaT10aGlzLnBvc2l0aW9uLGU9dGhpcy5zaXplLGQ9dGhpcy5heGlzO2lmKGcuaGVpZ2h0KXtnLndpZHRoPShlLmhlaWdodCp0aGlzLmFzcGVjdFJhdGlvKX1lbHNle2lmKGcud2lkdGgpe2cuaGVpZ2h0PShlLndpZHRoL3RoaXMuYXNwZWN0UmF0aW8pfX1pZihkPT0ic3ciKXtnLmxlZnQ9aS5sZWZ0KyhlLndpZHRoLWcud2lkdGgpO2cudG9wPW51bGx9aWYoZD09Im53Iil7Zy50b3A9aS50b3ArKGUuaGVpZ2h0LWcuaGVpZ2h0KTtnLmxlZnQ9aS5sZWZ0KyhlLndpZHRoLWcud2lkdGgpfXJldHVybiBnfSxfcmVzcGVjdFNpemU6ZnVuY3Rpb24oayxmKXt2YXIgaT10aGlzLmhlbHBlcixoPXRoaXMub3B0aW9ucyxxPXRoaXMuX2FzcGVjdFJhdGlvfHxmLnNoaWZ0S2V5LHA9dGhpcy5heGlzLHM9YShrLndpZHRoKSYmaC5tYXhXaWR0aCYmKGgubWF4V2lkdGg8ay53aWR0aCksbD1hKGsuaGVpZ2h0KSYmaC5tYXhIZWlnaHQmJihoLm1heEhlaWdodDxrLmhlaWdodCksZz1hKGsud2lkdGgpJiZoLm1pbldpZHRoJiYoaC5taW5XaWR0aD5rLndpZHRoKSxyPWEoay5oZWlnaHQpJiZoLm1pbkhlaWdodCYmKGgubWluSGVpZ2h0PmsuaGVpZ2h0KTtpZihnKXtrLndpZHRoPWgubWluV2lkdGh9aWYocil7ay5oZWlnaHQ9aC5taW5IZWlnaHR9aWYocyl7ay53aWR0aD1oLm1heFdpZHRofWlmKGwpe2suaGVpZ2h0PWgubWF4SGVpZ2h0fXZhciBlPXRoaXMub3JpZ2luYWxQb3NpdGlvbi5sZWZ0K3RoaXMub3JpZ2luYWxTaXplLndpZHRoLG49dGhpcy5wb3NpdGlvbi50b3ArdGhpcy5zaXplLmhlaWdodDt2YXIgaj0vc3d8bnd8dy8udGVzdChwKSxkPS9ud3xuZXxuLy50ZXN0KHApO2lmKGcmJmope2subGVmdD1lLWgubWluV2lkdGh9aWYocyYmail7ay5sZWZ0PWUtaC5tYXhXaWR0aH1pZihyJiZkKXtrLnRvcD1uLWgubWluSGVpZ2h0fWlmKGwmJmQpe2sudG9wPW4taC5tYXhIZWlnaHR9dmFyIG09IWsud2lkdGgmJiFrLmhlaWdodDtpZihtJiYhay5sZWZ0JiZrLnRvcCl7ay50b3A9bnVsbH1lbHNle2lmKG0mJiFrLnRvcCYmay5sZWZ0KXtrLmxlZnQ9bnVsbH19cmV0dXJuIGt9LF9wcm9wb3J0aW9uYWxseVJlc2l6ZTpmdW5jdGlvbigpe3ZhciBqPXRoaXMub3B0aW9ucztpZighdGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGgpe3JldHVybn12YXIgZj10aGlzLmhlbHBlcnx8dGhpcy5lbGVtZW50O2Zvcih2YXIgZT0wO2U8dGhpcy5fcHJvcG9ydGlvbmFsbHlSZXNpemVFbGVtZW50cy5sZW5ndGg7ZSsrKXt2YXIgZz10aGlzLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzW2VdO2lmKCF0aGlzLmJvcmRlckRpZil7dmFyIGQ9W2cuY3NzKCJib3JkZXJUb3BXaWR0aCIpLGcuY3NzKCJib3JkZXJSaWdodFdpZHRoIiksZy5jc3MoImJvcmRlckJvdHRvbVdpZHRoIiksZy5jc3MoImJvcmRlckxlZnRXaWR0aCIpXSxoPVtnLmNzcygicGFkZGluZ1RvcCIpLGcuY3NzKCJwYWRkaW5nUmlnaHQiKSxnLmNzcygicGFkZGluZ0JvdHRvbSIpLGcuY3NzKCJwYWRkaW5nTGVmdCIpXTt0aGlzLmJvcmRlckRpZj1jLm1hcChkLGZ1bmN0aW9uKGssbSl7dmFyIGw9cGFyc2VJbnQoaywxMCl8fDAsbj1wYXJzZUludChoW21dLDEwKXx8MDtyZXR1cm4gbCtufSl9aWYoYy5icm93c2VyLm1zaWUmJiEoIShjKGYpLmlzKCI6aGlkZGVuIil8fGMoZikucGFyZW50cygiOmhpZGRlbiIpLmxlbmd0aCkpKXtjb250aW51ZX1nLmNzcyh7aGVpZ2h0OihmLmhlaWdodCgpLXRoaXMuYm9yZGVyRGlmWzBdLXRoaXMuYm9yZGVyRGlmWzJdKXx8MCx3aWR0aDooZi53aWR0aCgpLXRoaXMuYm9yZGVyRGlmWzFdLXRoaXMuYm9yZGVyRGlmWzNdKXx8MH0pfX0sX3JlbmRlclByb3h5OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5lbGVtZW50LGg9dGhpcy5vcHRpb25zO3RoaXMuZWxlbWVudE9mZnNldD1lLm9mZnNldCgpO2lmKHRoaXMuX2hlbHBlcil7dGhpcy5oZWxwZXI9dGhpcy5oZWxwZXJ8fGMoJzxkaXYgc3R5bGU9Im92ZXJmbG93OmhpZGRlbjsiPjwvZGl2PicpO3ZhciBkPWMuYnJvd3Nlci5tc2llJiZjLmJyb3dzZXIudmVyc2lvbjw3LGY9KGQ/MTowKSxnPShkPzI6LTEpO3RoaXMuaGVscGVyLmFkZENsYXNzKHRoaXMuX2hlbHBlcikuY3NzKHt3aWR0aDp0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpK2csaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpK2cscG9zaXRpb246ImFic29sdXRlIixsZWZ0OnRoaXMuZWxlbWVudE9mZnNldC5sZWZ0LWYrInB4Iix0b3A6dGhpcy5lbGVtZW50T2Zmc2V0LnRvcC1mKyJweCIsekluZGV4OisraC56SW5kZXh9KTt0aGlzLmhlbHBlci5hcHBlbmRUbygiYm9keSIpLmRpc2FibGVTZWxlY3Rpb24oKX1lbHNle3RoaXMuaGVscGVyPXRoaXMuZWxlbWVudH19LF9jaGFuZ2U6e2U6ZnVuY3Rpb24oZixlLGQpe3JldHVybnt3aWR0aDp0aGlzLm9yaWdpbmFsU2l6ZS53aWR0aCtlfX0sdzpmdW5jdGlvbihnLGUsZCl7dmFyIGk9dGhpcy5vcHRpb25zLGY9dGhpcy5vcmlnaW5hbFNpemUsaD10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue2xlZnQ6aC5sZWZ0K2Usd2lkdGg6Zi53aWR0aC1lfX0sbjpmdW5jdGlvbihnLGUsZCl7dmFyIGk9dGhpcy5vcHRpb25zLGY9dGhpcy5vcmlnaW5hbFNpemUsaD10aGlzLm9yaWdpbmFsUG9zaXRpb247cmV0dXJue3RvcDpoLnRvcCtkLGhlaWdodDpmLmhlaWdodC1kfX0sczpmdW5jdGlvbihmLGUsZCl7cmV0dXJue2hlaWdodDp0aGlzLm9yaWdpbmFsU2l6ZS5oZWlnaHQrZH19LHNlOmZ1bmN0aW9uKGYsZSxkKXtyZXR1cm4gYy5leHRlbmQodGhpcy5fY2hhbmdlLnMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS5lLmFwcGx5KHRoaXMsW2YsZSxkXSkpfSxzdzpmdW5jdGlvbihmLGUsZCl7cmV0dXJuIGMuZXh0ZW5kKHRoaXMuX2NoYW5nZS5zLmFwcGx5KHRoaXMsYXJndW1lbnRzKSx0aGlzLl9jaGFuZ2Uudy5hcHBseSh0aGlzLFtmLGUsZF0pKX0sbmU6ZnVuY3Rpb24oZixlLGQpe3JldHVybiBjLmV4dGVuZCh0aGlzLl9jaGFuZ2Uubi5hcHBseSh0aGlzLGFyZ3VtZW50cyksdGhpcy5fY2hhbmdlLmUuYXBwbHkodGhpcyxbZixlLGRdKSl9LG53OmZ1bmN0aW9uKGYsZSxkKXtyZXR1cm4gYy5leHRlbmQodGhpcy5fY2hhbmdlLm4uYXBwbHkodGhpcyxhcmd1bWVudHMpLHRoaXMuX2NoYW5nZS53LmFwcGx5KHRoaXMsW2YsZSxkXSkpfX0sX3Byb3BhZ2F0ZTpmdW5jdGlvbihlLGQpe2MudWkucGx1Z2luLmNhbGwodGhpcyxlLFtkLHRoaXMudWkoKV0pOyhlIT0icmVzaXplIiYmdGhpcy5fdHJpZ2dlcihlLGQsdGhpcy51aSgpKSl9LHBsdWdpbnM6e30sdWk6ZnVuY3Rpb24oKXtyZXR1cm57b3JpZ2luYWxFbGVtZW50OnRoaXMub3JpZ2luYWxFbGVtZW50LGVsZW1lbnQ6dGhpcy5lbGVtZW50LGhlbHBlcjp0aGlzLmhlbHBlcixwb3NpdGlvbjp0aGlzLnBvc2l0aW9uLHNpemU6dGhpcy5zaXplLG9yaWdpbmFsU2l6ZTp0aGlzLm9yaWdpbmFsU2l6ZSxvcmlnaW5hbFBvc2l0aW9uOnRoaXMub3JpZ2luYWxQb3NpdGlvbn19fSkpO2MuZXh0ZW5kKGMudWkucmVzaXphYmxlLHt2ZXJzaW9uOiIxLjcuMiIsZXZlbnRQcmVmaXg6InJlc2l6ZSIsZGVmYXVsdHM6e2Fsc29SZXNpemU6ZmFsc2UsYW5pbWF0ZTpmYWxzZSxhbmltYXRlRHVyYXRpb246InNsb3ciLGFuaW1hdGVFYXNpbmc6InN3aW5nIixhc3BlY3RSYXRpbzpmYWxzZSxhdXRvSGlkZTpmYWxzZSxjYW5jZWw6IjppbnB1dCxvcHRpb24iLGNvbnRhaW5tZW50OmZhbHNlLGRlbGF5OjAsZGlzdGFuY2U6MSxnaG9zdDpmYWxzZSxncmlkOmZhbHNlLGhhbmRsZXM6ImUscyxzZSIsaGVscGVyOmZhbHNlLG1heEhlaWdodDpudWxsLG1heFdpZHRoOm51bGwsbWluSGVpZ2h0OjEwLG1pbldpZHRoOjEwLHpJbmRleDoxMDAwfX0pO2MudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiYWxzb1Jlc2l6ZSIse3N0YXJ0OmZ1bmN0aW9uKGUsZil7dmFyIGQ9Yyh0aGlzKS5kYXRhKCJyZXNpemFibGUiKSxnPWQub3B0aW9ucztfc3RvcmU9ZnVuY3Rpb24oaCl7YyhoKS5lYWNoKGZ1bmN0aW9uKCl7Yyh0aGlzKS5kYXRhKCJyZXNpemFibGUtYWxzb3Jlc2l6ZSIse3dpZHRoOnBhcnNlSW50KGModGhpcykud2lkdGgoKSwxMCksaGVpZ2h0OnBhcnNlSW50KGModGhpcykuaGVpZ2h0KCksMTApLGxlZnQ6cGFyc2VJbnQoYyh0aGlzKS5jc3MoImxlZnQiKSwxMCksdG9wOnBhcnNlSW50KGModGhpcykuY3NzKCJ0b3AiKSwxMCl9KX0pfTtpZih0eXBlb2YoZy5hbHNvUmVzaXplKT09Im9iamVjdCImJiFnLmFsc29SZXNpemUucGFyZW50Tm9kZSl7aWYoZy5hbHNvUmVzaXplLmxlbmd0aCl7Zy5hbHNvUmVzaXplPWcuYWxzb1Jlc2l6ZVswXTtfc3RvcmUoZy5hbHNvUmVzaXplKX1lbHNle2MuZWFjaChnLmFsc29SZXNpemUsZnVuY3Rpb24oaCxpKXtfc3RvcmUoaCl9KX19ZWxzZXtfc3RvcmUoZy5hbHNvUmVzaXplKX19LHJlc2l6ZTpmdW5jdGlvbihmLGgpe3ZhciBlPWModGhpcykuZGF0YSgicmVzaXphYmxlIiksaT1lLm9wdGlvbnMsZz1lLm9yaWdpbmFsU2l6ZSxrPWUub3JpZ2luYWxQb3NpdGlvbjt2YXIgaj17aGVpZ2h0OihlLnNpemUuaGVpZ2h0LWcuaGVpZ2h0KXx8MCx3aWR0aDooZS5zaXplLndpZHRoLWcud2lkdGgpfHwwLHRvcDooZS5wb3NpdGlvbi50b3Atay50b3ApfHwwLGxlZnQ6KGUucG9zaXRpb24ubGVmdC1rLmxlZnQpfHwwfSxkPWZ1bmN0aW9uKGwsbSl7YyhsKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIHA9Yyh0aGlzKSxxPWModGhpcykuZGF0YSgicmVzaXphYmxlLWFsc29yZXNpemUiKSxvPXt9LG49bSYmbS5sZW5ndGg/bTpbIndpZHRoIiwiaGVpZ2h0IiwidG9wIiwibGVmdCJdO2MuZWFjaChufHxbIndpZHRoIiwiaGVpZ2h0IiwidG9wIiwibGVmdCJdLGZ1bmN0aW9uKHIsdCl7dmFyIHM9KHFbdF18fDApKyhqW3RdfHwwKTtpZihzJiZzPj0wKXtvW3RdPXN8fG51bGx9fSk7aWYoL3JlbGF0aXZlLy50ZXN0KHAuY3NzKCJwb3NpdGlvbiIpKSYmYy5icm93c2VyLm9wZXJhKXtlLl9yZXZlcnRUb1JlbGF0aXZlUG9zaXRpb249dHJ1ZTtwLmNzcyh7cG9zaXRpb246ImFic29sdXRlIix0b3A6ImF1dG8iLGxlZnQ6ImF1dG8ifSl9cC5jc3Mobyl9KX07aWYodHlwZW9mKGkuYWxzb1Jlc2l6ZSk9PSJvYmplY3QiJiYhaS5hbHNvUmVzaXplLm5vZGVUeXBlKXtjLmVhY2goaS5hbHNvUmVzaXplLGZ1bmN0aW9uKGwsbSl7ZChsLG0pfSl9ZWxzZXtkKGkuYWxzb1Jlc2l6ZSl9fSxzdG9wOmZ1bmN0aW9uKGUsZil7dmFyIGQ9Yyh0aGlzKS5kYXRhKCJyZXNpemFibGUiKTtpZihkLl9yZXZlcnRUb1JlbGF0aXZlUG9zaXRpb24mJmMuYnJvd3Nlci5vcGVyYSl7ZC5fcmV2ZXJ0VG9SZWxhdGl2ZVBvc2l0aW9uPWZhbHNlO2VsLmNzcyh7cG9zaXRpb246InJlbGF0aXZlIn0pfWModGhpcykucmVtb3ZlRGF0YSgicmVzaXphYmxlLWFsc29yZXNpemUtc3RhcnQiKX19KTtjLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImFuaW1hdGUiLHtzdG9wOmZ1bmN0aW9uKGgsbSl7dmFyIG49Yyh0aGlzKS5kYXRhKCJyZXNpemFibGUiKSxpPW4ub3B0aW9uczt2YXIgZz1uLl9wcm9wb3J0aW9uYWxseVJlc2l6ZUVsZW1lbnRzLGQ9Zy5sZW5ndGgmJigvdGV4dGFyZWEvaSkudGVzdChnWzBdLm5vZGVOYW1lKSxlPWQmJmMudWkuaGFzU2Nyb2xsKGdbMF0sImxlZnQiKT8wOm4uc2l6ZURpZmYuaGVpZ2h0LGs9ZD8wOm4uc2l6ZURpZmYud2lkdGg7dmFyIGY9e3dpZHRoOihuLnNpemUud2lkdGgtayksaGVpZ2h0OihuLnNpemUuaGVpZ2h0LWUpfSxqPShwYXJzZUludChuLmVsZW1lbnQuY3NzKCJsZWZ0IiksMTApKyhuLnBvc2l0aW9uLmxlZnQtbi5vcmlnaW5hbFBvc2l0aW9uLmxlZnQpKXx8bnVsbCxsPShwYXJzZUludChuLmVsZW1lbnQuY3NzKCJ0b3AiKSwxMCkrKG4ucG9zaXRpb24udG9wLW4ub3JpZ2luYWxQb3NpdGlvbi50b3ApKXx8bnVsbDtuLmVsZW1lbnQuYW5pbWF0ZShjLmV4dGVuZChmLGwmJmo/e3RvcDpsLGxlZnQ6an06e30pLHtkdXJhdGlvbjppLmFuaW1hdGVEdXJhdGlvbixlYXNpbmc6aS5hbmltYXRlRWFzaW5nLHN0ZXA6ZnVuY3Rpb24oKXt2YXIgbz17d2lkdGg6cGFyc2VJbnQobi5lbGVtZW50LmNzcygid2lkdGgiKSwxMCksaGVpZ2h0OnBhcnNlSW50KG4uZWxlbWVudC5jc3MoImhlaWdodCIpLDEwKSx0b3A6cGFyc2VJbnQobi5lbGVtZW50LmNzcygidG9wIiksMTApLGxlZnQ6cGFyc2VJbnQobi5lbGVtZW50LmNzcygibGVmdCIpLDEwKX07aWYoZyYmZy5sZW5ndGgpe2MoZ1swXSkuY3NzKHt3aWR0aDpvLndpZHRoLGhlaWdodDpvLmhlaWdodH0pfW4uX3VwZGF0ZUNhY2hlKG8pO24uX3Byb3BhZ2F0ZSgicmVzaXplIixoKX19KX19KTtjLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImNvbnRhaW5tZW50Iix7c3RhcnQ6ZnVuY3Rpb24oZSxxKXt2YXIgcz1jKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGk9cy5vcHRpb25zLGs9cy5lbGVtZW50O3ZhciBmPWkuY29udGFpbm1lbnQsaj0oZiBpbnN0YW5jZW9mIGMpP2YuZ2V0KDApOigvcGFyZW50Ly50ZXN0KGYpKT9rLnBhcmVudCgpLmdldCgwKTpmO2lmKCFqKXtyZXR1cm59cy5jb250YWluZXJFbGVtZW50PWMoaik7aWYoL2RvY3VtZW50Ly50ZXN0KGYpfHxmPT1kb2N1bWVudCl7cy5jb250YWluZXJPZmZzZXQ9e2xlZnQ6MCx0b3A6MH07cy5jb250YWluZXJQb3NpdGlvbj17bGVmdDowLHRvcDowfTtzLnBhcmVudERhdGE9e2VsZW1lbnQ6Yyhkb2N1bWVudCksbGVmdDowLHRvcDowLHdpZHRoOmMoZG9jdW1lbnQpLndpZHRoKCksaGVpZ2h0OmMoZG9jdW1lbnQpLmhlaWdodCgpfHxkb2N1bWVudC5ib2R5LnBhcmVudE5vZGUuc2Nyb2xsSGVpZ2h0fX1lbHNle3ZhciBtPWMoaiksaD1bXTtjKFsiVG9wIiwiUmlnaHQiLCJMZWZ0IiwiQm90dG9tIl0pLmVhY2goZnVuY3Rpb24ocCxvKXtoW3BdPWIobS5jc3MoInBhZGRpbmciK28pKX0pO3MuY29udGFpbmVyT2Zmc2V0PW0ub2Zmc2V0KCk7cy5jb250YWluZXJQb3NpdGlvbj1tLnBvc2l0aW9uKCk7cy5jb250YWluZXJTaXplPXtoZWlnaHQ6KG0uaW5uZXJIZWlnaHQoKS1oWzNdKSx3aWR0aDoobS5pbm5lcldpZHRoKCktaFsxXSl9O3ZhciBuPXMuY29udGFpbmVyT2Zmc2V0LGQ9cy5jb250YWluZXJTaXplLmhlaWdodCxsPXMuY29udGFpbmVyU2l6ZS53aWR0aCxnPShjLnVpLmhhc1Njcm9sbChqLCJsZWZ0Iik/ai5zY3JvbGxXaWR0aDpsKSxyPShjLnVpLmhhc1Njcm9sbChqKT9qLnNjcm9sbEhlaWdodDpkKTtzLnBhcmVudERhdGE9e2VsZW1lbnQ6aixsZWZ0Om4ubGVmdCx0b3A6bi50b3Asd2lkdGg6ZyxoZWlnaHQ6cn19fSxyZXNpemU6ZnVuY3Rpb24oZixwKXt2YXIgcz1jKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGg9cy5vcHRpb25zLGU9cy5jb250YWluZXJTaXplLG49cy5jb250YWluZXJPZmZzZXQsbD1zLnNpemUsbT1zLnBvc2l0aW9uLHE9cy5fYXNwZWN0UmF0aW98fGYuc2hpZnRLZXksZD17dG9wOjAsbGVmdDowfSxnPXMuY29udGFpbmVyRWxlbWVudDtpZihnWzBdIT1kb2N1bWVudCYmKC9zdGF0aWMvKS50ZXN0KGcuY3NzKCJwb3NpdGlvbiIpKSl7ZD1ufWlmKG0ubGVmdDwocy5faGVscGVyP24ubGVmdDowKSl7cy5zaXplLndpZHRoPXMuc2l6ZS53aWR0aCsocy5faGVscGVyPyhzLnBvc2l0aW9uLmxlZnQtbi5sZWZ0KToocy5wb3NpdGlvbi5sZWZ0LWQubGVmdCkpO2lmKHEpe3Muc2l6ZS5oZWlnaHQ9cy5zaXplLndpZHRoL2guYXNwZWN0UmF0aW99cy5wb3NpdGlvbi5sZWZ0PWguaGVscGVyP24ubGVmdDowfWlmKG0udG9wPChzLl9oZWxwZXI/bi50b3A6MCkpe3Muc2l6ZS5oZWlnaHQ9cy5zaXplLmhlaWdodCsocy5faGVscGVyPyhzLnBvc2l0aW9uLnRvcC1uLnRvcCk6cy5wb3NpdGlvbi50b3ApO2lmKHEpe3Muc2l6ZS53aWR0aD1zLnNpemUuaGVpZ2h0KmguYXNwZWN0UmF0aW99cy5wb3NpdGlvbi50b3A9cy5faGVscGVyP24udG9wOjB9cy5vZmZzZXQubGVmdD1zLnBhcmVudERhdGEubGVmdCtzLnBvc2l0aW9uLmxlZnQ7cy5vZmZzZXQudG9wPXMucGFyZW50RGF0YS50b3Arcy5wb3NpdGlvbi50b3A7dmFyIGs9TWF0aC5hYnMoKHMuX2hlbHBlcj9zLm9mZnNldC5sZWZ0LWQubGVmdDoocy5vZmZzZXQubGVmdC1kLmxlZnQpKStzLnNpemVEaWZmLndpZHRoKSxyPU1hdGguYWJzKChzLl9oZWxwZXI/cy5vZmZzZXQudG9wLWQudG9wOihzLm9mZnNldC50b3Atbi50b3ApKStzLnNpemVEaWZmLmhlaWdodCk7dmFyIGo9cy5jb250YWluZXJFbGVtZW50LmdldCgwKT09cy5lbGVtZW50LnBhcmVudCgpLmdldCgwKSxpPS9yZWxhdGl2ZXxhYnNvbHV0ZS8udGVzdChzLmNvbnRhaW5lckVsZW1lbnQuY3NzKCJwb3NpdGlvbiIpKTtpZihqJiZpKXtrLT1zLnBhcmVudERhdGEubGVmdH1pZihrK3Muc2l6ZS53aWR0aD49cy5wYXJlbnREYXRhLndpZHRoKXtzLnNpemUud2lkdGg9cy5wYXJlbnREYXRhLndpZHRoLWs7aWYocSl7cy5zaXplLmhlaWdodD1zLnNpemUud2lkdGgvcy5hc3BlY3RSYXRpb319aWYocitzLnNpemUuaGVpZ2h0Pj1zLnBhcmVudERhdGEuaGVpZ2h0KXtzLnNpemUuaGVpZ2h0PXMucGFyZW50RGF0YS5oZWlnaHQtcjtpZihxKXtzLnNpemUud2lkdGg9cy5zaXplLmhlaWdodCpzLmFzcGVjdFJhdGlvfX19LHN0b3A6ZnVuY3Rpb24oZSxtKXt2YXIgcD1jKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGY9cC5vcHRpb25zLGs9cC5wb3NpdGlvbixsPXAuY29udGFpbmVyT2Zmc2V0LGQ9cC5jb250YWluZXJQb3NpdGlvbixnPXAuY29udGFpbmVyRWxlbWVudDt2YXIgaT1jKHAuaGVscGVyKSxxPWkub2Zmc2V0KCksbj1pLm91dGVyV2lkdGgoKS1wLnNpemVEaWZmLndpZHRoLGo9aS5vdXRlckhlaWdodCgpLXAuc2l6ZURpZmYuaGVpZ2h0O2lmKHAuX2hlbHBlciYmIWYuYW5pbWF0ZSYmKC9yZWxhdGl2ZS8pLnRlc3QoZy5jc3MoInBvc2l0aW9uIikpKXtjKHRoaXMpLmNzcyh7bGVmdDpxLmxlZnQtZC5sZWZ0LWwubGVmdCx3aWR0aDpuLGhlaWdodDpqfSl9aWYocC5faGVscGVyJiYhZi5hbmltYXRlJiYoL3N0YXRpYy8pLnRlc3QoZy5jc3MoInBvc2l0aW9uIikpKXtjKHRoaXMpLmNzcyh7bGVmdDpxLmxlZnQtZC5sZWZ0LWwubGVmdCx3aWR0aDpuLGhlaWdodDpqfSl9fX0pO2MudWkucGx1Z2luLmFkZCgicmVzaXphYmxlIiwiZ2hvc3QiLHtzdGFydDpmdW5jdGlvbihmLGcpe3ZhciBkPWModGhpcykuZGF0YSgicmVzaXphYmxlIiksaD1kLm9wdGlvbnMsZT1kLnNpemU7ZC5naG9zdD1kLm9yaWdpbmFsRWxlbWVudC5jbG9uZSgpO2QuZ2hvc3QuY3NzKHtvcGFjaXR5OjAuMjUsZGlzcGxheToiYmxvY2siLHBvc2l0aW9uOiJyZWxhdGl2ZSIsaGVpZ2h0OmUuaGVpZ2h0LHdpZHRoOmUud2lkdGgsbWFyZ2luOjAsbGVmdDowLHRvcDowfSkuYWRkQ2xhc3MoInVpLXJlc2l6YWJsZS1naG9zdCIpLmFkZENsYXNzKHR5cGVvZiBoLmdob3N0PT0ic3RyaW5nIj9oLmdob3N0OiIiKTtkLmdob3N0LmFwcGVuZFRvKGQuaGVscGVyKX0scmVzaXplOmZ1bmN0aW9uKGUsZil7dmFyIGQ9Yyh0aGlzKS5kYXRhKCJyZXNpemFibGUiKSxnPWQub3B0aW9ucztpZihkLmdob3N0KXtkLmdob3N0LmNzcyh7cG9zaXRpb246InJlbGF0aXZlIixoZWlnaHQ6ZC5zaXplLmhlaWdodCx3aWR0aDpkLnNpemUud2lkdGh9KX19LHN0b3A6ZnVuY3Rpb24oZSxmKXt2YXIgZD1jKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGc9ZC5vcHRpb25zO2lmKGQuZ2hvc3QmJmQuaGVscGVyKXtkLmhlbHBlci5nZXQoMCkucmVtb3ZlQ2hpbGQoZC5naG9zdC5nZXQoMCkpfX19KTtjLnVpLnBsdWdpbi5hZGQoInJlc2l6YWJsZSIsImdyaWQiLHtyZXNpemU6ZnVuY3Rpb24oZCxsKXt2YXIgbj1jKHRoaXMpLmRhdGEoInJlc2l6YWJsZSIpLGc9bi5vcHRpb25zLGo9bi5zaXplLGg9bi5vcmlnaW5hbFNpemUsaT1uLm9yaWdpbmFsUG9zaXRpb24sbT1uLmF4aXMsaz1nLl9hc3BlY3RSYXRpb3x8ZC5zaGlmdEtleTtnLmdyaWQ9dHlwZW9mIGcuZ3JpZD09Im51bWJlciI/W2cuZ3JpZCxnLmdyaWRdOmcuZ3JpZDt2YXIgZj1NYXRoLnJvdW5kKChqLndpZHRoLWgud2lkdGgpLyhnLmdyaWRbMF18fDEpKSooZy5ncmlkWzBdfHwxKSxlPU1hdGgucm91bmQoKGouaGVpZ2h0LWguaGVpZ2h0KS8oZy5ncmlkWzFdfHwxKSkqKGcuZ3JpZFsxXXx8MSk7aWYoL14oc2V8c3xlKSQvLnRlc3QobSkpe24uc2l6ZS53aWR0aD1oLndpZHRoK2Y7bi5zaXplLmhlaWdodD1oLmhlaWdodCtlfWVsc2V7aWYoL14obmUpJC8udGVzdChtKSl7bi5zaXplLndpZHRoPWgud2lkdGgrZjtuLnNpemUuaGVpZ2h0PWguaGVpZ2h0K2U7bi5wb3NpdGlvbi50b3A9aS50b3AtZX1lbHNle2lmKC9eKHN3KSQvLnRlc3QobSkpe24uc2l6ZS53aWR0aD1oLndpZHRoK2Y7bi5zaXplLmhlaWdodD1oLmhlaWdodCtlO24ucG9zaXRpb24ubGVmdD1pLmxlZnQtZn1lbHNle24uc2l6ZS53aWR0aD1oLndpZHRoK2Y7bi5zaXplLmhlaWdodD1oLmhlaWdodCtlO24ucG9zaXRpb24udG9wPWkudG9wLWU7bi5wb3NpdGlvbi5sZWZ0PWkubGVmdC1mfX19fX0pO3ZhciBiPWZ1bmN0aW9uKGQpe3JldHVybiBwYXJzZUludChkLDEwKXx8MH07dmFyIGE9ZnVuY3Rpb24oZCl7cmV0dXJuICFpc05hTihwYXJzZUludChkLDEwKSl9fSkoalF1ZXJ5KTs7LyoKICogalF1ZXJ5IFVJIFNlbGVjdGFibGUgMS43LjIKICoKICogQ29weXJpZ2h0IChjKSAyMDA5IEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkKICogYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICoKICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9TZWxlY3RhYmxlcwogKgogKiBEZXBlbmRzOgogKgl1aS5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLnNlbGVjdGFibGUiLGEuZXh0ZW5kKHt9LGEudWkubW91c2Use19pbml0OmZ1bmN0aW9uKCl7dmFyIGI9dGhpczt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXNlbGVjdGFibGUiKTt0aGlzLmRyYWdnZWQ9ZmFsc2U7dmFyIGM7dGhpcy5yZWZyZXNoPWZ1bmN0aW9uKCl7Yz1hKGIub3B0aW9ucy5maWx0ZXIsYi5lbGVtZW50WzBdKTtjLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpO3ZhciBlPWQub2Zmc2V0KCk7YS5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIse2VsZW1lbnQ6dGhpcywkZWxlbWVudDpkLGxlZnQ6ZS5sZWZ0LHRvcDplLnRvcCxyaWdodDplLmxlZnQrZC5vdXRlcldpZHRoKCksYm90dG9tOmUudG9wK2Qub3V0ZXJIZWlnaHQoKSxzdGFydHNlbGVjdGVkOmZhbHNlLHNlbGVjdGVkOmQuaGFzQ2xhc3MoInVpLXNlbGVjdGVkIiksc2VsZWN0aW5nOmQuaGFzQ2xhc3MoInVpLXNlbGVjdGluZyIpLHVuc2VsZWN0aW5nOmQuaGFzQ2xhc3MoInVpLXVuc2VsZWN0aW5nIil9KX0pfTt0aGlzLnJlZnJlc2goKTt0aGlzLnNlbGVjdGVlcz1jLmFkZENsYXNzKCJ1aS1zZWxlY3RlZSIpO3RoaXMuX21vdXNlSW5pdCgpO3RoaXMuaGVscGVyPWEoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpLmNzcyh7Ym9yZGVyOiIxcHggZG90dGVkIGJsYWNrIn0pLmFkZENsYXNzKCJ1aS1zZWxlY3RhYmxlLWhlbHBlciIpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RhYmxlIHVpLXNlbGVjdGFibGUtZGlzYWJsZWQiKS5yZW1vdmVEYXRhKCJzZWxlY3RhYmxlIikudW5iaW5kKCIuc2VsZWN0YWJsZSIpO3RoaXMuX21vdXNlRGVzdHJveSgpfSxfbW91c2VTdGFydDpmdW5jdGlvbihkKXt2YXIgYj10aGlzO3RoaXMub3Bvcz1bZC5wYWdlWCxkLnBhZ2VZXTtpZih0aGlzLm9wdGlvbnMuZGlzYWJsZWQpe3JldHVybn12YXIgYz10aGlzLm9wdGlvbnM7dGhpcy5zZWxlY3RlZXM9YShjLmZpbHRlcix0aGlzLmVsZW1lbnRbMF0pO3RoaXMuX3RyaWdnZXIoInN0YXJ0IixkKTthKGMuYXBwZW5kVG8pLmFwcGVuZCh0aGlzLmhlbHBlcik7dGhpcy5oZWxwZXIuY3NzKHsiei1pbmRleCI6MTAwLHBvc2l0aW9uOiJhYnNvbHV0ZSIsbGVmdDpkLmNsaWVudFgsdG9wOmQuY2xpZW50WSx3aWR0aDowLGhlaWdodDowfSk7aWYoYy5hdXRvUmVmcmVzaCl7dGhpcy5yZWZyZXNoKCl9dGhpcy5zZWxlY3RlZXMuZmlsdGVyKCIudWktc2VsZWN0ZWQiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9YS5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO2Uuc3RhcnRzZWxlY3RlZD10cnVlO2lmKCFkLm1ldGFLZXkpe2UuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNlbGVjdGVkIik7ZS5zZWxlY3RlZD1mYWxzZTtlLiRlbGVtZW50LmFkZENsYXNzKCJ1aS11bnNlbGVjdGluZyIpO2UudW5zZWxlY3Rpbmc9dHJ1ZTtiLl90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsZCx7dW5zZWxlY3Rpbmc6ZS5lbGVtZW50fSl9fSk7YShkLnRhcmdldCkucGFyZW50cygpLmFuZFNlbGYoKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9YS5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO2lmKGUpe2UuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXVuc2VsZWN0aW5nIikuYWRkQ2xhc3MoInVpLXNlbGVjdGluZyIpO2UudW5zZWxlY3Rpbmc9ZmFsc2U7ZS5zZWxlY3Rpbmc9dHJ1ZTtlLnNlbGVjdGVkPXRydWU7Yi5fdHJpZ2dlcigic2VsZWN0aW5nIixkLHtzZWxlY3Rpbmc6ZS5lbGVtZW50fSk7cmV0dXJuIGZhbHNlfX0pfSxfbW91c2VEcmFnOmZ1bmN0aW9uKGkpe3ZhciBjPXRoaXM7dGhpcy5kcmFnZ2VkPXRydWU7aWYodGhpcy5vcHRpb25zLmRpc2FibGVkKXtyZXR1cm59dmFyIGU9dGhpcy5vcHRpb25zO3ZhciBkPXRoaXMub3Bvc1swXSxoPXRoaXMub3Bvc1sxXSxiPWkucGFnZVgsZz1pLnBhZ2VZO2lmKGQ+Yil7dmFyIGY9YjtiPWQ7ZD1mfWlmKGg+Zyl7dmFyIGY9ZztnPWg7aD1mfXRoaXMuaGVscGVyLmNzcyh7bGVmdDpkLHRvcDpoLHdpZHRoOmItZCxoZWlnaHQ6Zy1ofSk7dGhpcy5zZWxlY3RlZXMuZWFjaChmdW5jdGlvbigpe3ZhciBqPWEuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTtpZighanx8ai5lbGVtZW50PT1jLmVsZW1lbnRbMF0pe3JldHVybn12YXIgaz1mYWxzZTtpZihlLnRvbGVyYW5jZT09InRvdWNoIil7az0oIShqLmxlZnQ+Ynx8ai5yaWdodDxkfHxqLnRvcD5nfHxqLmJvdHRvbTxoKSl9ZWxzZXtpZihlLnRvbGVyYW5jZT09ImZpdCIpe2s9KGoubGVmdD5kJiZqLnJpZ2h0PGImJmoudG9wPmgmJmouYm90dG9tPGcpfX1pZihrKXtpZihqLnNlbGVjdGVkKXtqLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RlZCIpO2ouc2VsZWN0ZWQ9ZmFsc2V9aWYoai51bnNlbGVjdGluZyl7ai4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktdW5zZWxlY3RpbmciKTtqLnVuc2VsZWN0aW5nPWZhbHNlfWlmKCFqLnNlbGVjdGluZyl7ai4kZWxlbWVudC5hZGRDbGFzcygidWktc2VsZWN0aW5nIik7ai5zZWxlY3Rpbmc9dHJ1ZTtjLl90cmlnZ2VyKCJzZWxlY3RpbmciLGkse3NlbGVjdGluZzpqLmVsZW1lbnR9KX19ZWxzZXtpZihqLnNlbGVjdGluZyl7aWYoaS5tZXRhS2V5JiZqLnN0YXJ0c2VsZWN0ZWQpe2ouJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNlbGVjdGluZyIpO2ouc2VsZWN0aW5nPWZhbHNlO2ouJGVsZW1lbnQuYWRkQ2xhc3MoInVpLXNlbGVjdGVkIik7ai5zZWxlY3RlZD10cnVlfWVsc2V7ai4kZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2VsZWN0aW5nIik7ai5zZWxlY3Rpbmc9ZmFsc2U7aWYoai5zdGFydHNlbGVjdGVkKXtqLiRlbGVtZW50LmFkZENsYXNzKCJ1aS11bnNlbGVjdGluZyIpO2oudW5zZWxlY3Rpbmc9dHJ1ZX1jLl90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsaSx7dW5zZWxlY3Rpbmc6ai5lbGVtZW50fSl9fWlmKGouc2VsZWN0ZWQpe2lmKCFpLm1ldGFLZXkmJiFqLnN0YXJ0c2VsZWN0ZWQpe2ouJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXNlbGVjdGVkIik7ai5zZWxlY3RlZD1mYWxzZTtqLiRlbGVtZW50LmFkZENsYXNzKCJ1aS11bnNlbGVjdGluZyIpO2oudW5zZWxlY3Rpbmc9dHJ1ZTtjLl90cmlnZ2VyKCJ1bnNlbGVjdGluZyIsaSx7dW5zZWxlY3Rpbmc6ai5lbGVtZW50fSl9fX19KTtyZXR1cm4gZmFsc2V9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpczt0aGlzLmRyYWdnZWQ9ZmFsc2U7dmFyIGM9dGhpcy5vcHRpb25zO2EoIi51aS11bnNlbGVjdGluZyIsdGhpcy5lbGVtZW50WzBdKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9YS5kYXRhKHRoaXMsInNlbGVjdGFibGUtaXRlbSIpO2UuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoInVpLXVuc2VsZWN0aW5nIik7ZS51bnNlbGVjdGluZz1mYWxzZTtlLnN0YXJ0c2VsZWN0ZWQ9ZmFsc2U7Yi5fdHJpZ2dlcigidW5zZWxlY3RlZCIsZCx7dW5zZWxlY3RlZDplLmVsZW1lbnR9KX0pO2EoIi51aS1zZWxlY3RpbmciLHRoaXMuZWxlbWVudFswXSkuZWFjaChmdW5jdGlvbigpe3ZhciBlPWEuZGF0YSh0aGlzLCJzZWxlY3RhYmxlLWl0ZW0iKTtlLiRlbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zZWxlY3RpbmciKS5hZGRDbGFzcygidWktc2VsZWN0ZWQiKTtlLnNlbGVjdGluZz1mYWxzZTtlLnNlbGVjdGVkPXRydWU7ZS5zdGFydHNlbGVjdGVkPXRydWU7Yi5fdHJpZ2dlcigic2VsZWN0ZWQiLGQse3NlbGVjdGVkOmUuZWxlbWVudH0pfSk7dGhpcy5fdHJpZ2dlcigic3RvcCIsZCk7dGhpcy5oZWxwZXIucmVtb3ZlKCk7cmV0dXJuIGZhbHNlfX0pKTthLmV4dGVuZChhLnVpLnNlbGVjdGFibGUse3ZlcnNpb246IjEuNy4yIixkZWZhdWx0czp7YXBwZW5kVG86ImJvZHkiLGF1dG9SZWZyZXNoOnRydWUsY2FuY2VsOiI6aW5wdXQsb3B0aW9uIixkZWxheTowLGRpc3RhbmNlOjAsZmlsdGVyOiIqIix0b2xlcmFuY2U6InRvdWNoIn19KX0pKGpRdWVyeSk7Oy8qCiAqIGpRdWVyeSBVSSBTb3J0YWJsZSAxLjcuMgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDkgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KQogKiBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL1NvcnRhYmxlcwogKgogKiBEZXBlbmRzOgogKgl1aS5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLnNvcnRhYmxlIixhLmV4dGVuZCh7fSxhLnVpLm1vdXNlLHtfaW5pdDpmdW5jdGlvbigpe3ZhciBiPXRoaXMub3B0aW9uczt0aGlzLmNvbnRhaW5lckNhY2hlPXt9O3RoaXMuZWxlbWVudC5hZGRDbGFzcygidWktc29ydGFibGUiKTt0aGlzLnJlZnJlc2goKTt0aGlzLmZsb2F0aW5nPXRoaXMuaXRlbXMubGVuZ3RoPygvbGVmdHxyaWdodC8pLnRlc3QodGhpcy5pdGVtc1swXS5pdGVtLmNzcygiZmxvYXQiKSk6ZmFsc2U7dGhpcy5vZmZzZXQ9dGhpcy5lbGVtZW50Lm9mZnNldCgpO3RoaXMuX21vdXNlSW5pdCgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1zb3J0YWJsZSB1aS1zb3J0YWJsZS1kaXNhYmxlZCIpLnJlbW92ZURhdGEoInNvcnRhYmxlIikudW5iaW5kKCIuc29ydGFibGUiKTt0aGlzLl9tb3VzZURlc3Ryb3koKTtmb3IodmFyIGI9dGhpcy5pdGVtcy5sZW5ndGgtMTtiPj0wO2ItLSl7dGhpcy5pdGVtc1tiXS5pdGVtLnJlbW92ZURhdGEoInNvcnRhYmxlLWl0ZW0iKX19LF9tb3VzZUNhcHR1cmU6ZnVuY3Rpb24oZSxmKXtpZih0aGlzLnJldmVydGluZyl7cmV0dXJuIGZhbHNlfWlmKHRoaXMub3B0aW9ucy5kaXNhYmxlZHx8dGhpcy5vcHRpb25zLnR5cGU9PSJzdGF0aWMiKXtyZXR1cm4gZmFsc2V9dGhpcy5fcmVmcmVzaEl0ZW1zKGUpO3ZhciBkPW51bGwsYz10aGlzLGI9YShlLnRhcmdldCkucGFyZW50cygpLmVhY2goZnVuY3Rpb24oKXtpZihhLmRhdGEodGhpcywic29ydGFibGUtaXRlbSIpPT1jKXtkPWEodGhpcyk7cmV0dXJuIGZhbHNlfX0pO2lmKGEuZGF0YShlLnRhcmdldCwic29ydGFibGUtaXRlbSIpPT1jKXtkPWEoZS50YXJnZXQpfWlmKCFkKXtyZXR1cm4gZmFsc2V9aWYodGhpcy5vcHRpb25zLmhhbmRsZSYmIWYpe3ZhciBnPWZhbHNlO2EodGhpcy5vcHRpb25zLmhhbmRsZSxkKS5maW5kKCIqIikuYW5kU2VsZigpLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzPT1lLnRhcmdldCl7Zz10cnVlfX0pO2lmKCFnKXtyZXR1cm4gZmFsc2V9fXRoaXMuY3VycmVudEl0ZW09ZDt0aGlzLl9yZW1vdmVDdXJyZW50c0Zyb21JdGVtcygpO3JldHVybiB0cnVlfSxfbW91c2VTdGFydDpmdW5jdGlvbihlLGYsYil7dmFyIGc9dGhpcy5vcHRpb25zLGM9dGhpczt0aGlzLmN1cnJlbnRDb250YWluZXI9dGhpczt0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKTt0aGlzLmhlbHBlcj10aGlzLl9jcmVhdGVIZWxwZXIoZSk7dGhpcy5fY2FjaGVIZWxwZXJQcm9wb3J0aW9ucygpO3RoaXMuX2NhY2hlTWFyZ2lucygpO3RoaXMuc2Nyb2xsUGFyZW50PXRoaXMuaGVscGVyLnNjcm9sbFBhcmVudCgpO3RoaXMub2Zmc2V0PXRoaXMuY3VycmVudEl0ZW0ub2Zmc2V0KCk7dGhpcy5vZmZzZXQ9e3RvcDp0aGlzLm9mZnNldC50b3AtdGhpcy5tYXJnaW5zLnRvcCxsZWZ0OnRoaXMub2Zmc2V0LmxlZnQtdGhpcy5tYXJnaW5zLmxlZnR9O3RoaXMuaGVscGVyLmNzcygicG9zaXRpb24iLCJhYnNvbHV0ZSIpO3RoaXMuY3NzUG9zaXRpb249dGhpcy5oZWxwZXIuY3NzKCJwb3NpdGlvbiIpO2EuZXh0ZW5kKHRoaXMub2Zmc2V0LHtjbGljazp7bGVmdDplLnBhZ2VYLXRoaXMub2Zmc2V0LmxlZnQsdG9wOmUucGFnZVktdGhpcy5vZmZzZXQudG9wfSxwYXJlbnQ6dGhpcy5fZ2V0UGFyZW50T2Zmc2V0KCkscmVsYXRpdmU6dGhpcy5fZ2V0UmVsYXRpdmVPZmZzZXQoKX0pO3RoaXMub3JpZ2luYWxQb3NpdGlvbj10aGlzLl9nZW5lcmF0ZVBvc2l0aW9uKGUpO3RoaXMub3JpZ2luYWxQYWdlWD1lLnBhZ2VYO3RoaXMub3JpZ2luYWxQYWdlWT1lLnBhZ2VZO2lmKGcuY3Vyc29yQXQpe3RoaXMuX2FkanVzdE9mZnNldEZyb21IZWxwZXIoZy5jdXJzb3JBdCl9dGhpcy5kb21Qb3NpdGlvbj17cHJldjp0aGlzLmN1cnJlbnRJdGVtLnByZXYoKVswXSxwYXJlbnQ6dGhpcy5jdXJyZW50SXRlbS5wYXJlbnQoKVswXX07aWYodGhpcy5oZWxwZXJbMF0hPXRoaXMuY3VycmVudEl0ZW1bMF0pe3RoaXMuY3VycmVudEl0ZW0uaGlkZSgpfXRoaXMuX2NyZWF0ZVBsYWNlaG9sZGVyKCk7aWYoZy5jb250YWlubWVudCl7dGhpcy5fc2V0Q29udGFpbm1lbnQoKX1pZihnLmN1cnNvcil7aWYoYSgiYm9keSIpLmNzcygiY3Vyc29yIikpe3RoaXMuX3N0b3JlZEN1cnNvcj1hKCJib2R5IikuY3NzKCJjdXJzb3IiKX1hKCJib2R5IikuY3NzKCJjdXJzb3IiLGcuY3Vyc29yKX1pZihnLm9wYWNpdHkpe2lmKHRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIpKXt0aGlzLl9zdG9yZWRPcGFjaXR5PXRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIpfXRoaXMuaGVscGVyLmNzcygib3BhY2l0eSIsZy5vcGFjaXR5KX1pZihnLnpJbmRleCl7aWYodGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiKSl7dGhpcy5fc3RvcmVkWkluZGV4PXRoaXMuaGVscGVyLmNzcygiekluZGV4Iil9dGhpcy5oZWxwZXIuY3NzKCJ6SW5kZXgiLGcuekluZGV4KX1pZih0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJnRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUhPSJIVE1MIil7dGhpcy5vdmVyZmxvd09mZnNldD10aGlzLnNjcm9sbFBhcmVudC5vZmZzZXQoKX10aGlzLl90cmlnZ2VyKCJzdGFydCIsZSx0aGlzLl91aUhhc2goKSk7aWYoIXRoaXMuX3ByZXNlcnZlSGVscGVyUHJvcG9ydGlvbnMpe3RoaXMuX2NhY2hlSGVscGVyUHJvcG9ydGlvbnMoKX1pZighYil7Zm9yKHZhciBkPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtkPj0wO2QtLSl7dGhpcy5jb250YWluZXJzW2RdLl90cmlnZ2VyKCJhY3RpdmF0ZSIsZSxjLl91aUhhc2godGhpcykpfX1pZihhLnVpLmRkbWFuYWdlcil7YS51aS5kZG1hbmFnZXIuY3VycmVudD10aGlzfWlmKGEudWkuZGRtYW5hZ2VyJiYhZy5kcm9wQmVoYXZpb3VyKXthLnVpLmRkbWFuYWdlci5wcmVwYXJlT2Zmc2V0cyh0aGlzLGUpfXRoaXMuZHJhZ2dpbmc9dHJ1ZTt0aGlzLmhlbHBlci5hZGRDbGFzcygidWktc29ydGFibGUtaGVscGVyIik7dGhpcy5fbW91c2VEcmFnKGUpO3JldHVybiB0cnVlfSxfbW91c2VEcmFnOmZ1bmN0aW9uKGYpe3RoaXMucG9zaXRpb249dGhpcy5fZ2VuZXJhdGVQb3NpdGlvbihmKTt0aGlzLnBvc2l0aW9uQWJzPXRoaXMuX2NvbnZlcnRQb3NpdGlvblRvKCJhYnNvbHV0ZSIpO2lmKCF0aGlzLmxhc3RQb3NpdGlvbkFicyl7dGhpcy5sYXN0UG9zaXRpb25BYnM9dGhpcy5wb3NpdGlvbkFic31pZih0aGlzLm9wdGlvbnMuc2Nyb2xsKXt2YXIgZz10aGlzLm9wdGlvbnMsYj1mYWxzZTtpZih0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJnRoaXMuc2Nyb2xsUGFyZW50WzBdLnRhZ05hbWUhPSJIVE1MIil7aWYoKHRoaXMub3ZlcmZsb3dPZmZzZXQudG9wK3RoaXMuc2Nyb2xsUGFyZW50WzBdLm9mZnNldEhlaWdodCktZi5wYWdlWTxnLnNjcm9sbFNlbnNpdGl2aXR5KXt0aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3A9Yj10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxUb3ArZy5zY3JvbGxTcGVlZH1lbHNle2lmKGYucGFnZVktdGhpcy5vdmVyZmxvd09mZnNldC50b3A8Zy5zY3JvbGxTZW5zaXRpdml0eSl7dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wPWI9dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsVG9wLWcuc2Nyb2xsU3BlZWR9fWlmKCh0aGlzLm92ZXJmbG93T2Zmc2V0LmxlZnQrdGhpcy5zY3JvbGxQYXJlbnRbMF0ub2Zmc2V0V2lkdGgpLWYucGFnZVg8Zy5zY3JvbGxTZW5zaXRpdml0eSl7dGhpcy5zY3JvbGxQYXJlbnRbMF0uc2Nyb2xsTGVmdD1iPXRoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQrZy5zY3JvbGxTcGVlZH1lbHNle2lmKGYucGFnZVgtdGhpcy5vdmVyZmxvd09mZnNldC5sZWZ0PGcuc2Nyb2xsU2Vuc2l0aXZpdHkpe3RoaXMuc2Nyb2xsUGFyZW50WzBdLnNjcm9sbExlZnQ9Yj10aGlzLnNjcm9sbFBhcmVudFswXS5zY3JvbGxMZWZ0LWcuc2Nyb2xsU3BlZWR9fX1lbHNle2lmKGYucGFnZVktYShkb2N1bWVudCkuc2Nyb2xsVG9wKCk8Zy5zY3JvbGxTZW5zaXRpdml0eSl7Yj1hKGRvY3VtZW50KS5zY3JvbGxUb3AoYShkb2N1bWVudCkuc2Nyb2xsVG9wKCktZy5zY3JvbGxTcGVlZCl9ZWxzZXtpZihhKHdpbmRvdykuaGVpZ2h0KCktKGYucGFnZVktYShkb2N1bWVudCkuc2Nyb2xsVG9wKCkpPGcuc2Nyb2xsU2Vuc2l0aXZpdHkpe2I9YShkb2N1bWVudCkuc2Nyb2xsVG9wKGEoZG9jdW1lbnQpLnNjcm9sbFRvcCgpK2cuc2Nyb2xsU3BlZWQpfX1pZihmLnBhZ2VYLWEoZG9jdW1lbnQpLnNjcm9sbExlZnQoKTxnLnNjcm9sbFNlbnNpdGl2aXR5KXtiPWEoZG9jdW1lbnQpLnNjcm9sbExlZnQoYShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpLWcuc2Nyb2xsU3BlZWQpfWVsc2V7aWYoYSh3aW5kb3cpLndpZHRoKCktKGYucGFnZVgtYShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpKTxnLnNjcm9sbFNlbnNpdGl2aXR5KXtiPWEoZG9jdW1lbnQpLnNjcm9sbExlZnQoYShkb2N1bWVudCkuc2Nyb2xsTGVmdCgpK2cuc2Nyb2xsU3BlZWQpfX19aWYoYiE9PWZhbHNlJiZhLnVpLmRkbWFuYWdlciYmIWcuZHJvcEJlaGF2aW91cil7YS51aS5kZG1hbmFnZXIucHJlcGFyZU9mZnNldHModGhpcyxmKX19dGhpcy5wb3NpdGlvbkFicz10aGlzLl9jb252ZXJ0UG9zaXRpb25UbygiYWJzb2x1dGUiKTtpZighdGhpcy5vcHRpb25zLmF4aXN8fHRoaXMub3B0aW9ucy5heGlzIT0ieSIpe3RoaXMuaGVscGVyWzBdLnN0eWxlLmxlZnQ9dGhpcy5wb3NpdGlvbi5sZWZ0KyJweCJ9aWYoIXRoaXMub3B0aW9ucy5heGlzfHx0aGlzLm9wdGlvbnMuYXhpcyE9IngiKXt0aGlzLmhlbHBlclswXS5zdHlsZS50b3A9dGhpcy5wb3NpdGlvbi50b3ArInB4In1mb3IodmFyIGQ9dGhpcy5pdGVtcy5sZW5ndGgtMTtkPj0wO2QtLSl7dmFyIGU9dGhpcy5pdGVtc1tkXSxjPWUuaXRlbVswXSxoPXRoaXMuX2ludGVyc2VjdHNXaXRoUG9pbnRlcihlKTtpZighaCl7Y29udGludWV9aWYoYyE9dGhpcy5jdXJyZW50SXRlbVswXSYmdGhpcy5wbGFjZWhvbGRlcltoPT0xPyJuZXh0IjoicHJldiJdKClbMF0hPWMmJiFhLnVpLmNvbnRhaW5zKHRoaXMucGxhY2Vob2xkZXJbMF0sYykmJih0aGlzLm9wdGlvbnMudHlwZT09InNlbWktZHluYW1pYyI/IWEudWkuY29udGFpbnModGhpcy5lbGVtZW50WzBdLGMpOnRydWUpKXt0aGlzLmRpcmVjdGlvbj1oPT0xPyJkb3duIjoidXAiO2lmKHRoaXMub3B0aW9ucy50b2xlcmFuY2U9PSJwb2ludGVyInx8dGhpcy5faW50ZXJzZWN0c1dpdGhTaWRlcyhlKSl7dGhpcy5fcmVhcnJhbmdlKGYsZSl9ZWxzZXticmVha310aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGYsdGhpcy5fdWlIYXNoKCkpO2JyZWFrfX10aGlzLl9jb250YWN0Q29udGFpbmVycyhmKTtpZihhLnVpLmRkbWFuYWdlcil7YS51aS5kZG1hbmFnZXIuZHJhZyh0aGlzLGYpfXRoaXMuX3RyaWdnZXIoInNvcnQiLGYsdGhpcy5fdWlIYXNoKCkpO3RoaXMubGFzdFBvc2l0aW9uQWJzPXRoaXMucG9zaXRpb25BYnM7cmV0dXJuIGZhbHNlfSxfbW91c2VTdG9wOmZ1bmN0aW9uKGMsZCl7aWYoIWMpe3JldHVybn1pZihhLnVpLmRkbWFuYWdlciYmIXRoaXMub3B0aW9ucy5kcm9wQmVoYXZpb3VyKXthLnVpLmRkbWFuYWdlci5kcm9wKHRoaXMsYyl9aWYodGhpcy5vcHRpb25zLnJldmVydCl7dmFyIGI9dGhpczt2YXIgZT1iLnBsYWNlaG9sZGVyLm9mZnNldCgpO2IucmV2ZXJ0aW5nPXRydWU7YSh0aGlzLmhlbHBlcikuYW5pbWF0ZSh7bGVmdDplLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQtYi5tYXJnaW5zLmxlZnQrKHRoaXMub2Zmc2V0UGFyZW50WzBdPT1kb2N1bWVudC5ib2R5PzA6dGhpcy5vZmZzZXRQYXJlbnRbMF0uc2Nyb2xsTGVmdCksdG9wOmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AtYi5tYXJnaW5zLnRvcCsodGhpcy5vZmZzZXRQYXJlbnRbMF09PWRvY3VtZW50LmJvZHk/MDp0aGlzLm9mZnNldFBhcmVudFswXS5zY3JvbGxUb3ApfSxwYXJzZUludCh0aGlzLm9wdGlvbnMucmV2ZXJ0LDEwKXx8NTAwLGZ1bmN0aW9uKCl7Yi5fY2xlYXIoYyl9KX1lbHNle3RoaXMuX2NsZWFyKGMsZCl9cmV0dXJuIGZhbHNlfSxjYW5jZWw6ZnVuY3Rpb24oKXt2YXIgYj10aGlzO2lmKHRoaXMuZHJhZ2dpbmcpe3RoaXMuX21vdXNlVXAoKTtpZih0aGlzLm9wdGlvbnMuaGVscGVyPT0ib3JpZ2luYWwiKXt0aGlzLmN1cnJlbnRJdGVtLmNzcyh0aGlzLl9zdG9yZWRDU1MpLnJlbW92ZUNsYXNzKCJ1aS1zb3J0YWJsZS1oZWxwZXIiKX1lbHNle3RoaXMuY3VycmVudEl0ZW0uc2hvdygpfWZvcih2YXIgYz10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7Yz49MDtjLS0pe3RoaXMuY29udGFpbmVyc1tjXS5fdHJpZ2dlcigiZGVhY3RpdmF0ZSIsbnVsbCxiLl91aUhhc2godGhpcykpO2lmKHRoaXMuY29udGFpbmVyc1tjXS5jb250YWluZXJDYWNoZS5vdmVyKXt0aGlzLmNvbnRhaW5lcnNbY10uX3RyaWdnZXIoIm91dCIsbnVsbCxiLl91aUhhc2godGhpcykpO3RoaXMuY29udGFpbmVyc1tjXS5jb250YWluZXJDYWNoZS5vdmVyPTB9fX1pZih0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGUpe3RoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnBsYWNlaG9sZGVyWzBdKX1pZih0aGlzLm9wdGlvbnMuaGVscGVyIT0ib3JpZ2luYWwiJiZ0aGlzLmhlbHBlciYmdGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZSl7dGhpcy5oZWxwZXIucmVtb3ZlKCl9YS5leHRlbmQodGhpcyx7aGVscGVyOm51bGwsZHJhZ2dpbmc6ZmFsc2UscmV2ZXJ0aW5nOmZhbHNlLF9ub0ZpbmFsU29ydDpudWxsfSk7aWYodGhpcy5kb21Qb3NpdGlvbi5wcmV2KXthKHRoaXMuZG9tUG9zaXRpb24ucHJldikuYWZ0ZXIodGhpcy5jdXJyZW50SXRlbSl9ZWxzZXthKHRoaXMuZG9tUG9zaXRpb24ucGFyZW50KS5wcmVwZW5kKHRoaXMuY3VycmVudEl0ZW0pfXJldHVybiB0cnVlfSxzZXJpYWxpemU6ZnVuY3Rpb24oZCl7dmFyIGI9dGhpcy5fZ2V0SXRlbXNBc2pRdWVyeShkJiZkLmNvbm5lY3RlZCk7dmFyIGM9W107ZD1kfHx7fTthKGIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZT0oYShkLml0ZW18fHRoaXMpLmF0dHIoZC5hdHRyaWJ1dGV8fCJpZCIpfHwiIikubWF0Y2goZC5leHByZXNzaW9ufHwoLyguKylbLT1fXSguKykvKSk7aWYoZSl7Yy5wdXNoKChkLmtleXx8ZVsxXSsiW10iKSsiPSIrKGQua2V5JiZkLmV4cHJlc3Npb24/ZVsxXTplWzJdKSl9fSk7cmV0dXJuIGMuam9pbigiJiIpfSx0b0FycmF5OmZ1bmN0aW9uKGQpe3ZhciBiPXRoaXMuX2dldEl0ZW1zQXNqUXVlcnkoZCYmZC5jb25uZWN0ZWQpO3ZhciBjPVtdO2Q9ZHx8e307Yi5lYWNoKGZ1bmN0aW9uKCl7Yy5wdXNoKGEoZC5pdGVtfHx0aGlzKS5hdHRyKGQuYXR0cmlidXRlfHwiaWQiKXx8IiIpfSk7cmV0dXJuIGN9LF9pbnRlcnNlY3RzV2l0aDpmdW5jdGlvbihtKXt2YXIgZT10aGlzLnBvc2l0aW9uQWJzLmxlZnQsZD1lK3RoaXMuaGVscGVyUHJvcG9ydGlvbnMud2lkdGgsaz10aGlzLnBvc2l0aW9uQWJzLnRvcCxqPWsrdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQ7dmFyIGY9bS5sZWZ0LGM9ZittLndpZHRoLG49bS50b3AsaT1uK20uaGVpZ2h0O3ZhciBvPXRoaXMub2Zmc2V0LmNsaWNrLnRvcCxoPXRoaXMub2Zmc2V0LmNsaWNrLmxlZnQ7dmFyIGc9KGsrbyk+biYmKGsrbyk8aSYmKGUraCk+ZiYmKGUraCk8YztpZih0aGlzLm9wdGlvbnMudG9sZXJhbmNlPT0icG9pbnRlciJ8fHRoaXMub3B0aW9ucy5mb3JjZVBvaW50ZXJGb3JDb250YWluZXJzfHwodGhpcy5vcHRpb25zLnRvbGVyYW5jZSE9InBvaW50ZXIiJiZ0aGlzLmhlbHBlclByb3BvcnRpb25zW3RoaXMuZmxvYXRpbmc/IndpZHRoIjoiaGVpZ2h0Il0+bVt0aGlzLmZsb2F0aW5nPyJ3aWR0aCI6ImhlaWdodCJdKSl7cmV0dXJuIGd9ZWxzZXtyZXR1cm4oZjxlKyh0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLzIpJiZkLSh0aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLzIpPGMmJm48aysodGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQvMikmJmotKHRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LzIpPGkpfX0sX2ludGVyc2VjdHNXaXRoUG9pbnRlcjpmdW5jdGlvbihkKXt2YXIgZT1hLnVpLmlzT3ZlckF4aXModGhpcy5wb3NpdGlvbkFicy50b3ArdGhpcy5vZmZzZXQuY2xpY2sudG9wLGQudG9wLGQuaGVpZ2h0KSxjPWEudWkuaXNPdmVyQXhpcyh0aGlzLnBvc2l0aW9uQWJzLmxlZnQrdGhpcy5vZmZzZXQuY2xpY2subGVmdCxkLmxlZnQsZC53aWR0aCksZz1lJiZjLGI9dGhpcy5fZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uKCksZj10aGlzLl9nZXREcmFnSG9yaXpvbnRhbERpcmVjdGlvbigpO2lmKCFnKXtyZXR1cm4gZmFsc2V9cmV0dXJuIHRoaXMuZmxvYXRpbmc/KCgoZiYmZj09InJpZ2h0Iil8fGI9PSJkb3duIik/MjoxKTooYiYmKGI9PSJkb3duIj8yOjEpKX0sX2ludGVyc2VjdHNXaXRoU2lkZXM6ZnVuY3Rpb24oZSl7dmFyIGM9YS51aS5pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMudG9wK3RoaXMub2Zmc2V0LmNsaWNrLnRvcCxlLnRvcCsoZS5oZWlnaHQvMiksZS5oZWlnaHQpLGQ9YS51aS5pc092ZXJBeGlzKHRoaXMucG9zaXRpb25BYnMubGVmdCt0aGlzLm9mZnNldC5jbGljay5sZWZ0LGUubGVmdCsoZS53aWR0aC8yKSxlLndpZHRoKSxiPXRoaXMuX2dldERyYWdWZXJ0aWNhbERpcmVjdGlvbigpLGY9dGhpcy5fZ2V0RHJhZ0hvcml6b250YWxEaXJlY3Rpb24oKTtpZih0aGlzLmZsb2F0aW5nJiZmKXtyZXR1cm4oKGY9PSJyaWdodCImJmQpfHwoZj09ImxlZnQiJiYhZCkpfWVsc2V7cmV0dXJuIGImJigoYj09ImRvd24iJiZjKXx8KGI9PSJ1cCImJiFjKSl9fSxfZ2V0RHJhZ1ZlcnRpY2FsRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5wb3NpdGlvbkFicy50b3AtdGhpcy5sYXN0UG9zaXRpb25BYnMudG9wO3JldHVybiBiIT0wJiYoYj4wPyJkb3duIjoidXAiKX0sX2dldERyYWdIb3Jpem9udGFsRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5wb3NpdGlvbkFicy5sZWZ0LXRoaXMubGFzdFBvc2l0aW9uQWJzLmxlZnQ7cmV0dXJuIGIhPTAmJihiPjA/InJpZ2h0IjoibGVmdCIpfSxyZWZyZXNoOmZ1bmN0aW9uKGIpe3RoaXMuX3JlZnJlc2hJdGVtcyhiKTt0aGlzLnJlZnJlc2hQb3NpdGlvbnMoKX0sX2Nvbm5lY3RXaXRoOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5vcHRpb25zO3JldHVybiBiLmNvbm5lY3RXaXRoLmNvbnN0cnVjdG9yPT1TdHJpbmc/W2IuY29ubmVjdFdpdGhdOmIuY29ubmVjdFdpdGh9LF9nZXRJdGVtc0FzalF1ZXJ5OmZ1bmN0aW9uKGIpe3ZhciBsPXRoaXM7dmFyIGc9W107dmFyIGU9W107dmFyIGg9dGhpcy5fY29ubmVjdFdpdGgoKTtpZihoJiZiKXtmb3IodmFyIGQ9aC5sZW5ndGgtMTtkPj0wO2QtLSl7dmFyIGs9YShoW2RdKTtmb3IodmFyIGM9ay5sZW5ndGgtMTtjPj0wO2MtLSl7dmFyIGY9YS5kYXRhKGtbY10sInNvcnRhYmxlIik7aWYoZiYmZiE9dGhpcyYmIWYub3B0aW9ucy5kaXNhYmxlZCl7ZS5wdXNoKFthLmlzRnVuY3Rpb24oZi5vcHRpb25zLml0ZW1zKT9mLm9wdGlvbnMuaXRlbXMuY2FsbChmLmVsZW1lbnQpOmEoZi5vcHRpb25zLml0ZW1zLGYuZWxlbWVudCkubm90KCIudWktc29ydGFibGUtaGVscGVyIiksZl0pfX19fWUucHVzaChbYS5pc0Z1bmN0aW9uKHRoaXMub3B0aW9ucy5pdGVtcyk/dGhpcy5vcHRpb25zLml0ZW1zLmNhbGwodGhpcy5lbGVtZW50LG51bGwse29wdGlvbnM6dGhpcy5vcHRpb25zLGl0ZW06dGhpcy5jdXJyZW50SXRlbX0pOmEodGhpcy5vcHRpb25zLml0ZW1zLHRoaXMuZWxlbWVudCkubm90KCIudWktc29ydGFibGUtaGVscGVyIiksdGhpc10pO2Zvcih2YXIgZD1lLmxlbmd0aC0xO2Q+PTA7ZC0tKXtlW2RdWzBdLmVhY2goZnVuY3Rpb24oKXtnLnB1c2godGhpcyl9KX1yZXR1cm4gYShnKX0sX3JlbW92ZUN1cnJlbnRzRnJvbUl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5jdXJyZW50SXRlbS5maW5kKCI6ZGF0YShzb3J0YWJsZS1pdGVtKSIpO2Zvcih2YXIgYz0wO2M8dGhpcy5pdGVtcy5sZW5ndGg7YysrKXtmb3IodmFyIGI9MDtiPGQubGVuZ3RoO2IrKyl7aWYoZFtiXT09dGhpcy5pdGVtc1tjXS5pdGVtWzBdKXt0aGlzLml0ZW1zLnNwbGljZShjLDEpfX19fSxfcmVmcmVzaEl0ZW1zOmZ1bmN0aW9uKGIpe3RoaXMuaXRlbXM9W107dGhpcy5jb250YWluZXJzPVt0aGlzXTt2YXIgaD10aGlzLml0ZW1zO3ZhciBwPXRoaXM7dmFyIGY9W1thLmlzRnVuY3Rpb24odGhpcy5vcHRpb25zLml0ZW1zKT90aGlzLm9wdGlvbnMuaXRlbXMuY2FsbCh0aGlzLmVsZW1lbnRbMF0sYix7aXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6YSh0aGlzLm9wdGlvbnMuaXRlbXMsdGhpcy5lbGVtZW50KSx0aGlzXV07dmFyIGw9dGhpcy5fY29ubmVjdFdpdGgoKTtpZihsKXtmb3IodmFyIGU9bC5sZW5ndGgtMTtlPj0wO2UtLSl7dmFyIG09YShsW2VdKTtmb3IodmFyIGQ9bS5sZW5ndGgtMTtkPj0wO2QtLSl7dmFyIGc9YS5kYXRhKG1bZF0sInNvcnRhYmxlIik7aWYoZyYmZyE9dGhpcyYmIWcub3B0aW9ucy5kaXNhYmxlZCl7Zi5wdXNoKFthLmlzRnVuY3Rpb24oZy5vcHRpb25zLml0ZW1zKT9nLm9wdGlvbnMuaXRlbXMuY2FsbChnLmVsZW1lbnRbMF0sYix7aXRlbTp0aGlzLmN1cnJlbnRJdGVtfSk6YShnLm9wdGlvbnMuaXRlbXMsZy5lbGVtZW50KSxnXSk7dGhpcy5jb250YWluZXJzLnB1c2goZyl9fX19Zm9yKHZhciBlPWYubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBrPWZbZV1bMV07dmFyIGM9ZltlXVswXTtmb3IodmFyIGQ9MCxuPWMubGVuZ3RoO2Q8bjtkKyspe3ZhciBvPWEoY1tkXSk7by5kYXRhKCJzb3J0YWJsZS1pdGVtIixrKTtoLnB1c2goe2l0ZW06byxpbnN0YW5jZTprLHdpZHRoOjAsaGVpZ2h0OjAsbGVmdDowLHRvcDowfSl9fX0scmVmcmVzaFBvc2l0aW9uczpmdW5jdGlvbihiKXtpZih0aGlzLm9mZnNldFBhcmVudCYmdGhpcy5oZWxwZXIpe3RoaXMub2Zmc2V0LnBhcmVudD10aGlzLl9nZXRQYXJlbnRPZmZzZXQoKX1mb3IodmFyIGQ9dGhpcy5pdGVtcy5sZW5ndGgtMTtkPj0wO2QtLSl7dmFyIGU9dGhpcy5pdGVtc1tkXTtpZihlLmluc3RhbmNlIT10aGlzLmN1cnJlbnRDb250YWluZXImJnRoaXMuY3VycmVudENvbnRhaW5lciYmZS5pdGVtWzBdIT10aGlzLmN1cnJlbnRJdGVtWzBdKXtjb250aW51ZX12YXIgYz10aGlzLm9wdGlvbnMudG9sZXJhbmNlRWxlbWVudD9hKHRoaXMub3B0aW9ucy50b2xlcmFuY2VFbGVtZW50LGUuaXRlbSk6ZS5pdGVtO2lmKCFiKXtlLndpZHRoPWMub3V0ZXJXaWR0aCgpO2UuaGVpZ2h0PWMub3V0ZXJIZWlnaHQoKX12YXIgZj1jLm9mZnNldCgpO2UubGVmdD1mLmxlZnQ7ZS50b3A9Zi50b3B9aWYodGhpcy5vcHRpb25zLmN1c3RvbSYmdGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycyl7dGhpcy5vcHRpb25zLmN1c3RvbS5yZWZyZXNoQ29udGFpbmVycy5jYWxsKHRoaXMpfWVsc2V7Zm9yKHZhciBkPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtkPj0wO2QtLSl7dmFyIGY9dGhpcy5jb250YWluZXJzW2RdLmVsZW1lbnQub2Zmc2V0KCk7dGhpcy5jb250YWluZXJzW2RdLmNvbnRhaW5lckNhY2hlLmxlZnQ9Zi5sZWZ0O3RoaXMuY29udGFpbmVyc1tkXS5jb250YWluZXJDYWNoZS50b3A9Zi50b3A7dGhpcy5jb250YWluZXJzW2RdLmNvbnRhaW5lckNhY2hlLndpZHRoPXRoaXMuY29udGFpbmVyc1tkXS5lbGVtZW50Lm91dGVyV2lkdGgoKTt0aGlzLmNvbnRhaW5lcnNbZF0uY29udGFpbmVyQ2FjaGUuaGVpZ2h0PXRoaXMuY29udGFpbmVyc1tkXS5lbGVtZW50Lm91dGVySGVpZ2h0KCl9fX0sX2NyZWF0ZVBsYWNlaG9sZGVyOmZ1bmN0aW9uKGQpe3ZhciBiPWR8fHRoaXMsZT1iLm9wdGlvbnM7aWYoIWUucGxhY2Vob2xkZXJ8fGUucGxhY2Vob2xkZXIuY29uc3RydWN0b3I9PVN0cmluZyl7dmFyIGM9ZS5wbGFjZWhvbGRlcjtlLnBsYWNlaG9sZGVyPXtlbGVtZW50OmZ1bmN0aW9uKCl7dmFyIGY9YShkb2N1bWVudC5jcmVhdGVFbGVtZW50KGIuY3VycmVudEl0ZW1bMF0ubm9kZU5hbWUpKS5hZGRDbGFzcyhjfHxiLmN1cnJlbnRJdGVtWzBdLmNsYXNzTmFtZSsiIHVpLXNvcnRhYmxlLXBsYWNlaG9sZGVyIikucmVtb3ZlQ2xhc3MoInVpLXNvcnRhYmxlLWhlbHBlciIpWzBdO2lmKCFjKXtmLnN0eWxlLnZpc2liaWxpdHk9ImhpZGRlbiJ9cmV0dXJuIGZ9LHVwZGF0ZTpmdW5jdGlvbihmLGcpe2lmKGMmJiFlLmZvcmNlUGxhY2Vob2xkZXJTaXplKXtyZXR1cm59aWYoIWcuaGVpZ2h0KCkpe2cuaGVpZ2h0KGIuY3VycmVudEl0ZW0uaW5uZXJIZWlnaHQoKS1wYXJzZUludChiLmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ1RvcCIpfHwwLDEwKS1wYXJzZUludChiLmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ0JvdHRvbSIpfHwwLDEwKSl9aWYoIWcud2lkdGgoKSl7Zy53aWR0aChiLmN1cnJlbnRJdGVtLmlubmVyV2lkdGgoKS1wYXJzZUludChiLmN1cnJlbnRJdGVtLmNzcygicGFkZGluZ0xlZnQiKXx8MCwxMCktcGFyc2VJbnQoYi5jdXJyZW50SXRlbS5jc3MoInBhZGRpbmdSaWdodCIpfHwwLDEwKSl9fX19Yi5wbGFjZWhvbGRlcj1hKGUucGxhY2Vob2xkZXIuZWxlbWVudC5jYWxsKGIuZWxlbWVudCxiLmN1cnJlbnRJdGVtKSk7Yi5jdXJyZW50SXRlbS5hZnRlcihiLnBsYWNlaG9sZGVyKTtlLnBsYWNlaG9sZGVyLnVwZGF0ZShiLGIucGxhY2Vob2xkZXIpfSxfY29udGFjdENvbnRhaW5lcnM6ZnVuY3Rpb24oZCl7Zm9yKHZhciBjPXRoaXMuY29udGFpbmVycy5sZW5ndGgtMTtjPj0wO2MtLSl7aWYodGhpcy5faW50ZXJzZWN0c1dpdGgodGhpcy5jb250YWluZXJzW2NdLmNvbnRhaW5lckNhY2hlKSl7aWYoIXRoaXMuY29udGFpbmVyc1tjXS5jb250YWluZXJDYWNoZS5vdmVyKXtpZih0aGlzLmN1cnJlbnRDb250YWluZXIhPXRoaXMuY29udGFpbmVyc1tjXSl7dmFyIGg9MTAwMDA7dmFyIGc9bnVsbDt2YXIgZT10aGlzLnBvc2l0aW9uQWJzW3RoaXMuY29udGFpbmVyc1tjXS5mbG9hdGluZz8ibGVmdCI6InRvcCJdO2Zvcih2YXIgYj10aGlzLml0ZW1zLmxlbmd0aC0xO2I+PTA7Yi0tKXtpZighYS51aS5jb250YWlucyh0aGlzLmNvbnRhaW5lcnNbY10uZWxlbWVudFswXSx0aGlzLml0ZW1zW2JdLml0ZW1bMF0pKXtjb250aW51ZX12YXIgZj10aGlzLml0ZW1zW2JdW3RoaXMuY29udGFpbmVyc1tjXS5mbG9hdGluZz8ibGVmdCI6InRvcCJdO2lmKE1hdGguYWJzKGYtZSk8aCl7aD1NYXRoLmFicyhmLWUpO2c9dGhpcy5pdGVtc1tiXX19aWYoIWcmJiF0aGlzLm9wdGlvbnMuZHJvcE9uRW1wdHkpe2NvbnRpbnVlfXRoaXMuY3VycmVudENvbnRhaW5lcj10aGlzLmNvbnRhaW5lcnNbY107Zz90aGlzLl9yZWFycmFuZ2UoZCxnLG51bGwsdHJ1ZSk6dGhpcy5fcmVhcnJhbmdlKGQsbnVsbCx0aGlzLmNvbnRhaW5lcnNbY10uZWxlbWVudCx0cnVlKTt0aGlzLl90cmlnZ2VyKCJjaGFuZ2UiLGQsdGhpcy5fdWlIYXNoKCkpO3RoaXMuY29udGFpbmVyc1tjXS5fdHJpZ2dlcigiY2hhbmdlIixkLHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyLnVwZGF0ZSh0aGlzLmN1cnJlbnRDb250YWluZXIsdGhpcy5wbGFjZWhvbGRlcil9dGhpcy5jb250YWluZXJzW2NdLl90cmlnZ2VyKCJvdmVyIixkLHRoaXMuX3VpSGFzaCh0aGlzKSk7dGhpcy5jb250YWluZXJzW2NdLmNvbnRhaW5lckNhY2hlLm92ZXI9MX19ZWxzZXtpZih0aGlzLmNvbnRhaW5lcnNbY10uY29udGFpbmVyQ2FjaGUub3Zlcil7dGhpcy5jb250YWluZXJzW2NdLl90cmlnZ2VyKCJvdXQiLGQsdGhpcy5fdWlIYXNoKHRoaXMpKTt0aGlzLmNvbnRhaW5lcnNbY10uY29udGFpbmVyQ2FjaGUub3Zlcj0wfX19fSxfY3JlYXRlSGVscGVyOmZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMub3B0aW9uczt2YXIgYj1hLmlzRnVuY3Rpb24oZC5oZWxwZXIpP2EoZC5oZWxwZXIuYXBwbHkodGhpcy5lbGVtZW50WzBdLFtjLHRoaXMuY3VycmVudEl0ZW1dKSk6KGQuaGVscGVyPT0iY2xvbmUiP3RoaXMuY3VycmVudEl0ZW0uY2xvbmUoKTp0aGlzLmN1cnJlbnRJdGVtKTtpZighYi5wYXJlbnRzKCJib2R5IikubGVuZ3RoKXthKGQuYXBwZW5kVG8hPSJwYXJlbnQiP2QuYXBwZW5kVG86dGhpcy5jdXJyZW50SXRlbVswXS5wYXJlbnROb2RlKVswXS5hcHBlbmRDaGlsZChiWzBdKX1pZihiWzBdPT10aGlzLmN1cnJlbnRJdGVtWzBdKXt0aGlzLl9zdG9yZWRDU1M9e3dpZHRoOnRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUud2lkdGgsaGVpZ2h0OnRoaXMuY3VycmVudEl0ZW1bMF0uc3R5bGUuaGVpZ2h0LHBvc2l0aW9uOnRoaXMuY3VycmVudEl0ZW0uY3NzKCJwb3NpdGlvbiIpLHRvcDp0aGlzLmN1cnJlbnRJdGVtLmNzcygidG9wIiksbGVmdDp0aGlzLmN1cnJlbnRJdGVtLmNzcygibGVmdCIpfX1pZihiWzBdLnN0eWxlLndpZHRoPT0iInx8ZC5mb3JjZUhlbHBlclNpemUpe2Iud2lkdGgodGhpcy5jdXJyZW50SXRlbS53aWR0aCgpKX1pZihiWzBdLnN0eWxlLmhlaWdodD09IiJ8fGQuZm9yY2VIZWxwZXJTaXplKXtiLmhlaWdodCh0aGlzLmN1cnJlbnRJdGVtLmhlaWdodCgpKX1yZXR1cm4gYn0sX2FkanVzdE9mZnNldEZyb21IZWxwZXI6ZnVuY3Rpb24oYil7aWYoYi5sZWZ0IT11bmRlZmluZWQpe3RoaXMub2Zmc2V0LmNsaWNrLmxlZnQ9Yi5sZWZ0K3RoaXMubWFyZ2lucy5sZWZ0fWlmKGIucmlnaHQhPXVuZGVmaW5lZCl7dGhpcy5vZmZzZXQuY2xpY2subGVmdD10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLWIucmlnaHQrdGhpcy5tYXJnaW5zLmxlZnR9aWYoYi50b3AhPXVuZGVmaW5lZCl7dGhpcy5vZmZzZXQuY2xpY2sudG9wPWIudG9wK3RoaXMubWFyZ2lucy50b3B9aWYoYi5ib3R0b20hPXVuZGVmaW5lZCl7dGhpcy5vZmZzZXQuY2xpY2sudG9wPXRoaXMuaGVscGVyUHJvcG9ydGlvbnMuaGVpZ2h0LWIuYm90dG9tK3RoaXMubWFyZ2lucy50b3B9fSxfZ2V0UGFyZW50T2Zmc2V0OmZ1bmN0aW9uKCl7dGhpcy5vZmZzZXRQYXJlbnQ9dGhpcy5oZWxwZXIub2Zmc2V0UGFyZW50KCk7dmFyIGI9dGhpcy5vZmZzZXRQYXJlbnQub2Zmc2V0KCk7aWYodGhpcy5jc3NQb3NpdGlvbj09ImFic29sdXRlIiYmdGhpcy5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZhLnVpLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSl7Yi5sZWZ0Kz10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk7Yi50b3ArPXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpfWlmKCh0aGlzLm9mZnNldFBhcmVudFswXT09ZG9jdW1lbnQuYm9keSl8fCh0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lJiZ0aGlzLm9mZnNldFBhcmVudFswXS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PSJodG1sIiYmYS5icm93c2VyLm1zaWUpKXtiPXt0b3A6MCxsZWZ0OjB9fXJldHVybnt0b3A6Yi50b3ArKHBhcnNlSW50KHRoaXMub2Zmc2V0UGFyZW50LmNzcygiYm9yZGVyVG9wV2lkdGgiKSwxMCl8fDApLGxlZnQ6Yi5sZWZ0KyhwYXJzZUludCh0aGlzLm9mZnNldFBhcmVudC5jc3MoImJvcmRlckxlZnRXaWR0aCIpLDEwKXx8MCl9fSxfZ2V0UmVsYXRpdmVPZmZzZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLmNzc1Bvc2l0aW9uPT0icmVsYXRpdmUiKXt2YXIgYj10aGlzLmN1cnJlbnRJdGVtLnBvc2l0aW9uKCk7cmV0dXJue3RvcDpiLnRvcC0ocGFyc2VJbnQodGhpcy5oZWxwZXIuY3NzKCJ0b3AiKSwxMCl8fDApK3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpLGxlZnQ6Yi5sZWZ0LShwYXJzZUludCh0aGlzLmhlbHBlci5jc3MoImxlZnQiKSwxMCl8fDApK3RoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbExlZnQoKX19ZWxzZXtyZXR1cm57dG9wOjAsbGVmdDowfX19LF9jYWNoZU1hcmdpbnM6ZnVuY3Rpb24oKXt0aGlzLm1hcmdpbnM9e2xlZnQ6KHBhcnNlSW50KHRoaXMuY3VycmVudEl0ZW0uY3NzKCJtYXJnaW5MZWZ0IiksMTApfHwwKSx0b3A6KHBhcnNlSW50KHRoaXMuY3VycmVudEl0ZW0uY3NzKCJtYXJnaW5Ub3AiKSwxMCl8fDApfX0sX2NhY2hlSGVscGVyUHJvcG9ydGlvbnM6ZnVuY3Rpb24oKXt0aGlzLmhlbHBlclByb3BvcnRpb25zPXt3aWR0aDp0aGlzLmhlbHBlci5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuaGVscGVyLm91dGVySGVpZ2h0KCl9fSxfc2V0Q29udGFpbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7aWYoZS5jb250YWlubWVudD09InBhcmVudCIpe2UuY29udGFpbm1lbnQ9dGhpcy5oZWxwZXJbMF0ucGFyZW50Tm9kZX1pZihlLmNvbnRhaW5tZW50PT0iZG9jdW1lbnQifHxlLmNvbnRhaW5tZW50PT0id2luZG93Iil7dGhpcy5jb250YWlubWVudD1bMC10aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0LXRoaXMub2Zmc2V0LnBhcmVudC5sZWZ0LDAtdGhpcy5vZmZzZXQucmVsYXRpdmUudG9wLXRoaXMub2Zmc2V0LnBhcmVudC50b3AsYShlLmNvbnRhaW5tZW50PT0iZG9jdW1lbnQiP2RvY3VtZW50OndpbmRvdykud2lkdGgoKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LChhKGUuY29udGFpbm1lbnQ9PSJkb2N1bWVudCI/ZG9jdW1lbnQ6d2luZG93KS5oZWlnaHQoKXx8ZG9jdW1lbnQuYm9keS5wYXJlbnROb2RlLnNjcm9sbEhlaWdodCktdGhpcy5oZWxwZXJQcm9wb3J0aW9ucy5oZWlnaHQtdGhpcy5tYXJnaW5zLnRvcF19aWYoISgvXihkb2N1bWVudHx3aW5kb3d8cGFyZW50KSQvKS50ZXN0KGUuY29udGFpbm1lbnQpKXt2YXIgYz1hKGUuY29udGFpbm1lbnQpWzBdO3ZhciBkPWEoZS5jb250YWlubWVudCkub2Zmc2V0KCk7dmFyIGI9KGEoYykuY3NzKCJvdmVyZmxvdyIpIT0iaGlkZGVuIik7dGhpcy5jb250YWlubWVudD1bZC5sZWZ0KyhwYXJzZUludChhKGMpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKSsocGFyc2VJbnQoYShjKS5jc3MoInBhZGRpbmdMZWZ0IiksMTApfHwwKS10aGlzLm1hcmdpbnMubGVmdCxkLnRvcCsocGFyc2VJbnQoYShjKS5jc3MoImJvcmRlclRvcFdpZHRoIiksMTApfHwwKSsocGFyc2VJbnQoYShjKS5jc3MoInBhZGRpbmdUb3AiKSwxMCl8fDApLXRoaXMubWFyZ2lucy50b3AsZC5sZWZ0KyhiP01hdGgubWF4KGMuc2Nyb2xsV2lkdGgsYy5vZmZzZXRXaWR0aCk6Yy5vZmZzZXRXaWR0aCktKHBhcnNlSW50KGEoYykuY3NzKCJib3JkZXJMZWZ0V2lkdGgiKSwxMCl8fDApLShwYXJzZUludChhKGMpLmNzcygicGFkZGluZ1JpZ2h0IiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLndpZHRoLXRoaXMubWFyZ2lucy5sZWZ0LGQudG9wKyhiP01hdGgubWF4KGMuc2Nyb2xsSGVpZ2h0LGMub2Zmc2V0SGVpZ2h0KTpjLm9mZnNldEhlaWdodCktKHBhcnNlSW50KGEoYykuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KGEoYykuY3NzKCJwYWRkaW5nQm90dG9tIiksMTApfHwwKS10aGlzLmhlbHBlclByb3BvcnRpb25zLmhlaWdodC10aGlzLm1hcmdpbnMudG9wXX19LF9jb252ZXJ0UG9zaXRpb25UbzpmdW5jdGlvbihmLGgpe2lmKCFoKXtoPXRoaXMucG9zaXRpb259dmFyIGM9Zj09ImFic29sdXRlIj8xOi0xO3ZhciBlPXRoaXMub3B0aW9ucyxiPXRoaXMuY3NzUG9zaXRpb249PSJhYnNvbHV0ZSImJiEodGhpcy5zY3JvbGxQYXJlbnRbMF0hPWRvY3VtZW50JiZhLnVpLmNvbnRhaW5zKHRoaXMuc2Nyb2xsUGFyZW50WzBdLHRoaXMub2Zmc2V0UGFyZW50WzBdKSk/dGhpcy5vZmZzZXRQYXJlbnQ6dGhpcy5zY3JvbGxQYXJlbnQsZz0oLyhodG1sfGJvZHkpL2kpLnRlc3QoYlswXS50YWdOYW1lKTtyZXR1cm57dG9wOihoLnRvcCt0aGlzLm9mZnNldC5yZWxhdGl2ZS50b3AqYyt0aGlzLm9mZnNldC5wYXJlbnQudG9wKmMtKGEuYnJvd3Nlci5zYWZhcmkmJnRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/MDoodGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsVG9wKCk6KGc/MDpiLnNjcm9sbFRvcCgpKSkqYykpLGxlZnQ6KGgubGVmdCt0aGlzLm9mZnNldC5yZWxhdGl2ZS5sZWZ0KmMrdGhpcy5vZmZzZXQucGFyZW50LmxlZnQqYy0oYS5icm93c2VyLnNhZmFyaSYmdGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8wOih0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPy10aGlzLnNjcm9sbFBhcmVudC5zY3JvbGxMZWZ0KCk6Zz8wOmIuc2Nyb2xsTGVmdCgpKSpjKSl9fSxfZ2VuZXJhdGVQb3NpdGlvbjpmdW5jdGlvbihlKXt2YXIgaD10aGlzLm9wdGlvbnMsYj10aGlzLmNzc1Bvc2l0aW9uPT0iYWJzb2x1dGUiJiYhKHRoaXMuc2Nyb2xsUGFyZW50WzBdIT1kb2N1bWVudCYmYS51aS5jb250YWlucyh0aGlzLnNjcm9sbFBhcmVudFswXSx0aGlzLm9mZnNldFBhcmVudFswXSkpP3RoaXMub2Zmc2V0UGFyZW50OnRoaXMuc2Nyb2xsUGFyZW50LGk9KC8oaHRtbHxib2R5KS9pKS50ZXN0KGJbMF0udGFnTmFtZSk7aWYodGhpcy5jc3NQb3NpdGlvbj09InJlbGF0aXZlIiYmISh0aGlzLnNjcm9sbFBhcmVudFswXSE9ZG9jdW1lbnQmJnRoaXMuc2Nyb2xsUGFyZW50WzBdIT10aGlzLm9mZnNldFBhcmVudFswXSkpe3RoaXMub2Zmc2V0LnJlbGF0aXZlPXRoaXMuX2dldFJlbGF0aXZlT2Zmc2V0KCl9dmFyIGQ9ZS5wYWdlWDt2YXIgYz1lLnBhZ2VZO2lmKHRoaXMub3JpZ2luYWxQb3NpdGlvbil7aWYodGhpcy5jb250YWlubWVudCl7aWYoZS5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PHRoaXMuY29udGFpbm1lbnRbMF0pe2Q9dGhpcy5jb250YWlubWVudFswXSt0aGlzLm9mZnNldC5jbGljay5sZWZ0fWlmKGUucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPHRoaXMuY29udGFpbm1lbnRbMV0pe2M9dGhpcy5jb250YWlubWVudFsxXSt0aGlzLm9mZnNldC5jbGljay50b3B9aWYoZS5wYWdlWC10aGlzLm9mZnNldC5jbGljay5sZWZ0PnRoaXMuY29udGFpbm1lbnRbMl0pe2Q9dGhpcy5jb250YWlubWVudFsyXSt0aGlzLm9mZnNldC5jbGljay5sZWZ0fWlmKGUucGFnZVktdGhpcy5vZmZzZXQuY2xpY2sudG9wPnRoaXMuY29udGFpbm1lbnRbM10pe2M9dGhpcy5jb250YWlubWVudFszXSt0aGlzLm9mZnNldC5jbGljay50b3B9fWlmKGguZ3JpZCl7dmFyIGc9dGhpcy5vcmlnaW5hbFBhZ2VZK01hdGgucm91bmQoKGMtdGhpcy5vcmlnaW5hbFBhZ2VZKS9oLmdyaWRbMV0pKmguZ3JpZFsxXTtjPXRoaXMuY29udGFpbm1lbnQ/KCEoZy10aGlzLm9mZnNldC5jbGljay50b3A8dGhpcy5jb250YWlubWVudFsxXXx8Zy10aGlzLm9mZnNldC5jbGljay50b3A+dGhpcy5jb250YWlubWVudFszXSk/ZzooIShnLXRoaXMub2Zmc2V0LmNsaWNrLnRvcDx0aGlzLmNvbnRhaW5tZW50WzFdKT9nLWguZ3JpZFsxXTpnK2guZ3JpZFsxXSkpOmc7dmFyIGY9dGhpcy5vcmlnaW5hbFBhZ2VYK01hdGgucm91bmQoKGQtdGhpcy5vcmlnaW5hbFBhZ2VYKS9oLmdyaWRbMF0pKmguZ3JpZFswXTtkPXRoaXMuY29udGFpbm1lbnQ/KCEoZi10aGlzLm9mZnNldC5jbGljay5sZWZ0PHRoaXMuY29udGFpbm1lbnRbMF18fGYtdGhpcy5vZmZzZXQuY2xpY2subGVmdD50aGlzLmNvbnRhaW5tZW50WzJdKT9mOighKGYtdGhpcy5vZmZzZXQuY2xpY2subGVmdDx0aGlzLmNvbnRhaW5tZW50WzBdKT9mLWguZ3JpZFswXTpmK2guZ3JpZFswXSkpOmZ9fXJldHVybnt0b3A6KGMtdGhpcy5vZmZzZXQuY2xpY2sudG9wLXRoaXMub2Zmc2V0LnJlbGF0aXZlLnRvcC10aGlzLm9mZnNldC5wYXJlbnQudG9wKyhhLmJyb3dzZXIuc2FmYXJpJiZ0aGlzLmNzc1Bvc2l0aW9uPT0iZml4ZWQiPzA6KHRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/LXRoaXMuc2Nyb2xsUGFyZW50LnNjcm9sbFRvcCgpOihpPzA6Yi5zY3JvbGxUb3AoKSkpKSksbGVmdDooZC10aGlzLm9mZnNldC5jbGljay5sZWZ0LXRoaXMub2Zmc2V0LnJlbGF0aXZlLmxlZnQtdGhpcy5vZmZzZXQucGFyZW50LmxlZnQrKGEuYnJvd3Nlci5zYWZhcmkmJnRoaXMuY3NzUG9zaXRpb249PSJmaXhlZCI/MDoodGhpcy5jc3NQb3NpdGlvbj09ImZpeGVkIj8tdGhpcy5zY3JvbGxQYXJlbnQuc2Nyb2xsTGVmdCgpOmk/MDpiLnNjcm9sbExlZnQoKSkpKX19LF9yZWFycmFuZ2U6ZnVuY3Rpb24oZyxmLGMsZSl7Yz9jWzBdLmFwcGVuZENoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pOmYuaXRlbVswXS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLnBsYWNlaG9sZGVyWzBdLCh0aGlzLmRpcmVjdGlvbj09ImRvd24iP2YuaXRlbVswXTpmLml0ZW1bMF0ubmV4dFNpYmxpbmcpKTt0aGlzLmNvdW50ZXI9dGhpcy5jb3VudGVyPysrdGhpcy5jb3VudGVyOjE7dmFyIGQ9dGhpcyxiPXRoaXMuY291bnRlcjt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGI9PWQuY291bnRlcil7ZC5yZWZyZXNoUG9zaXRpb25zKCFlKX19LDApfSxfY2xlYXI6ZnVuY3Rpb24oZCxlKXt0aGlzLnJldmVydGluZz1mYWxzZTt2YXIgZj1bXSxiPXRoaXM7aWYoIXRoaXMuX25vRmluYWxTb3J0JiZ0aGlzLmN1cnJlbnRJdGVtWzBdLnBhcmVudE5vZGUpe3RoaXMucGxhY2Vob2xkZXIuYmVmb3JlKHRoaXMuY3VycmVudEl0ZW0pfXRoaXMuX25vRmluYWxTb3J0PW51bGw7aWYodGhpcy5oZWxwZXJbMF09PXRoaXMuY3VycmVudEl0ZW1bMF0pe2Zvcih2YXIgYyBpbiB0aGlzLl9zdG9yZWRDU1Mpe2lmKHRoaXMuX3N0b3JlZENTU1tjXT09ImF1dG8ifHx0aGlzLl9zdG9yZWRDU1NbY109PSJzdGF0aWMiKXt0aGlzLl9zdG9yZWRDU1NbY109IiJ9fXRoaXMuY3VycmVudEl0ZW0uY3NzKHRoaXMuX3N0b3JlZENTUykucmVtb3ZlQ2xhc3MoInVpLXNvcnRhYmxlLWhlbHBlciIpfWVsc2V7dGhpcy5jdXJyZW50SXRlbS5zaG93KCl9aWYodGhpcy5mcm9tT3V0c2lkZSYmIWUpe2YucHVzaChmdW5jdGlvbihnKXt0aGlzLl90cmlnZ2VyKCJyZWNlaXZlIixnLHRoaXMuX3VpSGFzaCh0aGlzLmZyb21PdXRzaWRlKSl9KX1pZigodGhpcy5mcm9tT3V0c2lkZXx8dGhpcy5kb21Qb3NpdGlvbi5wcmV2IT10aGlzLmN1cnJlbnRJdGVtLnByZXYoKS5ub3QoIi51aS1zb3J0YWJsZS1oZWxwZXIiKVswXXx8dGhpcy5kb21Qb3NpdGlvbi5wYXJlbnQhPXRoaXMuY3VycmVudEl0ZW0ucGFyZW50KClbMF0pJiYhZSl7Zi5wdXNoKGZ1bmN0aW9uKGcpe3RoaXMuX3RyaWdnZXIoInVwZGF0ZSIsZyx0aGlzLl91aUhhc2goKSl9KX1pZighYS51aS5jb250YWlucyh0aGlzLmVsZW1lbnRbMF0sdGhpcy5jdXJyZW50SXRlbVswXSkpe2lmKCFlKXtmLnB1c2goZnVuY3Rpb24oZyl7dGhpcy5fdHJpZ2dlcigicmVtb3ZlIixnLHRoaXMuX3VpSGFzaCgpKX0pfWZvcih2YXIgYz10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7Yz49MDtjLS0pe2lmKGEudWkuY29udGFpbnModGhpcy5jb250YWluZXJzW2NdLmVsZW1lbnRbMF0sdGhpcy5jdXJyZW50SXRlbVswXSkmJiFlKXtmLnB1c2goKGZ1bmN0aW9uKGcpe3JldHVybiBmdW5jdGlvbihoKXtnLl90cmlnZ2VyKCJyZWNlaXZlIixoLHRoaXMuX3VpSGFzaCh0aGlzKSl9fSkuY2FsbCh0aGlzLHRoaXMuY29udGFpbmVyc1tjXSkpO2YucHVzaCgoZnVuY3Rpb24oZyl7cmV0dXJuIGZ1bmN0aW9uKGgpe2cuX3RyaWdnZXIoInVwZGF0ZSIsaCx0aGlzLl91aUhhc2godGhpcykpfX0pLmNhbGwodGhpcyx0aGlzLmNvbnRhaW5lcnNbY10pKX19fWZvcih2YXIgYz10aGlzLmNvbnRhaW5lcnMubGVuZ3RoLTE7Yz49MDtjLS0pe2lmKCFlKXtmLnB1c2goKGZ1bmN0aW9uKGcpe3JldHVybiBmdW5jdGlvbihoKXtnLl90cmlnZ2VyKCJkZWFjdGl2YXRlIixoLHRoaXMuX3VpSGFzaCh0aGlzKSl9fSkuY2FsbCh0aGlzLHRoaXMuY29udGFpbmVyc1tjXSkpfWlmKHRoaXMuY29udGFpbmVyc1tjXS5jb250YWluZXJDYWNoZS5vdmVyKXtmLnB1c2goKGZ1bmN0aW9uKGcpe3JldHVybiBmdW5jdGlvbihoKXtnLl90cmlnZ2VyKCJvdXQiLGgsdGhpcy5fdWlIYXNoKHRoaXMpKX19KS5jYWxsKHRoaXMsdGhpcy5jb250YWluZXJzW2NdKSk7dGhpcy5jb250YWluZXJzW2NdLmNvbnRhaW5lckNhY2hlLm92ZXI9MH19aWYodGhpcy5fc3RvcmVkQ3Vyc29yKXthKCJib2R5IikuY3NzKCJjdXJzb3IiLHRoaXMuX3N0b3JlZEN1cnNvcil9aWYodGhpcy5fc3RvcmVkT3BhY2l0eSl7dGhpcy5oZWxwZXIuY3NzKCJvcGFjaXR5Iix0aGlzLl9zdG9yZWRPcGFjaXR5KX1pZih0aGlzLl9zdG9yZWRaSW5kZXgpe3RoaXMuaGVscGVyLmNzcygiekluZGV4Iix0aGlzLl9zdG9yZWRaSW5kZXg9PSJhdXRvIj8iIjp0aGlzLl9zdG9yZWRaSW5kZXgpfXRoaXMuZHJhZ2dpbmc9ZmFsc2U7aWYodGhpcy5jYW5jZWxIZWxwZXJSZW1vdmFsKXtpZighZSl7dGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsZCx0aGlzLl91aUhhc2goKSk7Zm9yKHZhciBjPTA7YzxmLmxlbmd0aDtjKyspe2ZbY10uY2FsbCh0aGlzLGQpfXRoaXMuX3RyaWdnZXIoInN0b3AiLGQsdGhpcy5fdWlIYXNoKCkpfXJldHVybiBmYWxzZX1pZighZSl7dGhpcy5fdHJpZ2dlcigiYmVmb3JlU3RvcCIsZCx0aGlzLl91aUhhc2goKSl9dGhpcy5wbGFjZWhvbGRlclswXS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMucGxhY2Vob2xkZXJbMF0pO2lmKHRoaXMuaGVscGVyWzBdIT10aGlzLmN1cnJlbnRJdGVtWzBdKXt0aGlzLmhlbHBlci5yZW1vdmUoKX10aGlzLmhlbHBlcj1udWxsO2lmKCFlKXtmb3IodmFyIGM9MDtjPGYubGVuZ3RoO2MrKyl7ZltjXS5jYWxsKHRoaXMsZCl9dGhpcy5fdHJpZ2dlcigic3RvcCIsZCx0aGlzLl91aUhhc2goKSl9dGhpcy5mcm9tT3V0c2lkZT1mYWxzZTtyZXR1cm4gdHJ1ZX0sX3RyaWdnZXI6ZnVuY3Rpb24oKXtpZihhLndpZGdldC5wcm90b3R5cGUuX3RyaWdnZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpPT09ZmFsc2Upe3RoaXMuY2FuY2VsKCl9fSxfdWlIYXNoOmZ1bmN0aW9uKGMpe3ZhciBiPWN8fHRoaXM7cmV0dXJue2hlbHBlcjpiLmhlbHBlcixwbGFjZWhvbGRlcjpiLnBsYWNlaG9sZGVyfHxhKFtdKSxwb3NpdGlvbjpiLnBvc2l0aW9uLGFic29sdXRlUG9zaXRpb246Yi5wb3NpdGlvbkFicyxvZmZzZXQ6Yi5wb3NpdGlvbkFicyxpdGVtOmIuY3VycmVudEl0ZW0sc2VuZGVyOmM/Yy5lbGVtZW50Om51bGx9fX0pKTthLmV4dGVuZChhLnVpLnNvcnRhYmxlLHtnZXR0ZXI6InNlcmlhbGl6ZSB0b0FycmF5Iix2ZXJzaW9uOiIxLjcuMiIsZXZlbnRQcmVmaXg6InNvcnQiLGRlZmF1bHRzOnthcHBlbmRUbzoicGFyZW50IixheGlzOmZhbHNlLGNhbmNlbDoiOmlucHV0LG9wdGlvbiIsY29ubmVjdFdpdGg6ZmFsc2UsY29udGFpbm1lbnQ6ZmFsc2UsY3Vyc29yOiJhdXRvIixjdXJzb3JBdDpmYWxzZSxkZWxheTowLGRpc3RhbmNlOjEsZHJvcE9uRW1wdHk6dHJ1ZSxmb3JjZVBsYWNlaG9sZGVyU2l6ZTpmYWxzZSxmb3JjZUhlbHBlclNpemU6ZmFsc2UsZ3JpZDpmYWxzZSxoYW5kbGU6ZmFsc2UsaGVscGVyOiJvcmlnaW5hbCIsaXRlbXM6Ij4gKiIsb3BhY2l0eTpmYWxzZSxwbGFjZWhvbGRlcjpmYWxzZSxyZXZlcnQ6ZmFsc2Usc2Nyb2xsOnRydWUsc2Nyb2xsU2Vuc2l0aXZpdHk6MjAsc2Nyb2xsU3BlZWQ6MjAsc2NvcGU6ImRlZmF1bHQiLHRvbGVyYW5jZToiaW50ZXJzZWN0Iix6SW5kZXg6MTAwMH19KX0pKGpRdWVyeSk7Oy8qCiAqIGpRdWVyeSBVSSBBY2NvcmRpb24gMS43LjIKICoKICogQ29weXJpZ2h0IChjKSAyMDA5IEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkKICogYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICoKICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9BY2NvcmRpb24KICoKICogRGVwZW5kczoKICoJdWkuY29yZS5qcwogKi8KKGZ1bmN0aW9uKGEpe2Eud2lkZ2V0KCJ1aS5hY2NvcmRpb24iLHtfaW5pdDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3B0aW9ucyxiPXRoaXM7dGhpcy5ydW5uaW5nPTA7aWYoZC5jb2xsYXBzaWJsZT09YS51aS5hY2NvcmRpb24uZGVmYXVsdHMuY29sbGFwc2libGUmJmQuYWx3YXlzT3BlbiE9YS51aS5hY2NvcmRpb24uZGVmYXVsdHMuYWx3YXlzT3Blbil7ZC5jb2xsYXBzaWJsZT0hZC5hbHdheXNPcGVufWlmKGQubmF2aWdhdGlvbil7dmFyIGM9dGhpcy5lbGVtZW50LmZpbmQoImEiKS5maWx0ZXIoZC5uYXZpZ2F0aW9uRmlsdGVyKTtpZihjLmxlbmd0aCl7aWYoYy5maWx0ZXIoZC5oZWFkZXIpLmxlbmd0aCl7dGhpcy5hY3RpdmU9Y31lbHNle3RoaXMuYWN0aXZlPWMucGFyZW50KCkucGFyZW50KCkucHJldigpO2MuYWRkQ2xhc3MoInVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSIpfX19dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1hY2NvcmRpb24gdWktd2lkZ2V0IHVpLWhlbHBlci1yZXNldCIpO2lmKHRoaXMuZWxlbWVudFswXS5ub2RlTmFtZT09IlVMIil7dGhpcy5lbGVtZW50LmNoaWxkcmVuKCJsaSIpLmFkZENsYXNzKCJ1aS1hY2NvcmRpb24tbGktZml4Iil9dGhpcy5oZWFkZXJzPXRoaXMuZWxlbWVudC5maW5kKGQuaGVhZGVyKS5hZGRDbGFzcygidWktYWNjb3JkaW9uLWhlYWRlciB1aS1oZWxwZXItcmVzZXQgdWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIikuYmluZCgibW91c2VlbnRlci5hY2NvcmRpb24iLGZ1bmN0aW9uKCl7YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKX0pLmJpbmQoIm1vdXNlbGVhdmUuYWNjb3JkaW9uIixmdW5jdGlvbigpe2EodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIil9KS5iaW5kKCJmb2N1cy5hY2NvcmRpb24iLGZ1bmN0aW9uKCl7YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtZm9jdXMiKX0pLmJpbmQoImJsdXIuYWNjb3JkaW9uIixmdW5jdGlvbigpe2EodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWZvY3VzIil9KTt0aGlzLmhlYWRlcnMubmV4dCgpLmFkZENsYXNzKCJ1aS1hY2NvcmRpb24tY29udGVudCB1aS1oZWxwZXItcmVzZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSIpO3RoaXMuYWN0aXZlPXRoaXMuX2ZpbmRBY3RpdmUodGhpcy5hY3RpdmV8fGQuYWN0aXZlKS50b2dnbGVDbGFzcygidWktc3RhdGUtZGVmYXVsdCIpLnRvZ2dsZUNsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKS50b2dnbGVDbGFzcygidWktY29ybmVyLWFsbCIpLnRvZ2dsZUNsYXNzKCJ1aS1jb3JuZXItdG9wIik7dGhpcy5hY3RpdmUubmV4dCgpLmFkZENsYXNzKCJ1aS1hY2NvcmRpb24tY29udGVudC1hY3RpdmUiKTthKCI8c3Bhbi8+IikuYWRkQ2xhc3MoInVpLWljb24gIitkLmljb25zLmhlYWRlcikucHJlcGVuZFRvKHRoaXMuaGVhZGVycyk7dGhpcy5hY3RpdmUuZmluZCgiLnVpLWljb24iKS50b2dnbGVDbGFzcyhkLmljb25zLmhlYWRlcikudG9nZ2xlQ2xhc3MoZC5pY29ucy5oZWFkZXJTZWxlY3RlZCk7aWYoYS5icm93c2VyLm1zaWUpe3RoaXMuZWxlbWVudC5maW5kKCJhIikuY3NzKCJ6b29tIiwiMSIpfXRoaXMucmVzaXplKCk7dGhpcy5lbGVtZW50LmF0dHIoInJvbGUiLCJ0YWJsaXN0Iik7dGhpcy5oZWFkZXJzLmF0dHIoInJvbGUiLCJ0YWIiKS5iaW5kKCJrZXlkb3duIixmdW5jdGlvbihlKXtyZXR1cm4gYi5fa2V5ZG93bihlKX0pLm5leHQoKS5hdHRyKCJyb2xlIiwidGFicGFuZWwiKTt0aGlzLmhlYWRlcnMubm90KHRoaXMuYWN0aXZlfHwiIikuYXR0cigiYXJpYS1leHBhbmRlZCIsImZhbHNlIikuYXR0cigidGFiSW5kZXgiLCItMSIpLm5leHQoKS5oaWRlKCk7aWYoIXRoaXMuYWN0aXZlLmxlbmd0aCl7dGhpcy5oZWFkZXJzLmVxKDApLmF0dHIoInRhYkluZGV4IiwiMCIpfWVsc2V7dGhpcy5hY3RpdmUuYXR0cigiYXJpYS1leHBhbmRlZCIsInRydWUiKS5hdHRyKCJ0YWJJbmRleCIsIjAiKX1pZighYS5icm93c2VyLnNhZmFyaSl7dGhpcy5oZWFkZXJzLmZpbmQoImEiKS5hdHRyKCJ0YWJJbmRleCIsIi0xIil9aWYoZC5ldmVudCl7dGhpcy5oZWFkZXJzLmJpbmQoKGQuZXZlbnQpKyIuYWNjb3JkaW9uIixmdW5jdGlvbihlKXtyZXR1cm4gYi5fY2xpY2tIYW5kbGVyLmNhbGwoYixlLHRoaXMpfSl9fSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGM9dGhpcy5vcHRpb25zO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktYWNjb3JkaW9uIHVpLXdpZGdldCB1aS1oZWxwZXItcmVzZXQiKS5yZW1vdmVBdHRyKCJyb2xlIikudW5iaW5kKCIuYWNjb3JkaW9uIikucmVtb3ZlRGF0YSgiYWNjb3JkaW9uIik7dGhpcy5oZWFkZXJzLnVuYmluZCgiLmFjY29yZGlvbiIpLnJlbW92ZUNsYXNzKCJ1aS1hY2NvcmRpb24taGVhZGVyIHVpLWhlbHBlci1yZXNldCB1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtYWN0aXZlIHVpLWNvcm5lci10b3AiKS5yZW1vdmVBdHRyKCJyb2xlIikucmVtb3ZlQXR0cigiYXJpYS1leHBhbmRlZCIpLnJlbW92ZUF0dHIoInRhYmluZGV4Iik7dGhpcy5oZWFkZXJzLmZpbmQoImEiKS5yZW1vdmVBdHRyKCJ0YWJpbmRleCIpO3RoaXMuaGVhZGVycy5jaGlsZHJlbigiLnVpLWljb24iKS5yZW1vdmUoKTt2YXIgYj10aGlzLmhlYWRlcnMubmV4dCgpLmNzcygiZGlzcGxheSIsIiIpLnJlbW92ZUF0dHIoInJvbGUiKS5yZW1vdmVDbGFzcygidWktaGVscGVyLXJlc2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20gdWktYWNjb3JkaW9uLWNvbnRlbnQgdWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIik7aWYoYy5hdXRvSGVpZ2h0fHxjLmZpbGxIZWlnaHQpe2IuY3NzKCJoZWlnaHQiLCIiKX19LF9zZXREYXRhOmZ1bmN0aW9uKGIsYyl7aWYoYj09ImFsd2F5c09wZW4iKXtiPSJjb2xsYXBzaWJsZSI7Yz0hY31hLndpZGdldC5wcm90b3R5cGUuX3NldERhdGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxfa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgZz10aGlzLm9wdGlvbnMsZj1hLnVpLmtleUNvZGU7aWYoZy5kaXNhYmxlZHx8ZS5hbHRLZXl8fGUuY3RybEtleSl7cmV0dXJufXZhciBkPXRoaXMuaGVhZGVycy5sZW5ndGg7dmFyIGI9dGhpcy5oZWFkZXJzLmluZGV4KGUudGFyZ2V0KTt2YXIgYz1mYWxzZTtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIGYuUklHSFQ6Y2FzZSBmLkRPV046Yz10aGlzLmhlYWRlcnNbKGIrMSklZF07YnJlYWs7Y2FzZSBmLkxFRlQ6Y2FzZSBmLlVQOmM9dGhpcy5oZWFkZXJzWyhiLTErZCklZF07YnJlYWs7Y2FzZSBmLlNQQUNFOmNhc2UgZi5FTlRFUjpyZXR1cm4gdGhpcy5fY2xpY2tIYW5kbGVyKHt0YXJnZXQ6ZS50YXJnZXR9LGUudGFyZ2V0KX1pZihjKXthKGUudGFyZ2V0KS5hdHRyKCJ0YWJJbmRleCIsIi0xIik7YShjKS5hdHRyKCJ0YWJJbmRleCIsIjAiKTtjLmZvY3VzKCk7cmV0dXJuIGZhbHNlfXJldHVybiB0cnVlfSxyZXNpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnMsZDtpZihlLmZpbGxTcGFjZSl7aWYoYS5icm93c2VyLm1zaWUpe3ZhciBiPXRoaXMuZWxlbWVudC5wYXJlbnQoKS5jc3MoIm92ZXJmbG93Iik7dGhpcy5lbGVtZW50LnBhcmVudCgpLmNzcygib3ZlcmZsb3ciLCJoaWRkZW4iKX1kPXRoaXMuZWxlbWVudC5wYXJlbnQoKS5oZWlnaHQoKTtpZihhLmJyb3dzZXIubXNpZSl7dGhpcy5lbGVtZW50LnBhcmVudCgpLmNzcygib3ZlcmZsb3ciLGIpfXRoaXMuaGVhZGVycy5lYWNoKGZ1bmN0aW9uKCl7ZC09YSh0aGlzKS5vdXRlckhlaWdodCgpfSk7dmFyIGM9MDt0aGlzLmhlYWRlcnMubmV4dCgpLmVhY2goZnVuY3Rpb24oKXtjPU1hdGgubWF4KGMsYSh0aGlzKS5pbm5lckhlaWdodCgpLWEodGhpcykuaGVpZ2h0KCkpfSkuaGVpZ2h0KE1hdGgubWF4KDAsZC1jKSkuY3NzKCJvdmVyZmxvdyIsImF1dG8iKX1lbHNle2lmKGUuYXV0b0hlaWdodCl7ZD0wO3RoaXMuaGVhZGVycy5uZXh0KCkuZWFjaChmdW5jdGlvbigpe2Q9TWF0aC5tYXgoZCxhKHRoaXMpLm91dGVySGVpZ2h0KCkpfSkuaGVpZ2h0KGQpfX19LGFjdGl2YXRlOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuX2ZpbmRBY3RpdmUoYilbMF07dGhpcy5fY2xpY2tIYW5kbGVyKHt0YXJnZXQ6Y30sYyl9LF9maW5kQWN0aXZlOmZ1bmN0aW9uKGIpe3JldHVybiBiP3R5cGVvZiBiPT0ibnVtYmVyIj90aGlzLmhlYWRlcnMuZmlsdGVyKCI6ZXEoIitiKyIpIik6dGhpcy5oZWFkZXJzLm5vdCh0aGlzLmhlYWRlcnMubm90KGIpKTpiPT09ZmFsc2U/YShbXSk6dGhpcy5oZWFkZXJzLmZpbHRlcigiOmVxKDApIil9LF9jbGlja0hhbmRsZXI6ZnVuY3Rpb24oYixmKXt2YXIgZD10aGlzLm9wdGlvbnM7aWYoZC5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfWlmKCFiLnRhcmdldCYmZC5jb2xsYXBzaWJsZSl7dGhpcy5hY3RpdmUucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSB1aS1jb3JuZXItdG9wIikuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIpLmZpbmQoIi51aS1pY29uIikucmVtb3ZlQ2xhc3MoZC5pY29ucy5oZWFkZXJTZWxlY3RlZCkuYWRkQ2xhc3MoZC5pY29ucy5oZWFkZXIpO3RoaXMuYWN0aXZlLm5leHQoKS5hZGRDbGFzcygidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIik7dmFyIGg9dGhpcy5hY3RpdmUubmV4dCgpLGU9e29wdGlvbnM6ZCxuZXdIZWFkZXI6YShbXSksb2xkSGVhZGVyOmQuYWN0aXZlLG5ld0NvbnRlbnQ6YShbXSksb2xkQ29udGVudDpofSxjPSh0aGlzLmFjdGl2ZT1hKFtdKSk7dGhpcy5fdG9nZ2xlKGMsaCxlKTtyZXR1cm4gZmFsc2V9dmFyIGc9YShiLmN1cnJlbnRUYXJnZXR8fGYpO3ZhciBpPWdbMF09PXRoaXMuYWN0aXZlWzBdO2lmKHRoaXMucnVubmluZ3x8KCFkLmNvbGxhcHNpYmxlJiZpKSl7cmV0dXJuIGZhbHNlfXRoaXMuYWN0aXZlLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUgdWktY29ybmVyLXRvcCIpLmFkZENsYXNzKCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwiKS5maW5kKCIudWktaWNvbiIpLnJlbW92ZUNsYXNzKGQuaWNvbnMuaGVhZGVyU2VsZWN0ZWQpLmFkZENsYXNzKGQuaWNvbnMuaGVhZGVyKTt0aGlzLmFjdGl2ZS5uZXh0KCkuYWRkQ2xhc3MoInVpLWFjY29yZGlvbi1jb250ZW50LWFjdGl2ZSIpO2lmKCFpKXtnLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci1hbGwiKS5hZGRDbGFzcygidWktc3RhdGUtYWN0aXZlIHVpLWNvcm5lci10b3AiKS5maW5kKCIudWktaWNvbiIpLnJlbW92ZUNsYXNzKGQuaWNvbnMuaGVhZGVyKS5hZGRDbGFzcyhkLmljb25zLmhlYWRlclNlbGVjdGVkKTtnLm5leHQoKS5hZGRDbGFzcygidWktYWNjb3JkaW9uLWNvbnRlbnQtYWN0aXZlIil9dmFyIGM9Zy5uZXh0KCksaD10aGlzLmFjdGl2ZS5uZXh0KCksZT17b3B0aW9uczpkLG5ld0hlYWRlcjppJiZkLmNvbGxhcHNpYmxlP2EoW10pOmcsb2xkSGVhZGVyOnRoaXMuYWN0aXZlLG5ld0NvbnRlbnQ6aSYmZC5jb2xsYXBzaWJsZT9hKFtdKTpjLmZpbmQoIj4gKiIpLG9sZENvbnRlbnQ6aC5maW5kKCI+ICoiKX0saj10aGlzLmhlYWRlcnMuaW5kZXgodGhpcy5hY3RpdmVbMF0pPnRoaXMuaGVhZGVycy5pbmRleChnWzBdKTt0aGlzLmFjdGl2ZT1pP2EoW10pOmc7dGhpcy5fdG9nZ2xlKGMsaCxlLGksaik7cmV0dXJuIGZhbHNlfSxfdG9nZ2xlOmZ1bmN0aW9uKGIsaSxnLGosayl7dmFyIGQ9dGhpcy5vcHRpb25zLG09dGhpczt0aGlzLnRvU2hvdz1iO3RoaXMudG9IaWRlPWk7dGhpcy5kYXRhPWc7dmFyIGM9ZnVuY3Rpb24oKXtpZighbSl7cmV0dXJufXJldHVybiBtLl9jb21wbGV0ZWQuYXBwbHkobSxhcmd1bWVudHMpfTt0aGlzLl90cmlnZ2VyKCJjaGFuZ2VzdGFydCIsbnVsbCx0aGlzLmRhdGEpO3RoaXMucnVubmluZz1pLnNpemUoKT09PTA/Yi5zaXplKCk6aS5zaXplKCk7aWYoZC5hbmltYXRlZCl7dmFyIGY9e307aWYoZC5jb2xsYXBzaWJsZSYmail7Zj17dG9TaG93OmEoW10pLHRvSGlkZTppLGNvbXBsZXRlOmMsZG93bjprLGF1dG9IZWlnaHQ6ZC5hdXRvSGVpZ2h0fHxkLmZpbGxTcGFjZX19ZWxzZXtmPXt0b1Nob3c6Yix0b0hpZGU6aSxjb21wbGV0ZTpjLGRvd246ayxhdXRvSGVpZ2h0OmQuYXV0b0hlaWdodHx8ZC5maWxsU3BhY2V9fWlmKCFkLnByb3hpZWQpe2QucHJveGllZD1kLmFuaW1hdGVkfWlmKCFkLnByb3hpZWREdXJhdGlvbil7ZC5wcm94aWVkRHVyYXRpb249ZC5kdXJhdGlvbn1kLmFuaW1hdGVkPWEuaXNGdW5jdGlvbihkLnByb3hpZWQpP2QucHJveGllZChmKTpkLnByb3hpZWQ7ZC5kdXJhdGlvbj1hLmlzRnVuY3Rpb24oZC5wcm94aWVkRHVyYXRpb24pP2QucHJveGllZER1cmF0aW9uKGYpOmQucHJveGllZER1cmF0aW9uO3ZhciBsPWEudWkuYWNjb3JkaW9uLmFuaW1hdGlvbnMsZT1kLmR1cmF0aW9uLGg9ZC5hbmltYXRlZDtpZighbFtoXSl7bFtoXT1mdW5jdGlvbihuKXt0aGlzLnNsaWRlKG4se2Vhc2luZzpoLGR1cmF0aW9uOmV8fDcwMH0pfX1sW2hdKGYpfWVsc2V7aWYoZC5jb2xsYXBzaWJsZSYmail7Yi50b2dnbGUoKX1lbHNle2kuaGlkZSgpO2Iuc2hvdygpfWModHJ1ZSl9aS5wcmV2KCkuYXR0cigiYXJpYS1leHBhbmRlZCIsImZhbHNlIikuYXR0cigidGFiSW5kZXgiLCItMSIpLmJsdXIoKTtiLnByZXYoKS5hdHRyKCJhcmlhLWV4cGFuZGVkIiwidHJ1ZSIpLmF0dHIoInRhYkluZGV4IiwiMCIpLmZvY3VzKCl9LF9jb21wbGV0ZWQ6ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5vcHRpb25zO3RoaXMucnVubmluZz1iPzA6LS10aGlzLnJ1bm5pbmc7aWYodGhpcy5ydW5uaW5nKXtyZXR1cm59aWYoYy5jbGVhclN0eWxlKXt0aGlzLnRvU2hvdy5hZGQodGhpcy50b0hpZGUpLmNzcyh7aGVpZ2h0OiIiLG92ZXJmbG93OiIifSl9dGhpcy5fdHJpZ2dlcigiY2hhbmdlIixudWxsLHRoaXMuZGF0YSl9fSk7YS5leHRlbmQoYS51aS5hY2NvcmRpb24se3ZlcnNpb246IjEuNy4yIixkZWZhdWx0czp7YWN0aXZlOm51bGwsYWx3YXlzT3Blbjp0cnVlLGFuaW1hdGVkOiJzbGlkZSIsYXV0b0hlaWdodDp0cnVlLGNsZWFyU3R5bGU6ZmFsc2UsY29sbGFwc2libGU6ZmFsc2UsZXZlbnQ6ImNsaWNrIixmaWxsU3BhY2U6ZmFsc2UsaGVhZGVyOiI+IGxpID4gOmZpcnN0LWNoaWxkLD4gOm5vdChsaSk6ZXZlbiIsaWNvbnM6e2hlYWRlcjoidWktaWNvbi10cmlhbmdsZS0xLWUiLGhlYWRlclNlbGVjdGVkOiJ1aS1pY29uLXRyaWFuZ2xlLTEtcyJ9LG5hdmlnYXRpb246ZmFsc2UsbmF2aWdhdGlvbkZpbHRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhyZWYudG9Mb3dlckNhc2UoKT09bG9jYXRpb24uaHJlZi50b0xvd2VyQ2FzZSgpfX0sYW5pbWF0aW9uczp7c2xpZGU6ZnVuY3Rpb24oaixoKXtqPWEuZXh0ZW5kKHtlYXNpbmc6InN3aW5nIixkdXJhdGlvbjozMDB9LGosaCk7aWYoIWoudG9IaWRlLnNpemUoKSl7ai50b1Nob3cuYW5pbWF0ZSh7aGVpZ2h0OiJzaG93In0saik7cmV0dXJufWlmKCFqLnRvU2hvdy5zaXplKCkpe2oudG9IaWRlLmFuaW1hdGUoe2hlaWdodDoiaGlkZSJ9LGopO3JldHVybn12YXIgYz1qLnRvU2hvdy5jc3MoIm92ZXJmbG93IiksZyxkPXt9LGY9e30sZT1bImhlaWdodCIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIl0sYjt2YXIgaT1qLnRvU2hvdztiPWlbMF0uc3R5bGUud2lkdGg7aS53aWR0aChwYXJzZUludChpLnBhcmVudCgpLndpZHRoKCksMTApLXBhcnNlSW50KGkuY3NzKCJwYWRkaW5nTGVmdCIpLDEwKS1wYXJzZUludChpLmNzcygicGFkZGluZ1JpZ2h0IiksMTApLShwYXJzZUludChpLmNzcygiYm9yZGVyTGVmdFdpZHRoIiksMTApfHwwKS0ocGFyc2VJbnQoaS5jc3MoImJvcmRlclJpZ2h0V2lkdGgiKSwxMCl8fDApKTthLmVhY2goZSxmdW5jdGlvbihrLG0pe2ZbbV09ImhpZGUiO3ZhciBsPSgiIithLmNzcyhqLnRvU2hvd1swXSxtKSkubWF0Y2goL14oW1xkKy0uXSspKC4qKSQvKTtkW21dPXt2YWx1ZTpsWzFdLHVuaXQ6bFsyXXx8InB4In19KTtqLnRvU2hvdy5jc3Moe2hlaWdodDowLG92ZXJmbG93OiJoaWRkZW4ifSkuc2hvdygpO2oudG9IaWRlLmZpbHRlcigiOmhpZGRlbiIpLmVhY2goai5jb21wbGV0ZSkuZW5kKCkuZmlsdGVyKCI6dmlzaWJsZSIpLmFuaW1hdGUoZix7c3RlcDpmdW5jdGlvbihrLGwpe2lmKGwucHJvcD09ImhlaWdodCIpe2c9KGwubm93LWwuc3RhcnQpLyhsLmVuZC1sLnN0YXJ0KX1qLnRvU2hvd1swXS5zdHlsZVtsLnByb3BdPShnKmRbbC5wcm9wXS52YWx1ZSkrZFtsLnByb3BdLnVuaXR9LGR1cmF0aW9uOmouZHVyYXRpb24sZWFzaW5nOmouZWFzaW5nLGNvbXBsZXRlOmZ1bmN0aW9uKCl7aWYoIWouYXV0b0hlaWdodCl7ai50b1Nob3cuY3NzKCJoZWlnaHQiLCIiKX1qLnRvU2hvdy5jc3MoIndpZHRoIixiKTtqLnRvU2hvdy5jc3Moe292ZXJmbG93OmN9KTtqLmNvbXBsZXRlKCl9fSl9LGJvdW5jZXNsaWRlOmZ1bmN0aW9uKGIpe3RoaXMuc2xpZGUoYix7ZWFzaW5nOmIuZG93bj8iZWFzZU91dEJvdW5jZSI6InN3aW5nIixkdXJhdGlvbjpiLmRvd24/MTAwMDoyMDB9KX0sZWFzZXNsaWRlOmZ1bmN0aW9uKGIpe3RoaXMuc2xpZGUoYix7ZWFzaW5nOiJlYXNlaW5vdXQiLGR1cmF0aW9uOjcwMH0pfX19KX0pKGpRdWVyeSk7Oy8qCiAqIGpRdWVyeSBVSSBEaWFsb2cgMS43LjIKICoKICogQ29weXJpZ2h0IChjKSAyMDA5IEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkKICogYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICoKICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9EaWFsb2cKICoKICogRGVwZW5kczoKICoJdWkuY29yZS5qcwogKgl1aS5kcmFnZ2FibGUuanMKICoJdWkucmVzaXphYmxlLmpzCiAqLwooZnVuY3Rpb24oYyl7dmFyIGI9e2RyYWdTdGFydDoic3RhcnQuZHJhZ2dhYmxlIixkcmFnOiJkcmFnLmRyYWdnYWJsZSIsZHJhZ1N0b3A6InN0b3AuZHJhZ2dhYmxlIixtYXhIZWlnaHQ6Im1heEhlaWdodC5yZXNpemFibGUiLG1pbkhlaWdodDoibWluSGVpZ2h0LnJlc2l6YWJsZSIsbWF4V2lkdGg6Im1heFdpZHRoLnJlc2l6YWJsZSIsbWluV2lkdGg6Im1pbldpZHRoLnJlc2l6YWJsZSIscmVzaXplU3RhcnQ6InN0YXJ0LnJlc2l6YWJsZSIscmVzaXplOiJkcmFnLnJlc2l6YWJsZSIscmVzaXplU3RvcDoic3RvcC5yZXNpemFibGUifSxhPSJ1aS1kaWFsb2cgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgIjtjLndpZGdldCgidWkuZGlhbG9nIix7X2luaXQ6ZnVuY3Rpb24oKXt0aGlzLm9yaWdpbmFsVGl0bGU9dGhpcy5lbGVtZW50LmF0dHIoInRpdGxlIik7dmFyIGw9dGhpcyxtPXRoaXMub3B0aW9ucyxqPW0udGl0bGV8fHRoaXMub3JpZ2luYWxUaXRsZXx8IiZuYnNwOyIsZT1jLnVpLmRpYWxvZy5nZXRUaXRsZUlkKHRoaXMuZWxlbWVudCksaz0odGhpcy51aURpYWxvZz1jKCI8ZGl2Lz4iKSkuYXBwZW5kVG8oZG9jdW1lbnQuYm9keSkuaGlkZSgpLmFkZENsYXNzKGErbS5kaWFsb2dDbGFzcykuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLG92ZXJmbG93OiJoaWRkZW4iLHpJbmRleDptLnpJbmRleH0pLmF0dHIoInRhYkluZGV4IiwtMSkuY3NzKCJvdXRsaW5lIiwwKS5rZXlkb3duKGZ1bmN0aW9uKG4peyhtLmNsb3NlT25Fc2NhcGUmJm4ua2V5Q29kZSYmbi5rZXlDb2RlPT1jLnVpLmtleUNvZGUuRVNDQVBFJiZsLmNsb3NlKG4pKX0pLmF0dHIoe3JvbGU6ImRpYWxvZyIsImFyaWEtbGFiZWxsZWRieSI6ZX0pLm1vdXNlZG93bihmdW5jdGlvbihuKXtsLm1vdmVUb1RvcChmYWxzZSxuKX0pLGc9dGhpcy5lbGVtZW50LnNob3coKS5yZW1vdmVBdHRyKCJ0aXRsZSIpLmFkZENsYXNzKCJ1aS1kaWFsb2ctY29udGVudCB1aS13aWRnZXQtY29udGVudCIpLmFwcGVuZFRvKGspLGY9KHRoaXMudWlEaWFsb2dUaXRsZWJhcj1jKCI8ZGl2PjwvZGl2PiIpKS5hZGRDbGFzcygidWktZGlhbG9nLXRpdGxlYmFyIHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbCB1aS1oZWxwZXItY2xlYXJmaXgiKS5wcmVwZW5kVG8oayksaT1jKCc8YSBocmVmPSIjIi8+JykuYWRkQ2xhc3MoInVpLWRpYWxvZy10aXRsZWJhci1jbG9zZSB1aS1jb3JuZXItYWxsIikuYXR0cigicm9sZSIsImJ1dHRvbiIpLmhvdmVyKGZ1bmN0aW9uKCl7aS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKX0sZnVuY3Rpb24oKXtpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpfSkuZm9jdXMoZnVuY3Rpb24oKXtpLmFkZENsYXNzKCJ1aS1zdGF0ZS1mb2N1cyIpfSkuYmx1cihmdW5jdGlvbigpe2kucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWZvY3VzIil9KS5tb3VzZWRvd24oZnVuY3Rpb24obil7bi5zdG9wUHJvcGFnYXRpb24oKX0pLmNsaWNrKGZ1bmN0aW9uKG4pe2wuY2xvc2Uobik7cmV0dXJuIGZhbHNlfSkuYXBwZW5kVG8oZiksaD0odGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2VUZXh0PWMoIjxzcGFuLz4iKSkuYWRkQ2xhc3MoInVpLWljb24gdWktaWNvbi1jbG9zZXRoaWNrIikudGV4dChtLmNsb3NlVGV4dCkuYXBwZW5kVG8oaSksZD1jKCI8c3Bhbi8+IikuYWRkQ2xhc3MoInVpLWRpYWxvZy10aXRsZSIpLmF0dHIoImlkIixlKS5odG1sKGopLnByZXBlbmRUbyhmKTtmLmZpbmQoIioiKS5hZGQoZikuZGlzYWJsZVNlbGVjdGlvbigpOyhtLmRyYWdnYWJsZSYmYy5mbi5kcmFnZ2FibGUmJnRoaXMuX21ha2VEcmFnZ2FibGUoKSk7KG0ucmVzaXphYmxlJiZjLmZuLnJlc2l6YWJsZSYmdGhpcy5fbWFrZVJlc2l6YWJsZSgpKTt0aGlzLl9jcmVhdGVCdXR0b25zKG0uYnV0dG9ucyk7dGhpcy5faXNPcGVuPWZhbHNlOyhtLmJnaWZyYW1lJiZjLmZuLmJnaWZyYW1lJiZrLmJnaWZyYW1lKCkpOyhtLmF1dG9PcGVuJiZ0aGlzLm9wZW4oKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXsodGhpcy5vdmVybGF5JiZ0aGlzLm92ZXJsYXkuZGVzdHJveSgpKTt0aGlzLnVpRGlhbG9nLmhpZGUoKTt0aGlzLmVsZW1lbnQudW5iaW5kKCIuZGlhbG9nIikucmVtb3ZlRGF0YSgiZGlhbG9nIikucmVtb3ZlQ2xhc3MoInVpLWRpYWxvZy1jb250ZW50IHVpLXdpZGdldC1jb250ZW50IikuaGlkZSgpLmFwcGVuZFRvKCJib2R5Iik7dGhpcy51aURpYWxvZy5yZW1vdmUoKTsodGhpcy5vcmlnaW5hbFRpdGxlJiZ0aGlzLmVsZW1lbnQuYXR0cigidGl0bGUiLHRoaXMub3JpZ2luYWxUaXRsZSkpfSxjbG9zZTpmdW5jdGlvbihmKXt2YXIgZD10aGlzO2lmKGZhbHNlPT09ZC5fdHJpZ2dlcigiYmVmb3JlY2xvc2UiLGYpKXtyZXR1cm59KGQub3ZlcmxheSYmZC5vdmVybGF5LmRlc3Ryb3koKSk7ZC51aURpYWxvZy51bmJpbmQoImtleXByZXNzLnVpLWRpYWxvZyIpOyhkLm9wdGlvbnMuaGlkZT9kLnVpRGlhbG9nLmhpZGUoZC5vcHRpb25zLmhpZGUsZnVuY3Rpb24oKXtkLl90cmlnZ2VyKCJjbG9zZSIsZil9KTpkLnVpRGlhbG9nLmhpZGUoKSYmZC5fdHJpZ2dlcigiY2xvc2UiLGYpKTtjLnVpLmRpYWxvZy5vdmVybGF5LnJlc2l6ZSgpO2QuX2lzT3Blbj1mYWxzZTtpZihkLm9wdGlvbnMubW9kYWwpe3ZhciBlPTA7YygiLnVpLWRpYWxvZyIpLmVhY2goZnVuY3Rpb24oKXtpZih0aGlzIT1kLnVpRGlhbG9nWzBdKXtlPU1hdGgubWF4KGUsYyh0aGlzKS5jc3MoInotaW5kZXgiKSl9fSk7Yy51aS5kaWFsb2cubWF4Wj1lfX0saXNPcGVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzT3Blbn0sbW92ZVRvVG9wOmZ1bmN0aW9uKGYsZSl7aWYoKHRoaXMub3B0aW9ucy5tb2RhbCYmIWYpfHwoIXRoaXMub3B0aW9ucy5zdGFjayYmIXRoaXMub3B0aW9ucy5tb2RhbCkpe3JldHVybiB0aGlzLl90cmlnZ2VyKCJmb2N1cyIsZSl9aWYodGhpcy5vcHRpb25zLnpJbmRleD5jLnVpLmRpYWxvZy5tYXhaKXtjLnVpLmRpYWxvZy5tYXhaPXRoaXMub3B0aW9ucy56SW5kZXh9KHRoaXMub3ZlcmxheSYmdGhpcy5vdmVybGF5LiRlbC5jc3MoInotaW5kZXgiLGMudWkuZGlhbG9nLm92ZXJsYXkubWF4Wj0rK2MudWkuZGlhbG9nLm1heFopKTt2YXIgZD17c2Nyb2xsVG9wOnRoaXMuZWxlbWVudC5hdHRyKCJzY3JvbGxUb3AiKSxzY3JvbGxMZWZ0OnRoaXMuZWxlbWVudC5hdHRyKCJzY3JvbGxMZWZ0Iil9O3RoaXMudWlEaWFsb2cuY3NzKCJ6LWluZGV4IiwrK2MudWkuZGlhbG9nLm1heFopO3RoaXMuZWxlbWVudC5hdHRyKGQpO3RoaXMuX3RyaWdnZXIoImZvY3VzIixlKX0sb3BlbjpmdW5jdGlvbigpe2lmKHRoaXMuX2lzT3Blbil7cmV0dXJufXZhciBlPXRoaXMub3B0aW9ucyxkPXRoaXMudWlEaWFsb2c7dGhpcy5vdmVybGF5PWUubW9kYWw/bmV3IGMudWkuZGlhbG9nLm92ZXJsYXkodGhpcyk6bnVsbDsoZC5uZXh0KCkubGVuZ3RoJiZkLmFwcGVuZFRvKCJib2R5IikpO3RoaXMuX3NpemUoKTt0aGlzLl9wb3NpdGlvbihlLnBvc2l0aW9uKTtkLnNob3coZS5zaG93KTt0aGlzLm1vdmVUb1RvcCh0cnVlKTsoZS5tb2RhbCYmZC5iaW5kKCJrZXlwcmVzcy51aS1kaWFsb2ciLGZ1bmN0aW9uKGgpe2lmKGgua2V5Q29kZSE9Yy51aS5rZXlDb2RlLlRBQil7cmV0dXJufXZhciBnPWMoIjp0YWJiYWJsZSIsdGhpcyksaT1nLmZpbHRlcigiOmZpcnN0IilbMF0sZj1nLmZpbHRlcigiOmxhc3QiKVswXTtpZihoLnRhcmdldD09ZiYmIWguc2hpZnRLZXkpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpLmZvY3VzKCl9LDEpfWVsc2V7aWYoaC50YXJnZXQ9PWkmJmguc2hpZnRLZXkpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtmLmZvY3VzKCl9LDEpfX19KSk7YyhbXSkuYWRkKGQuZmluZCgiLnVpLWRpYWxvZy1jb250ZW50IDp0YWJiYWJsZTpmaXJzdCIpKS5hZGQoZC5maW5kKCIudWktZGlhbG9nLWJ1dHRvbnBhbmUgOnRhYmJhYmxlOmZpcnN0IikpLmFkZChkKS5maWx0ZXIoIjpmaXJzdCIpLmZvY3VzKCk7dGhpcy5fdHJpZ2dlcigib3BlbiIpO3RoaXMuX2lzT3Blbj10cnVlfSxfY3JlYXRlQnV0dG9uczpmdW5jdGlvbihnKXt2YXIgZj10aGlzLGQ9ZmFsc2UsZT1jKCI8ZGl2PjwvZGl2PiIpLmFkZENsYXNzKCJ1aS1kaWFsb2ctYnV0dG9ucGFuZSB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXgiKTt0aGlzLnVpRGlhbG9nLmZpbmQoIi51aS1kaWFsb2ctYnV0dG9ucGFuZSIpLnJlbW92ZSgpOyh0eXBlb2YgZz09Im9iamVjdCImJmchPT1udWxsJiZjLmVhY2goZyxmdW5jdGlvbigpe3JldHVybiAhKGQ9dHJ1ZSl9KSk7aWYoZCl7Yy5lYWNoKGcsZnVuY3Rpb24oaCxpKXtjKCc8YnV0dG9uIHR5cGU9ImJ1dHRvbiI+PC9idXR0b24+JykuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLWFsbCIpLnRleHQoaCkuY2xpY2soZnVuY3Rpb24oKXtpLmFwcGx5KGYuZWxlbWVudFswXSxhcmd1bWVudHMpfSkuaG92ZXIoZnVuY3Rpb24oKXtjKHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpfSxmdW5jdGlvbigpe2ModGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIil9KS5mb2N1cyhmdW5jdGlvbigpe2ModGhpcykuYWRkQ2xhc3MoInVpLXN0YXRlLWZvY3VzIil9KS5ibHVyKGZ1bmN0aW9uKCl7Yyh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtZm9jdXMiKX0pLmFwcGVuZFRvKGUpfSk7ZS5hcHBlbmRUbyh0aGlzLnVpRGlhbG9nKX19LF9tYWtlRHJhZ2dhYmxlOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcyxmPXRoaXMub3B0aW9ucyxlO3RoaXMudWlEaWFsb2cuZHJhZ2dhYmxlKHtjYW5jZWw6Ii51aS1kaWFsb2ctY29udGVudCIsaGFuZGxlOiIudWktZGlhbG9nLXRpdGxlYmFyIixjb250YWlubWVudDoiZG9jdW1lbnQiLHN0YXJ0OmZ1bmN0aW9uKCl7ZT1mLmhlaWdodDtjKHRoaXMpLmhlaWdodChjKHRoaXMpLmhlaWdodCgpKS5hZGRDbGFzcygidWktZGlhbG9nLWRyYWdnaW5nIik7KGYuZHJhZ1N0YXJ0JiZmLmRyYWdTdGFydC5hcHBseShkLmVsZW1lbnRbMF0sYXJndW1lbnRzKSl9LGRyYWc6ZnVuY3Rpb24oKXsoZi5kcmFnJiZmLmRyYWcuYXBwbHkoZC5lbGVtZW50WzBdLGFyZ3VtZW50cykpfSxzdG9wOmZ1bmN0aW9uKCl7Yyh0aGlzKS5yZW1vdmVDbGFzcygidWktZGlhbG9nLWRyYWdnaW5nIikuaGVpZ2h0KGUpOyhmLmRyYWdTdG9wJiZmLmRyYWdTdG9wLmFwcGx5KGQuZWxlbWVudFswXSxhcmd1bWVudHMpKTtjLnVpLmRpYWxvZy5vdmVybGF5LnJlc2l6ZSgpfX0pfSxfbWFrZVJlc2l6YWJsZTpmdW5jdGlvbihnKXtnPShnPT09dW5kZWZpbmVkP3RoaXMub3B0aW9ucy5yZXNpemFibGU6Zyk7dmFyIGQ9dGhpcyxmPXRoaXMub3B0aW9ucyxlPXR5cGVvZiBnPT0ic3RyaW5nIj9nOiJuLGUscyx3LHNlLHN3LG5lLG53Ijt0aGlzLnVpRGlhbG9nLnJlc2l6YWJsZSh7Y2FuY2VsOiIudWktZGlhbG9nLWNvbnRlbnQiLGFsc29SZXNpemU6dGhpcy5lbGVtZW50LG1heFdpZHRoOmYubWF4V2lkdGgsbWF4SGVpZ2h0OmYubWF4SGVpZ2h0LG1pbldpZHRoOmYubWluV2lkdGgsbWluSGVpZ2h0OmYubWluSGVpZ2h0LHN0YXJ0OmZ1bmN0aW9uKCl7Yyh0aGlzKS5hZGRDbGFzcygidWktZGlhbG9nLXJlc2l6aW5nIik7KGYucmVzaXplU3RhcnQmJmYucmVzaXplU3RhcnQuYXBwbHkoZC5lbGVtZW50WzBdLGFyZ3VtZW50cykpfSxyZXNpemU6ZnVuY3Rpb24oKXsoZi5yZXNpemUmJmYucmVzaXplLmFwcGx5KGQuZWxlbWVudFswXSxhcmd1bWVudHMpKX0saGFuZGxlczplLHN0b3A6ZnVuY3Rpb24oKXtjKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kaWFsb2ctcmVzaXppbmciKTtmLmhlaWdodD1jKHRoaXMpLmhlaWdodCgpO2Yud2lkdGg9Yyh0aGlzKS53aWR0aCgpOyhmLnJlc2l6ZVN0b3AmJmYucmVzaXplU3RvcC5hcHBseShkLmVsZW1lbnRbMF0sYXJndW1lbnRzKSk7Yy51aS5kaWFsb2cub3ZlcmxheS5yZXNpemUoKX19KS5maW5kKCIudWktcmVzaXphYmxlLXNlIikuYWRkQ2xhc3MoInVpLWljb24gdWktaWNvbi1ncmlwLWRpYWdvbmFsLXNlIil9LF9wb3NpdGlvbjpmdW5jdGlvbihpKXt2YXIgZT1jKHdpbmRvdyksZj1jKGRvY3VtZW50KSxnPWYuc2Nyb2xsVG9wKCksZD1mLnNjcm9sbExlZnQoKSxoPWc7aWYoYy5pbkFycmF5KGksWyJjZW50ZXIiLCJ0b3AiLCJyaWdodCIsImJvdHRvbSIsImxlZnQiXSk+PTApe2k9W2k9PSJyaWdodCJ8fGk9PSJsZWZ0Ij9pOiJjZW50ZXIiLGk9PSJ0b3AifHxpPT0iYm90dG9tIj9pOiJtaWRkbGUiXX1pZihpLmNvbnN0cnVjdG9yIT1BcnJheSl7aT1bImNlbnRlciIsIm1pZGRsZSJdfWlmKGlbMF0uY29uc3RydWN0b3I9PU51bWJlcil7ZCs9aVswXX1lbHNle3N3aXRjaChpWzBdKXtjYXNlImxlZnQiOmQrPTA7YnJlYWs7Y2FzZSJyaWdodCI6ZCs9ZS53aWR0aCgpLXRoaXMudWlEaWFsb2cub3V0ZXJXaWR0aCgpO2JyZWFrO2RlZmF1bHQ6Y2FzZSJjZW50ZXIiOmQrPShlLndpZHRoKCktdGhpcy51aURpYWxvZy5vdXRlcldpZHRoKCkpLzJ9fWlmKGlbMV0uY29uc3RydWN0b3I9PU51bWJlcil7Zys9aVsxXX1lbHNle3N3aXRjaChpWzFdKXtjYXNlInRvcCI6Zys9MDticmVhaztjYXNlImJvdHRvbSI6Zys9ZS5oZWlnaHQoKS10aGlzLnVpRGlhbG9nLm91dGVySGVpZ2h0KCk7YnJlYWs7ZGVmYXVsdDpjYXNlIm1pZGRsZSI6Zys9KGUuaGVpZ2h0KCktdGhpcy51aURpYWxvZy5vdXRlckhlaWdodCgpKS8yfX1nPU1hdGgubWF4KGcsaCk7dGhpcy51aURpYWxvZy5jc3Moe3RvcDpnLGxlZnQ6ZH0pfSxfc2V0RGF0YTpmdW5jdGlvbihlLGYpeyhiW2VdJiZ0aGlzLnVpRGlhbG9nLmRhdGEoYltlXSxmKSk7c3dpdGNoKGUpe2Nhc2UiYnV0dG9ucyI6dGhpcy5fY3JlYXRlQnV0dG9ucyhmKTticmVhaztjYXNlImNsb3NlVGV4dCI6dGhpcy51aURpYWxvZ1RpdGxlYmFyQ2xvc2VUZXh0LnRleHQoZik7YnJlYWs7Y2FzZSJkaWFsb2dDbGFzcyI6dGhpcy51aURpYWxvZy5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuZGlhbG9nQ2xhc3MpLmFkZENsYXNzKGErZik7YnJlYWs7Y2FzZSJkcmFnZ2FibGUiOihmP3RoaXMuX21ha2VEcmFnZ2FibGUoKTp0aGlzLnVpRGlhbG9nLmRyYWdnYWJsZSgiZGVzdHJveSIpKTticmVhaztjYXNlImhlaWdodCI6dGhpcy51aURpYWxvZy5oZWlnaHQoZik7YnJlYWs7Y2FzZSJwb3NpdGlvbiI6dGhpcy5fcG9zaXRpb24oZik7YnJlYWs7Y2FzZSJyZXNpemFibGUiOnZhciBkPXRoaXMudWlEaWFsb2csZz10aGlzLnVpRGlhbG9nLmlzKCI6ZGF0YShyZXNpemFibGUpIik7KGcmJiFmJiZkLnJlc2l6YWJsZSgiZGVzdHJveSIpKTsoZyYmdHlwZW9mIGY9PSJzdHJpbmciJiZkLnJlc2l6YWJsZSgib3B0aW9uIiwiaGFuZGxlcyIsZikpOyhnfHx0aGlzLl9tYWtlUmVzaXphYmxlKGYpKTticmVhaztjYXNlInRpdGxlIjpjKCIudWktZGlhbG9nLXRpdGxlIix0aGlzLnVpRGlhbG9nVGl0bGViYXIpLmh0bWwoZnx8IiZuYnNwOyIpO2JyZWFrO2Nhc2Uid2lkdGgiOnRoaXMudWlEaWFsb2cud2lkdGgoZik7YnJlYWt9Yy53aWRnZXQucHJvdG90eXBlLl9zZXREYXRhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sX3NpemU6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9wdGlvbnM7dGhpcy5lbGVtZW50LmNzcyh7aGVpZ2h0OjAsbWluSGVpZ2h0OjAsd2lkdGg6ImF1dG8ifSk7dmFyIGQ9dGhpcy51aURpYWxvZy5jc3Moe2hlaWdodDoiYXV0byIsd2lkdGg6ZS53aWR0aH0pLmhlaWdodCgpO3RoaXMuZWxlbWVudC5jc3Moe21pbkhlaWdodDpNYXRoLm1heChlLm1pbkhlaWdodC1kLDApLGhlaWdodDplLmhlaWdodD09ImF1dG8iPyJhdXRvIjpNYXRoLm1heChlLmhlaWdodC1kLDApfSl9fSk7Yy5leHRlbmQoYy51aS5kaWFsb2cse3ZlcnNpb246IjEuNy4yIixkZWZhdWx0czp7YXV0b09wZW46dHJ1ZSxiZ2lmcmFtZTpmYWxzZSxidXR0b25zOnt9LGNsb3NlT25Fc2NhcGU6dHJ1ZSxjbG9zZVRleHQ6ImNsb3NlIixkaWFsb2dDbGFzczoiIixkcmFnZ2FibGU6dHJ1ZSxoaWRlOm51bGwsaGVpZ2h0OiJhdXRvIixtYXhIZWlnaHQ6ZmFsc2UsbWF4V2lkdGg6ZmFsc2UsbWluSGVpZ2h0OjE1MCxtaW5XaWR0aDoxNTAsbW9kYWw6ZmFsc2UscG9zaXRpb246ImNlbnRlciIscmVzaXphYmxlOnRydWUsc2hvdzpudWxsLHN0YWNrOnRydWUsdGl0bGU6IiIsd2lkdGg6MzAwLHpJbmRleDoxMDAwfSxnZXR0ZXI6ImlzT3BlbiIsdXVpZDowLG1heFo6MCxnZXRUaXRsZUlkOmZ1bmN0aW9uKGQpe3JldHVybiJ1aS1kaWFsb2ctdGl0bGUtIisoZC5hdHRyKCJpZCIpfHwrK3RoaXMudXVpZCl9LG92ZXJsYXk6ZnVuY3Rpb24oZCl7dGhpcy4kZWw9Yy51aS5kaWFsb2cub3ZlcmxheS5jcmVhdGUoZCl9fSk7Yy5leHRlbmQoYy51aS5kaWFsb2cub3ZlcmxheSx7aW5zdGFuY2VzOltdLG1heFo6MCxldmVudHM6Yy5tYXAoImZvY3VzLG1vdXNlZG93bixtb3VzZXVwLGtleWRvd24sa2V5cHJlc3MsY2xpY2siLnNwbGl0KCIsIiksZnVuY3Rpb24oZCl7cmV0dXJuIGQrIi5kaWFsb2ctb3ZlcmxheSJ9KS5qb2luKCIgIiksY3JlYXRlOmZ1bmN0aW9uKGUpe2lmKHRoaXMuaW5zdGFuY2VzLmxlbmd0aD09PTApe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtpZihjLnVpLmRpYWxvZy5vdmVybGF5Lmluc3RhbmNlcy5sZW5ndGgpe2MoZG9jdW1lbnQpLmJpbmQoYy51aS5kaWFsb2cub3ZlcmxheS5ldmVudHMsZnVuY3Rpb24oZil7dmFyIGc9YyhmLnRhcmdldCkucGFyZW50cygiLnVpLWRpYWxvZyIpLmNzcygiekluZGV4Iil8fDA7cmV0dXJuKGc+Yy51aS5kaWFsb2cub3ZlcmxheS5tYXhaKX0pfX0sMSk7Yyhkb2N1bWVudCkuYmluZCgia2V5ZG93bi5kaWFsb2ctb3ZlcmxheSIsZnVuY3Rpb24oZil7KGUub3B0aW9ucy5jbG9zZU9uRXNjYXBlJiZmLmtleUNvZGUmJmYua2V5Q29kZT09Yy51aS5rZXlDb2RlLkVTQ0FQRSYmZS5jbG9zZShmKSl9KTtjKHdpbmRvdykuYmluZCgicmVzaXplLmRpYWxvZy1vdmVybGF5IixjLnVpLmRpYWxvZy5vdmVybGF5LnJlc2l6ZSl9dmFyIGQ9YygiPGRpdj48L2Rpdj4iKS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KS5hZGRDbGFzcygidWktd2lkZ2V0LW92ZXJsYXkiKS5jc3Moe3dpZHRoOnRoaXMud2lkdGgoKSxoZWlnaHQ6dGhpcy5oZWlnaHQoKX0pOyhlLm9wdGlvbnMuYmdpZnJhbWUmJmMuZm4uYmdpZnJhbWUmJmQuYmdpZnJhbWUoKSk7dGhpcy5pbnN0YW5jZXMucHVzaChkKTtyZXR1cm4gZH0sZGVzdHJveTpmdW5jdGlvbihkKXt0aGlzLmluc3RhbmNlcy5zcGxpY2UoYy5pbkFycmF5KHRoaXMuaW5zdGFuY2VzLGQpLDEpO2lmKHRoaXMuaW5zdGFuY2VzLmxlbmd0aD09PTApe2MoW2RvY3VtZW50LHdpbmRvd10pLnVuYmluZCgiLmRpYWxvZy1vdmVybGF5Iil9ZC5yZW1vdmUoKTt2YXIgZT0wO2MuZWFjaCh0aGlzLmluc3RhbmNlcyxmdW5jdGlvbigpe2U9TWF0aC5tYXgoZSx0aGlzLmNzcygiei1pbmRleCIpKX0pO3RoaXMubWF4Wj1lfSxoZWlnaHQ6ZnVuY3Rpb24oKXtpZihjLmJyb3dzZXIubXNpZSYmYy5icm93c2VyLnZlcnNpb248Nyl7dmFyIGU9TWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCxkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCk7dmFyIGQ9TWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodCxkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCk7aWYoZTxkKXtyZXR1cm4gYyh3aW5kb3cpLmhlaWdodCgpKyJweCJ9ZWxzZXtyZXR1cm4gZSsicHgifX1lbHNle3JldHVybiBjKGRvY3VtZW50KS5oZWlnaHQoKSsicHgifX0sd2lkdGg6ZnVuY3Rpb24oKXtpZihjLmJyb3dzZXIubXNpZSYmYy5icm93c2VyLnZlcnNpb248Nyl7dmFyIGQ9TWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoLGRvY3VtZW50LmJvZHkuc2Nyb2xsV2lkdGgpO3ZhciBlPU1hdGgubWF4KGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRXaWR0aCxkb2N1bWVudC5ib2R5Lm9mZnNldFdpZHRoKTtpZihkPGUpe3JldHVybiBjKHdpbmRvdykud2lkdGgoKSsicHgifWVsc2V7cmV0dXJuIGQrInB4In19ZWxzZXtyZXR1cm4gYyhkb2N1bWVudCkud2lkdGgoKSsicHgifX0scmVzaXplOmZ1bmN0aW9uKCl7dmFyIGQ9YyhbXSk7Yy5lYWNoKGMudWkuZGlhbG9nLm92ZXJsYXkuaW5zdGFuY2VzLGZ1bmN0aW9uKCl7ZD1kLmFkZCh0aGlzKX0pO2QuY3NzKHt3aWR0aDowLGhlaWdodDowfSkuY3NzKHt3aWR0aDpjLnVpLmRpYWxvZy5vdmVybGF5LndpZHRoKCksaGVpZ2h0OmMudWkuZGlhbG9nLm92ZXJsYXkuaGVpZ2h0KCl9KX19KTtjLmV4dGVuZChjLnVpLmRpYWxvZy5vdmVybGF5LnByb3RvdHlwZSx7ZGVzdHJveTpmdW5jdGlvbigpe2MudWkuZGlhbG9nLm92ZXJsYXkuZGVzdHJveSh0aGlzLiRlbCl9fSl9KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgU2xpZGVyIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvU2xpZGVyCiAqCiAqIERlcGVuZHM6CiAqCXVpLmNvcmUuanMKICovCihmdW5jdGlvbihhKXthLndpZGdldCgidWkuc2xpZGVyIixhLmV4dGVuZCh7fSxhLnVpLm1vdXNlLHtfaW5pdDpmdW5jdGlvbigpe3ZhciBiPXRoaXMsYz10aGlzLm9wdGlvbnM7dGhpcy5fa2V5U2xpZGluZz1mYWxzZTt0aGlzLl9oYW5kbGVJbmRleD1udWxsO3RoaXMuX2RldGVjdE9yaWVudGF0aW9uKCk7dGhpcy5fbW91c2VJbml0KCk7dGhpcy5lbGVtZW50LmFkZENsYXNzKCJ1aS1zbGlkZXIgdWktc2xpZGVyLSIrdGhpcy5vcmllbnRhdGlvbisiIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIik7dGhpcy5yYW5nZT1hKFtdKTtpZihjLnJhbmdlKXtpZihjLnJhbmdlPT09dHJ1ZSl7dGhpcy5yYW5nZT1hKCI8ZGl2PjwvZGl2PiIpO2lmKCFjLnZhbHVlcyl7Yy52YWx1ZXM9W3RoaXMuX3ZhbHVlTWluKCksdGhpcy5fdmFsdWVNaW4oKV19aWYoYy52YWx1ZXMubGVuZ3RoJiZjLnZhbHVlcy5sZW5ndGghPTIpe2MudmFsdWVzPVtjLnZhbHVlc1swXSxjLnZhbHVlc1swXV19fWVsc2V7dGhpcy5yYW5nZT1hKCI8ZGl2PjwvZGl2PiIpfXRoaXMucmFuZ2UuYXBwZW5kVG8odGhpcy5lbGVtZW50KS5hZGRDbGFzcygidWktc2xpZGVyLXJhbmdlIik7aWYoYy5yYW5nZT09Im1pbiJ8fGMucmFuZ2U9PSJtYXgiKXt0aGlzLnJhbmdlLmFkZENsYXNzKCJ1aS1zbGlkZXItcmFuZ2UtIitjLnJhbmdlKX10aGlzLnJhbmdlLmFkZENsYXNzKCJ1aS13aWRnZXQtaGVhZGVyIil9aWYoYSgiLnVpLXNsaWRlci1oYW5kbGUiLHRoaXMuZWxlbWVudCkubGVuZ3RoPT0wKXthKCc8YSBocmVmPSIjIj48L2E+JykuYXBwZW5kVG8odGhpcy5lbGVtZW50KS5hZGRDbGFzcygidWktc2xpZGVyLWhhbmRsZSIpfWlmKGMudmFsdWVzJiZjLnZhbHVlcy5sZW5ndGgpe3doaWxlKGEoIi51aS1zbGlkZXItaGFuZGxlIix0aGlzLmVsZW1lbnQpLmxlbmd0aDxjLnZhbHVlcy5sZW5ndGgpe2EoJzxhIGhyZWY9IiMiPjwvYT4nKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpLmFkZENsYXNzKCJ1aS1zbGlkZXItaGFuZGxlIil9fXRoaXMuaGFuZGxlcz1hKCIudWktc2xpZGVyLWhhbmRsZSIsdGhpcy5lbGVtZW50KS5hZGRDbGFzcygidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItYWxsIik7dGhpcy5oYW5kbGU9dGhpcy5oYW5kbGVzLmVxKDApO3RoaXMuaGFuZGxlcy5hZGQodGhpcy5yYW5nZSkuZmlsdGVyKCJhIikuY2xpY2soZnVuY3Rpb24oZCl7ZC5wcmV2ZW50RGVmYXVsdCgpfSkuaG92ZXIoZnVuY3Rpb24oKXtpZighYy5kaXNhYmxlZCl7YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtaG92ZXIiKX19LGZ1bmN0aW9uKCl7YSh0aGlzKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKX0pLmZvY3VzKGZ1bmN0aW9uKCl7aWYoIWMuZGlzYWJsZWQpe2EoIi51aS1zbGlkZXIgLnVpLXN0YXRlLWZvY3VzIikucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWZvY3VzIik7YSh0aGlzKS5hZGRDbGFzcygidWktc3RhdGUtZm9jdXMiKX1lbHNle2EodGhpcykuYmx1cigpfX0pLmJsdXIoZnVuY3Rpb24oKXthKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1mb2N1cyIpfSk7dGhpcy5oYW5kbGVzLmVhY2goZnVuY3Rpb24oZCl7YSh0aGlzKS5kYXRhKCJpbmRleC51aS1zbGlkZXItaGFuZGxlIixkKX0pO3RoaXMuaGFuZGxlcy5rZXlkb3duKGZ1bmN0aW9uKGkpe3ZhciBmPXRydWU7dmFyIGU9YSh0aGlzKS5kYXRhKCJpbmRleC51aS1zbGlkZXItaGFuZGxlIik7aWYoYi5vcHRpb25zLmRpc2FibGVkKXtyZXR1cm59c3dpdGNoKGkua2V5Q29kZSl7Y2FzZSBhLnVpLmtleUNvZGUuSE9NRTpjYXNlIGEudWkua2V5Q29kZS5FTkQ6Y2FzZSBhLnVpLmtleUNvZGUuVVA6Y2FzZSBhLnVpLmtleUNvZGUuUklHSFQ6Y2FzZSBhLnVpLmtleUNvZGUuRE9XTjpjYXNlIGEudWkua2V5Q29kZS5MRUZUOmY9ZmFsc2U7aWYoIWIuX2tleVNsaWRpbmcpe2IuX2tleVNsaWRpbmc9dHJ1ZTthKHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKTtiLl9zdGFydChpLGUpfWJyZWFrfXZhciBnLGQsaD1iLl9zdGVwKCk7aWYoYi5vcHRpb25zLnZhbHVlcyYmYi5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe2c9ZD1iLnZhbHVlcyhlKX1lbHNle2c9ZD1iLnZhbHVlKCl9c3dpdGNoKGkua2V5Q29kZSl7Y2FzZSBhLnVpLmtleUNvZGUuSE9NRTpkPWIuX3ZhbHVlTWluKCk7YnJlYWs7Y2FzZSBhLnVpLmtleUNvZGUuRU5EOmQ9Yi5fdmFsdWVNYXgoKTticmVhaztjYXNlIGEudWkua2V5Q29kZS5VUDpjYXNlIGEudWkua2V5Q29kZS5SSUdIVDppZihnPT1iLl92YWx1ZU1heCgpKXtyZXR1cm59ZD1nK2g7YnJlYWs7Y2FzZSBhLnVpLmtleUNvZGUuRE9XTjpjYXNlIGEudWkua2V5Q29kZS5MRUZUOmlmKGc9PWIuX3ZhbHVlTWluKCkpe3JldHVybn1kPWctaDticmVha31iLl9zbGlkZShpLGUsZCk7cmV0dXJuIGZ9KS5rZXl1cChmdW5jdGlvbihlKXt2YXIgZD1hKHRoaXMpLmRhdGEoImluZGV4LnVpLXNsaWRlci1oYW5kbGUiKTtpZihiLl9rZXlTbGlkaW5nKXtiLl9zdG9wKGUsZCk7Yi5fY2hhbmdlKGUsZCk7Yi5fa2V5U2xpZGluZz1mYWxzZTthKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKX19KTt0aGlzLl9yZWZyZXNoVmFsdWUoKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuaGFuZGxlcy5yZW1vdmUoKTt0aGlzLnJhbmdlLnJlbW92ZSgpO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2xpZGVyIHVpLXNsaWRlci1ob3Jpem9udGFsIHVpLXNsaWRlci12ZXJ0aWNhbCB1aS1zbGlkZXItZGlzYWJsZWQgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwiKS5yZW1vdmVEYXRhKCJzbGlkZXIiKS51bmJpbmQoIi5zbGlkZXIiKTt0aGlzLl9tb3VzZURlc3Ryb3koKX0sX21vdXNlQ2FwdHVyZTpmdW5jdGlvbihkKXt2YXIgZT10aGlzLm9wdGlvbnM7aWYoZS5kaXNhYmxlZCl7cmV0dXJuIGZhbHNlfXRoaXMuZWxlbWVudFNpemU9e3dpZHRoOnRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksaGVpZ2h0OnRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpfTt0aGlzLmVsZW1lbnRPZmZzZXQ9dGhpcy5lbGVtZW50Lm9mZnNldCgpO3ZhciBoPXt4OmQucGFnZVgseTpkLnBhZ2VZfTt2YXIgaj10aGlzLl9ub3JtVmFsdWVGcm9tTW91c2UoaCk7dmFyIGM9dGhpcy5fdmFsdWVNYXgoKS10aGlzLl92YWx1ZU1pbigpKzEsZjt2YXIgaz10aGlzLGk7dGhpcy5oYW5kbGVzLmVhY2goZnVuY3Rpb24obCl7dmFyIG09TWF0aC5hYnMoai1rLnZhbHVlcyhsKSk7aWYoYz5tKXtjPW07Zj1hKHRoaXMpO2k9bH19KTtpZihlLnJhbmdlPT10cnVlJiZ0aGlzLnZhbHVlcygxKT09ZS5taW4pe2Y9YSh0aGlzLmhhbmRsZXNbKytpXSl9dGhpcy5fc3RhcnQoZCxpKTtrLl9oYW5kbGVJbmRleD1pO2YuYWRkQ2xhc3MoInVpLXN0YXRlLWFjdGl2ZSIpLmZvY3VzKCk7dmFyIGc9Zi5vZmZzZXQoKTt2YXIgYj0hYShkLnRhcmdldCkucGFyZW50cygpLmFuZFNlbGYoKS5pcygiLnVpLXNsaWRlci1oYW5kbGUiKTt0aGlzLl9jbGlja09mZnNldD1iP3tsZWZ0OjAsdG9wOjB9OntsZWZ0OmQucGFnZVgtZy5sZWZ0LShmLndpZHRoKCkvMiksdG9wOmQucGFnZVktZy50b3AtKGYuaGVpZ2h0KCkvMiktKHBhcnNlSW50KGYuY3NzKCJib3JkZXJUb3BXaWR0aCIpLDEwKXx8MCktKHBhcnNlSW50KGYuY3NzKCJib3JkZXJCb3R0b21XaWR0aCIpLDEwKXx8MCkrKHBhcnNlSW50KGYuY3NzKCJtYXJnaW5Ub3AiKSwxMCl8fDApfTtqPXRoaXMuX25vcm1WYWx1ZUZyb21Nb3VzZShoKTt0aGlzLl9zbGlkZShkLGksaik7cmV0dXJuIHRydWV9LF9tb3VzZVN0YXJ0OmZ1bmN0aW9uKGIpe3JldHVybiB0cnVlfSxfbW91c2VEcmFnOmZ1bmN0aW9uKGQpe3ZhciBiPXt4OmQucGFnZVgseTpkLnBhZ2VZfTt2YXIgYz10aGlzLl9ub3JtVmFsdWVGcm9tTW91c2UoYik7dGhpcy5fc2xpZGUoZCx0aGlzLl9oYW5kbGVJbmRleCxjKTtyZXR1cm4gZmFsc2V9LF9tb3VzZVN0b3A6ZnVuY3Rpb24oYil7dGhpcy5oYW5kbGVzLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1hY3RpdmUiKTt0aGlzLl9zdG9wKGIsdGhpcy5faGFuZGxlSW5kZXgpO3RoaXMuX2NoYW5nZShiLHRoaXMuX2hhbmRsZUluZGV4KTt0aGlzLl9oYW5kbGVJbmRleD1udWxsO3RoaXMuX2NsaWNrT2Zmc2V0PW51bGw7cmV0dXJuIGZhbHNlfSxfZGV0ZWN0T3JpZW50YXRpb246ZnVuY3Rpb24oKXt0aGlzLm9yaWVudGF0aW9uPXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj09InZlcnRpY2FsIj8idmVydGljYWwiOiJob3Jpem9udGFsIn0sX25vcm1WYWx1ZUZyb21Nb3VzZTpmdW5jdGlvbihkKXt2YXIgYyxoO2lmKCJob3Jpem9udGFsIj09dGhpcy5vcmllbnRhdGlvbil7Yz10aGlzLmVsZW1lbnRTaXplLndpZHRoO2g9ZC54LXRoaXMuZWxlbWVudE9mZnNldC5sZWZ0LSh0aGlzLl9jbGlja09mZnNldD90aGlzLl9jbGlja09mZnNldC5sZWZ0OjApfWVsc2V7Yz10aGlzLmVsZW1lbnRTaXplLmhlaWdodDtoPWQueS10aGlzLmVsZW1lbnRPZmZzZXQudG9wLSh0aGlzLl9jbGlja09mZnNldD90aGlzLl9jbGlja09mZnNldC50b3A6MCl9dmFyIGY9KGgvYyk7aWYoZj4xKXtmPTF9aWYoZjwwKXtmPTB9aWYoInZlcnRpY2FsIj09dGhpcy5vcmllbnRhdGlvbil7Zj0xLWZ9dmFyIGU9dGhpcy5fdmFsdWVNYXgoKS10aGlzLl92YWx1ZU1pbigpLGk9ZiplLGI9aSV0aGlzLm9wdGlvbnMuc3RlcCxnPXRoaXMuX3ZhbHVlTWluKCkraS1iO2lmKGI+KHRoaXMub3B0aW9ucy5zdGVwLzIpKXtnKz10aGlzLm9wdGlvbnMuc3RlcH1yZXR1cm4gcGFyc2VGbG9hdChnLnRvRml4ZWQoNSkpfSxfc3RhcnQ6ZnVuY3Rpb24oZCxjKXt2YXIgYj17aGFuZGxlOnRoaXMuaGFuZGxlc1tjXSx2YWx1ZTp0aGlzLnZhbHVlKCl9O2lmKHRoaXMub3B0aW9ucy52YWx1ZXMmJnRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoKXtiLnZhbHVlPXRoaXMudmFsdWVzKGMpO2IudmFsdWVzPXRoaXMudmFsdWVzKCl9dGhpcy5fdHJpZ2dlcigic3RhcnQiLGQsYil9LF9zbGlkZTpmdW5jdGlvbihmLGUsZCl7dmFyIGc9dGhpcy5oYW5kbGVzW2VdO2lmKHRoaXMub3B0aW9ucy52YWx1ZXMmJnRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoKXt2YXIgYj10aGlzLnZhbHVlcyhlPzA6MSk7aWYoKHRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoPT0yJiZ0aGlzLm9wdGlvbnMucmFuZ2U9PT10cnVlKSYmKChlPT0wJiZkPmIpfHwoZT09MSYmZDxiKSkpe2Q9Yn1pZihkIT10aGlzLnZhbHVlcyhlKSl7dmFyIGM9dGhpcy52YWx1ZXMoKTtjW2VdPWQ7dmFyIGg9dGhpcy5fdHJpZ2dlcigic2xpZGUiLGYse2hhbmRsZTp0aGlzLmhhbmRsZXNbZV0sdmFsdWU6ZCx2YWx1ZXM6Y30pO3ZhciBiPXRoaXMudmFsdWVzKGU/MDoxKTtpZihoIT09ZmFsc2Upe3RoaXMudmFsdWVzKGUsZCwoZi50eXBlPT0ibW91c2Vkb3duIiYmdGhpcy5vcHRpb25zLmFuaW1hdGUpLHRydWUpfX19ZWxzZXtpZihkIT10aGlzLnZhbHVlKCkpe3ZhciBoPXRoaXMuX3RyaWdnZXIoInNsaWRlIixmLHtoYW5kbGU6dGhpcy5oYW5kbGVzW2VdLHZhbHVlOmR9KTtpZihoIT09ZmFsc2Upe3RoaXMuX3NldERhdGEoInZhbHVlIixkLChmLnR5cGU9PSJtb3VzZWRvd24iJiZ0aGlzLm9wdGlvbnMuYW5pbWF0ZSkpfX19fSxfc3RvcDpmdW5jdGlvbihkLGMpe3ZhciBiPXtoYW5kbGU6dGhpcy5oYW5kbGVzW2NdLHZhbHVlOnRoaXMudmFsdWUoKX07aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe2IudmFsdWU9dGhpcy52YWx1ZXMoYyk7Yi52YWx1ZXM9dGhpcy52YWx1ZXMoKX10aGlzLl90cmlnZ2VyKCJzdG9wIixkLGIpfSxfY2hhbmdlOmZ1bmN0aW9uKGQsYyl7dmFyIGI9e2hhbmRsZTp0aGlzLmhhbmRsZXNbY10sdmFsdWU6dGhpcy52YWx1ZSgpfTtpZih0aGlzLm9wdGlvbnMudmFsdWVzJiZ0aGlzLm9wdGlvbnMudmFsdWVzLmxlbmd0aCl7Yi52YWx1ZT10aGlzLnZhbHVlcyhjKTtiLnZhbHVlcz10aGlzLnZhbHVlcygpfXRoaXMuX3RyaWdnZXIoImNoYW5nZSIsZCxiKX0sdmFsdWU6ZnVuY3Rpb24oYil7aWYoYXJndW1lbnRzLmxlbmd0aCl7dGhpcy5fc2V0RGF0YSgidmFsdWUiLGIpO3RoaXMuX2NoYW5nZShudWxsLDApfXJldHVybiB0aGlzLl92YWx1ZSgpfSx2YWx1ZXM6ZnVuY3Rpb24oYixlLGMsZCl7aWYoYXJndW1lbnRzLmxlbmd0aD4xKXt0aGlzLm9wdGlvbnMudmFsdWVzW2JdPWU7dGhpcy5fcmVmcmVzaFZhbHVlKGMpO2lmKCFkKXt0aGlzLl9jaGFuZ2UobnVsbCxiKX19aWYoYXJndW1lbnRzLmxlbmd0aCl7aWYodGhpcy5vcHRpb25zLnZhbHVlcyYmdGhpcy5vcHRpb25zLnZhbHVlcy5sZW5ndGgpe3JldHVybiB0aGlzLl92YWx1ZXMoYil9ZWxzZXtyZXR1cm4gdGhpcy52YWx1ZSgpfX1lbHNle3JldHVybiB0aGlzLl92YWx1ZXMoKX19LF9zZXREYXRhOmZ1bmN0aW9uKGIsZCxjKXthLndpZGdldC5wcm90b3R5cGUuX3NldERhdGEuYXBwbHkodGhpcyxhcmd1bWVudHMpO3N3aXRjaChiKXtjYXNlImRpc2FibGVkIjppZihkKXt0aGlzLmhhbmRsZXMuZmlsdGVyKCIudWktc3RhdGUtZm9jdXMiKS5ibHVyKCk7dGhpcy5oYW5kbGVzLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpO3RoaXMuaGFuZGxlcy5hdHRyKCJkaXNhYmxlZCIsImRpc2FibGVkIil9ZWxzZXt0aGlzLmhhbmRsZXMucmVtb3ZlQXR0cigiZGlzYWJsZWQiKX1jYXNlIm9yaWVudGF0aW9uIjp0aGlzLl9kZXRlY3RPcmllbnRhdGlvbigpO3RoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygidWktc2xpZGVyLWhvcml6b250YWwgdWktc2xpZGVyLXZlcnRpY2FsIikuYWRkQ2xhc3MoInVpLXNsaWRlci0iK3RoaXMub3JpZW50YXRpb24pO3RoaXMuX3JlZnJlc2hWYWx1ZShjKTticmVhaztjYXNlInZhbHVlIjp0aGlzLl9yZWZyZXNoVmFsdWUoYyk7YnJlYWt9fSxfc3RlcDpmdW5jdGlvbigpe3ZhciBiPXRoaXMub3B0aW9ucy5zdGVwO3JldHVybiBifSxfdmFsdWU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm9wdGlvbnMudmFsdWU7aWYoYjx0aGlzLl92YWx1ZU1pbigpKXtiPXRoaXMuX3ZhbHVlTWluKCl9aWYoYj50aGlzLl92YWx1ZU1heCgpKXtiPXRoaXMuX3ZhbHVlTWF4KCl9cmV0dXJuIGJ9LF92YWx1ZXM6ZnVuY3Rpb24oYil7aWYoYXJndW1lbnRzLmxlbmd0aCl7dmFyIGM9dGhpcy5vcHRpb25zLnZhbHVlc1tiXTtpZihjPHRoaXMuX3ZhbHVlTWluKCkpe2M9dGhpcy5fdmFsdWVNaW4oKX1pZihjPnRoaXMuX3ZhbHVlTWF4KCkpe2M9dGhpcy5fdmFsdWVNYXgoKX1yZXR1cm4gY31lbHNle3JldHVybiB0aGlzLm9wdGlvbnMudmFsdWVzfX0sX3ZhbHVlTWluOmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5vcHRpb25zLm1pbjtyZXR1cm4gYn0sX3ZhbHVlTWF4OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5vcHRpb25zLm1heDtyZXR1cm4gYn0sX3JlZnJlc2hWYWx1ZTpmdW5jdGlvbihjKXt2YXIgZj10aGlzLm9wdGlvbnMucmFuZ2UsZD10aGlzLm9wdGlvbnMsbD10aGlzO2lmKHRoaXMub3B0aW9ucy52YWx1ZXMmJnRoaXMub3B0aW9ucy52YWx1ZXMubGVuZ3RoKXt2YXIgaSxoO3RoaXMuaGFuZGxlcy5lYWNoKGZ1bmN0aW9uKHAsbil7dmFyIG89KGwudmFsdWVzKHApLWwuX3ZhbHVlTWluKCkpLyhsLl92YWx1ZU1heCgpLWwuX3ZhbHVlTWluKCkpKjEwMDt2YXIgbT17fTttW2wub3JpZW50YXRpb249PSJob3Jpem9udGFsIj8ibGVmdCI6ImJvdHRvbSJdPW8rIiUiO2EodGhpcykuc3RvcCgxLDEpW2M/ImFuaW1hdGUiOiJjc3MiXShtLGQuYW5pbWF0ZSk7aWYobC5vcHRpb25zLnJhbmdlPT09dHJ1ZSl7aWYobC5vcmllbnRhdGlvbj09Imhvcml6b250YWwiKXsocD09MCkmJmwucmFuZ2Uuc3RvcCgxLDEpW2M/ImFuaW1hdGUiOiJjc3MiXSh7bGVmdDpvKyIlIn0sZC5hbmltYXRlKTsocD09MSkmJmwucmFuZ2VbYz8iYW5pbWF0ZSI6ImNzcyJdKHt3aWR0aDooby1sYXN0VmFsUGVyY2VudCkrIiUifSx7cXVldWU6ZmFsc2UsZHVyYXRpb246ZC5hbmltYXRlfSl9ZWxzZXsocD09MCkmJmwucmFuZ2Uuc3RvcCgxLDEpW2M/ImFuaW1hdGUiOiJjc3MiXSh7Ym90dG9tOihvKSsiJSJ9LGQuYW5pbWF0ZSk7KHA9PTEpJiZsLnJhbmdlW2M/ImFuaW1hdGUiOiJjc3MiXSh7aGVpZ2h0OihvLWxhc3RWYWxQZXJjZW50KSsiJSJ9LHtxdWV1ZTpmYWxzZSxkdXJhdGlvbjpkLmFuaW1hdGV9KX19bGFzdFZhbFBlcmNlbnQ9b30pfWVsc2V7dmFyIGo9dGhpcy52YWx1ZSgpLGc9dGhpcy5fdmFsdWVNaW4oKSxrPXRoaXMuX3ZhbHVlTWF4KCksZT1rIT1nPyhqLWcpLyhrLWcpKjEwMDowO3ZhciBiPXt9O2JbbC5vcmllbnRhdGlvbj09Imhvcml6b250YWwiPyJsZWZ0IjoiYm90dG9tIl09ZSsiJSI7dGhpcy5oYW5kbGUuc3RvcCgxLDEpW2M/ImFuaW1hdGUiOiJjc3MiXShiLGQuYW5pbWF0ZSk7KGY9PSJtaW4iKSYmKHRoaXMub3JpZW50YXRpb249PSJob3Jpem9udGFsIikmJnRoaXMucmFuZ2Uuc3RvcCgxLDEpW2M/ImFuaW1hdGUiOiJjc3MiXSh7d2lkdGg6ZSsiJSJ9LGQuYW5pbWF0ZSk7KGY9PSJtYXgiKSYmKHRoaXMub3JpZW50YXRpb249PSJob3Jpem9udGFsIikmJnRoaXMucmFuZ2VbYz8iYW5pbWF0ZSI6ImNzcyJdKHt3aWR0aDooMTAwLWUpKyIlIn0se3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmQuYW5pbWF0ZX0pOyhmPT0ibWluIikmJih0aGlzLm9yaWVudGF0aW9uPT0idmVydGljYWwiKSYmdGhpcy5yYW5nZS5zdG9wKDEsMSlbYz8iYW5pbWF0ZSI6ImNzcyJdKHtoZWlnaHQ6ZSsiJSJ9LGQuYW5pbWF0ZSk7KGY9PSJtYXgiKSYmKHRoaXMub3JpZW50YXRpb249PSJ2ZXJ0aWNhbCIpJiZ0aGlzLnJhbmdlW2M/ImFuaW1hdGUiOiJjc3MiXSh7aGVpZ2h0OigxMDAtZSkrIiUifSx7cXVldWU6ZmFsc2UsZHVyYXRpb246ZC5hbmltYXRlfSl9fX0pKTthLmV4dGVuZChhLnVpLnNsaWRlcix7Z2V0dGVyOiJ2YWx1ZSB2YWx1ZXMiLHZlcnNpb246IjEuNy4yIixldmVudFByZWZpeDoic2xpZGUiLGRlZmF1bHRzOnthbmltYXRlOmZhbHNlLGRlbGF5OjAsZGlzdGFuY2U6MCxtYXg6MTAwLG1pbjowLG9yaWVudGF0aW9uOiJob3Jpem9udGFsIixyYW5nZTpmYWxzZSxzdGVwOjEsdmFsdWU6MCx2YWx1ZXM6bnVsbH19KX0pKGpRdWVyeSk7Oy8qCiAqIGpRdWVyeSBVSSBUYWJzIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvVGFicwogKgogKiBEZXBlbmRzOgogKgl1aS5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLnRhYnMiLHtfaW5pdDpmdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5kZXNlbGVjdGFibGUhPT11bmRlZmluZWQpe3RoaXMub3B0aW9ucy5jb2xsYXBzaWJsZT10aGlzLm9wdGlvbnMuZGVzZWxlY3RhYmxlfXRoaXMuX3RhYmlmeSh0cnVlKX0sX3NldERhdGE6ZnVuY3Rpb24oYixjKXtpZihiPT0ic2VsZWN0ZWQiKXtpZih0aGlzLm9wdGlvbnMuY29sbGFwc2libGUmJmM9PXRoaXMub3B0aW9ucy5zZWxlY3RlZCl7cmV0dXJufXRoaXMuc2VsZWN0KGMpfWVsc2V7dGhpcy5vcHRpb25zW2JdPWM7aWYoYj09ImRlc2VsZWN0YWJsZSIpe3RoaXMub3B0aW9ucy5jb2xsYXBzaWJsZT1jfXRoaXMuX3RhYmlmeSgpfX0sX3RhYklkOmZ1bmN0aW9uKGIpe3JldHVybiBiLnRpdGxlJiZiLnRpdGxlLnJlcGxhY2UoL1xzL2csIl8iKS5yZXBsYWNlKC9bXkEtWmEtejAtOVwtXzpcLl0vZywiIil8fHRoaXMub3B0aW9ucy5pZFByZWZpeCthLmRhdGEoYil9LF9zYW5pdGl6ZVNlbGVjdG9yOmZ1bmN0aW9uKGIpe3JldHVybiBiLnJlcGxhY2UoLzovZywiXFw6Iil9LF9jb29raWU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmNvb2tpZXx8KHRoaXMuY29va2llPXRoaXMub3B0aW9ucy5jb29raWUubmFtZXx8InVpLXRhYnMtIithLmRhdGEodGhpcy5saXN0WzBdKSk7cmV0dXJuIGEuY29va2llLmFwcGx5KG51bGwsW2JdLmNvbmNhdChhLm1ha2VBcnJheShhcmd1bWVudHMpKSl9LF91aTpmdW5jdGlvbihjLGIpe3JldHVybnt0YWI6YyxwYW5lbDpiLGluZGV4OnRoaXMuYW5jaG9ycy5pbmRleChjKX19LF9jbGVhbnVwOmZ1bmN0aW9uKCl7dGhpcy5saXMuZmlsdGVyKCIudWktc3RhdGUtcHJvY2Vzc2luZyIpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1wcm9jZXNzaW5nIikuZmluZCgic3BhbjpkYXRhKGxhYmVsLnRhYnMpIikuZWFjaChmdW5jdGlvbigpe3ZhciBiPWEodGhpcyk7Yi5odG1sKGIuZGF0YSgibGFiZWwudGFicyIpKS5yZW1vdmVEYXRhKCJsYWJlbC50YWJzIil9KX0sX3RhYmlmeTpmdW5jdGlvbihuKXt0aGlzLmxpc3Q9dGhpcy5lbGVtZW50LmNoaWxkcmVuKCJ1bDpmaXJzdCIpO3RoaXMubGlzPWEoImxpOmhhcyhhW2hyZWZdKSIsdGhpcy5saXN0KTt0aGlzLmFuY2hvcnM9dGhpcy5saXMubWFwKGZ1bmN0aW9uKCl7cmV0dXJuIGEoImEiLHRoaXMpWzBdfSk7dGhpcy5wYW5lbHM9YShbXSk7dmFyIHA9dGhpcyxkPXRoaXMub3B0aW9uczt2YXIgYz0vXiMuKy87dGhpcy5hbmNob3JzLmVhY2goZnVuY3Rpb24ocixvKXt2YXIgcT1hKG8pLmF0dHIoImhyZWYiKTt2YXIgcz1xLnNwbGl0KCIjIilbMF0sdTtpZihzJiYocz09PWxvY2F0aW9uLnRvU3RyaW5nKCkuc3BsaXQoIiMiKVswXXx8KHU9YSgiYmFzZSIpWzBdKSYmcz09PXUuaHJlZikpe3E9by5oYXNoO28uaHJlZj1xfWlmKGMudGVzdChxKSl7cC5wYW5lbHM9cC5wYW5lbHMuYWRkKHAuX3Nhbml0aXplU2VsZWN0b3IocSkpfWVsc2V7aWYocSE9IiMiKXthLmRhdGEobywiaHJlZi50YWJzIixxKTthLmRhdGEobywibG9hZC50YWJzIixxLnJlcGxhY2UoLyMuKiQvLCIiKSk7dmFyIHc9cC5fdGFiSWQobyk7by5ocmVmPSIjIit3O3ZhciB2PWEoIiMiK3cpO2lmKCF2Lmxlbmd0aCl7dj1hKGQucGFuZWxUZW1wbGF0ZSkuYXR0cigiaWQiLHcpLmFkZENsYXNzKCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20iKS5pbnNlcnRBZnRlcihwLnBhbmVsc1tyLTFdfHxwLmxpc3QpO3YuZGF0YSgiZGVzdHJveS50YWJzIix0cnVlKX1wLnBhbmVscz1wLnBhbmVscy5hZGQodil9ZWxzZXtkLmRpc2FibGVkLnB1c2gocil9fX0pO2lmKG4pe3RoaXMuZWxlbWVudC5hZGRDbGFzcygidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCIpO3RoaXMubGlzdC5hZGRDbGFzcygidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGwiKTt0aGlzLmxpcy5hZGRDbGFzcygidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItdG9wIik7dGhpcy5wYW5lbHMuYWRkQ2xhc3MoInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbSIpO2lmKGQuc2VsZWN0ZWQ9PT11bmRlZmluZWQpe2lmKGxvY2F0aW9uLmhhc2gpe3RoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKHEsbyl7aWYoby5oYXNoPT1sb2NhdGlvbi5oYXNoKXtkLnNlbGVjdGVkPXE7cmV0dXJuIGZhbHNlfX0pfWlmKHR5cGVvZiBkLnNlbGVjdGVkIT0ibnVtYmVyIiYmZC5jb29raWUpe2Quc2VsZWN0ZWQ9cGFyc2VJbnQocC5fY29va2llKCksMTApfWlmKHR5cGVvZiBkLnNlbGVjdGVkIT0ibnVtYmVyIiYmdGhpcy5saXMuZmlsdGVyKCIudWktdGFicy1zZWxlY3RlZCIpLmxlbmd0aCl7ZC5zZWxlY3RlZD10aGlzLmxpcy5pbmRleCh0aGlzLmxpcy5maWx0ZXIoIi51aS10YWJzLXNlbGVjdGVkIikpfWQuc2VsZWN0ZWQ9ZC5zZWxlY3RlZHx8MH1lbHNle2lmKGQuc2VsZWN0ZWQ9PT1udWxsKXtkLnNlbGVjdGVkPS0xfX1kLnNlbGVjdGVkPSgoZC5zZWxlY3RlZD49MCYmdGhpcy5hbmNob3JzW2Quc2VsZWN0ZWRdKXx8ZC5zZWxlY3RlZDwwKT9kLnNlbGVjdGVkOjA7ZC5kaXNhYmxlZD1hLnVuaXF1ZShkLmRpc2FibGVkLmNvbmNhdChhLm1hcCh0aGlzLmxpcy5maWx0ZXIoIi51aS1zdGF0ZS1kaXNhYmxlZCIpLGZ1bmN0aW9uKHEsbyl7cmV0dXJuIHAubGlzLmluZGV4KHEpfSkpKS5zb3J0KCk7aWYoYS5pbkFycmF5KGQuc2VsZWN0ZWQsZC5kaXNhYmxlZCkhPS0xKXtkLmRpc2FibGVkLnNwbGljZShhLmluQXJyYXkoZC5zZWxlY3RlZCxkLmRpc2FibGVkKSwxKX10aGlzLnBhbmVscy5hZGRDbGFzcygidWktdGFicy1oaWRlIik7dGhpcy5saXMucmVtb3ZlQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIik7aWYoZC5zZWxlY3RlZD49MCYmdGhpcy5hbmNob3JzLmxlbmd0aCl7dGhpcy5wYW5lbHMuZXEoZC5zZWxlY3RlZCkucmVtb3ZlQ2xhc3MoInVpLXRhYnMtaGlkZSIpO3RoaXMubGlzLmVxKGQuc2VsZWN0ZWQpLmFkZENsYXNzKCJ1aS10YWJzLXNlbGVjdGVkIHVpLXN0YXRlLWFjdGl2ZSIpO3AuZWxlbWVudC5xdWV1ZSgidGFicyIsZnVuY3Rpb24oKXtwLl90cmlnZ2VyKCJzaG93IixudWxsLHAuX3VpKHAuYW5jaG9yc1tkLnNlbGVjdGVkXSxwLnBhbmVsc1tkLnNlbGVjdGVkXSkpfSk7dGhpcy5sb2FkKGQuc2VsZWN0ZWQpfWEod2luZG93KS5iaW5kKCJ1bmxvYWQiLGZ1bmN0aW9uKCl7cC5saXMuYWRkKHAuYW5jaG9ycykudW5iaW5kKCIudGFicyIpO3AubGlzPXAuYW5jaG9ycz1wLnBhbmVscz1udWxsfSl9ZWxzZXtkLnNlbGVjdGVkPXRoaXMubGlzLmluZGV4KHRoaXMubGlzLmZpbHRlcigiLnVpLXRhYnMtc2VsZWN0ZWQiKSl9dGhpcy5lbGVtZW50W2QuY29sbGFwc2libGU/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXSgidWktdGFicy1jb2xsYXBzaWJsZSIpO2lmKGQuY29va2llKXt0aGlzLl9jb29raWUoZC5zZWxlY3RlZCxkLmNvb2tpZSl9Zm9yKHZhciBnPTAsbTsobT10aGlzLmxpc1tnXSk7ZysrKXthKG0pW2EuaW5BcnJheShnLGQuZGlzYWJsZWQpIT0tMSYmIWEobSkuaGFzQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQiKT8iYWRkQ2xhc3MiOiJyZW1vdmVDbGFzcyJdKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpfWlmKGQuY2FjaGU9PT1mYWxzZSl7dGhpcy5hbmNob3JzLnJlbW92ZURhdGEoImNhY2hlLnRhYnMiKX10aGlzLmxpcy5hZGQodGhpcy5hbmNob3JzKS51bmJpbmQoIi50YWJzIik7aWYoZC5ldmVudCE9Im1vdXNlb3ZlciIpe3ZhciBmPWZ1bmN0aW9uKG8saSl7aWYoaS5pcygiOm5vdCgudWktc3RhdGUtZGlzYWJsZWQpIikpe2kuYWRkQ2xhc3MoInVpLXN0YXRlLSIrbyl9fTt2YXIgaj1mdW5jdGlvbihvLGkpe2kucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLSIrbyl9O3RoaXMubGlzLmJpbmQoIm1vdXNlb3Zlci50YWJzIixmdW5jdGlvbigpe2YoImhvdmVyIixhKHRoaXMpKX0pO3RoaXMubGlzLmJpbmQoIm1vdXNlb3V0LnRhYnMiLGZ1bmN0aW9uKCl7aigiaG92ZXIiLGEodGhpcykpfSk7dGhpcy5hbmNob3JzLmJpbmQoImZvY3VzLnRhYnMiLGZ1bmN0aW9uKCl7ZigiZm9jdXMiLGEodGhpcykuY2xvc2VzdCgibGkiKSl9KTt0aGlzLmFuY2hvcnMuYmluZCgiYmx1ci50YWJzIixmdW5jdGlvbigpe2ooImZvY3VzIixhKHRoaXMpLmNsb3Nlc3QoImxpIikpfSl9dmFyIGIsaDtpZihkLmZ4KXtpZihhLmlzQXJyYXkoZC5meCkpe2I9ZC5meFswXTtoPWQuZnhbMV19ZWxzZXtiPWg9ZC5meH19ZnVuY3Rpb24gZShpLG8pe2kuY3NzKHtkaXNwbGF5OiIifSk7aWYoYS5icm93c2VyLm1zaWUmJm8ub3BhY2l0eSl7aVswXS5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpfX12YXIgaz1oP2Z1bmN0aW9uKGksbyl7YShpKS5jbG9zZXN0KCJsaSIpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kZWZhdWx0IikuYWRkQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIik7by5oaWRlKCkucmVtb3ZlQ2xhc3MoInVpLXRhYnMtaGlkZSIpLmFuaW1hdGUoaCxoLmR1cmF0aW9ufHwibm9ybWFsIixmdW5jdGlvbigpe2UobyxoKTtwLl90cmlnZ2VyKCJzaG93IixudWxsLHAuX3VpKGksb1swXSkpfSl9OmZ1bmN0aW9uKGksbyl7YShpKS5jbG9zZXN0KCJsaSIpLnJlbW92ZUNsYXNzKCJ1aS1zdGF0ZS1kZWZhdWx0IikuYWRkQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIik7by5yZW1vdmVDbGFzcygidWktdGFicy1oaWRlIik7cC5fdHJpZ2dlcigic2hvdyIsbnVsbCxwLl91aShpLG9bMF0pKX07dmFyIGw9Yj9mdW5jdGlvbihvLGkpe2kuYW5pbWF0ZShiLGIuZHVyYXRpb258fCJub3JtYWwiLGZ1bmN0aW9uKCl7cC5saXMucmVtb3ZlQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIikuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQiKTtpLmFkZENsYXNzKCJ1aS10YWJzLWhpZGUiKTtlKGksYik7cC5lbGVtZW50LmRlcXVldWUoInRhYnMiKX0pfTpmdW5jdGlvbihvLGkscSl7cC5saXMucmVtb3ZlQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQgdWktc3RhdGUtYWN0aXZlIikuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQiKTtpLmFkZENsYXNzKCJ1aS10YWJzLWhpZGUiKTtwLmVsZW1lbnQuZGVxdWV1ZSgidGFicyIpfTt0aGlzLmFuY2hvcnMuYmluZChkLmV2ZW50KyIudGFicyIsZnVuY3Rpb24oKXt2YXIgbz10aGlzLHI9YSh0aGlzKS5jbG9zZXN0KCJsaSIpLGk9cC5wYW5lbHMuZmlsdGVyKCI6bm90KC51aS10YWJzLWhpZGUpIikscT1hKHAuX3Nhbml0aXplU2VsZWN0b3IodGhpcy5oYXNoKSk7aWYoKHIuaGFzQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQiKSYmIWQuY29sbGFwc2libGUpfHxyLmhhc0NsYXNzKCJ1aS1zdGF0ZS1kaXNhYmxlZCIpfHxyLmhhc0NsYXNzKCJ1aS1zdGF0ZS1wcm9jZXNzaW5nIil8fHAuX3RyaWdnZXIoInNlbGVjdCIsbnVsbCxwLl91aSh0aGlzLHFbMF0pKT09PWZhbHNlKXt0aGlzLmJsdXIoKTtyZXR1cm4gZmFsc2V9ZC5zZWxlY3RlZD1wLmFuY2hvcnMuaW5kZXgodGhpcyk7cC5hYm9ydCgpO2lmKGQuY29sbGFwc2libGUpe2lmKHIuaGFzQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQiKSl7ZC5zZWxlY3RlZD0tMTtpZihkLmNvb2tpZSl7cC5fY29va2llKGQuc2VsZWN0ZWQsZC5jb29raWUpfXAuZWxlbWVudC5xdWV1ZSgidGFicyIsZnVuY3Rpb24oKXtsKG8saSl9KS5kZXF1ZXVlKCJ0YWJzIik7dGhpcy5ibHVyKCk7cmV0dXJuIGZhbHNlfWVsc2V7aWYoIWkubGVuZ3RoKXtpZihkLmNvb2tpZSl7cC5fY29va2llKGQuc2VsZWN0ZWQsZC5jb29raWUpfXAuZWxlbWVudC5xdWV1ZSgidGFicyIsZnVuY3Rpb24oKXtrKG8scSl9KTtwLmxvYWQocC5hbmNob3JzLmluZGV4KHRoaXMpKTt0aGlzLmJsdXIoKTtyZXR1cm4gZmFsc2V9fX1pZihkLmNvb2tpZSl7cC5fY29va2llKGQuc2VsZWN0ZWQsZC5jb29raWUpfWlmKHEubGVuZ3RoKXtpZihpLmxlbmd0aCl7cC5lbGVtZW50LnF1ZXVlKCJ0YWJzIixmdW5jdGlvbigpe2wobyxpKX0pfXAuZWxlbWVudC5xdWV1ZSgidGFicyIsZnVuY3Rpb24oKXtrKG8scSl9KTtwLmxvYWQocC5hbmNob3JzLmluZGV4KHRoaXMpKX1lbHNle3Rocm93ImpRdWVyeSBVSSBUYWJzOiBNaXNtYXRjaGluZyBmcmFnbWVudCBpZGVudGlmaWVyLiJ9aWYoYS5icm93c2VyLm1zaWUpe3RoaXMuYmx1cigpfX0pO3RoaXMuYW5jaG9ycy5iaW5kKCJjbGljay50YWJzIixmdW5jdGlvbigpe3JldHVybiBmYWxzZX0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5vcHRpb25zO3RoaXMuYWJvcnQoKTt0aGlzLmVsZW1lbnQudW5iaW5kKCIudGFicyIpLnJlbW92ZUNsYXNzKCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLXRhYnMtY29sbGFwc2libGUiKS5yZW1vdmVEYXRhKCJ0YWJzIik7dGhpcy5saXN0LnJlbW92ZUNsYXNzKCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbCIpO3RoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YS5kYXRhKHRoaXMsImhyZWYudGFicyIpO2lmKGMpe3RoaXMuaHJlZj1jfXZhciBkPWEodGhpcykudW5iaW5kKCIudGFicyIpO2EuZWFjaChbImhyZWYiLCJsb2FkIiwiY2FjaGUiXSxmdW5jdGlvbihlLGYpe2QucmVtb3ZlRGF0YShmKyIudGFicyIpfSl9KTt0aGlzLmxpcy51bmJpbmQoIi50YWJzIikuYWRkKHRoaXMucGFuZWxzKS5lYWNoKGZ1bmN0aW9uKCl7aWYoYS5kYXRhKHRoaXMsImRlc3Ryb3kudGFicyIpKXthKHRoaXMpLnJlbW92ZSgpfWVsc2V7YSh0aGlzKS5yZW1vdmVDbGFzcyhbInVpLXN0YXRlLWRlZmF1bHQiLCJ1aS1jb3JuZXItdG9wIiwidWktdGFicy1zZWxlY3RlZCIsInVpLXN0YXRlLWFjdGl2ZSIsInVpLXN0YXRlLWhvdmVyIiwidWktc3RhdGUtZm9jdXMiLCJ1aS1zdGF0ZS1kaXNhYmxlZCIsInVpLXRhYnMtcGFuZWwiLCJ1aS13aWRnZXQtY29udGVudCIsInVpLWNvcm5lci1ib3R0b20iLCJ1aS10YWJzLWhpZGUiXS5qb2luKCIgIikpfX0pO2lmKGIuY29va2llKXt0aGlzLl9jb29raWUobnVsbCxiLmNvb2tpZSl9fSxhZGQ6ZnVuY3Rpb24oZSxkLGMpe2lmKGM9PT11bmRlZmluZWQpe2M9dGhpcy5hbmNob3JzLmxlbmd0aH12YXIgYj10aGlzLGc9dGhpcy5vcHRpb25zLGk9YShnLnRhYlRlbXBsYXRlLnJlcGxhY2UoLyNce2hyZWZcfS9nLGUpLnJlcGxhY2UoLyNce2xhYmVsXH0vZyxkKSksaD0hZS5pbmRleE9mKCIjIik/ZS5yZXBsYWNlKCIjIiwiIik6dGhpcy5fdGFiSWQoYSgiYSIsaSlbMF0pO2kuYWRkQ2xhc3MoInVpLXN0YXRlLWRlZmF1bHQgdWktY29ybmVyLXRvcCIpLmRhdGEoImRlc3Ryb3kudGFicyIsdHJ1ZSk7dmFyIGY9YSgiIyIraCk7aWYoIWYubGVuZ3RoKXtmPWEoZy5wYW5lbFRlbXBsYXRlKS5hdHRyKCJpZCIsaCkuZGF0YSgiZGVzdHJveS50YWJzIix0cnVlKX1mLmFkZENsYXNzKCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b20gdWktdGFicy1oaWRlIik7aWYoYz49dGhpcy5saXMubGVuZ3RoKXtpLmFwcGVuZFRvKHRoaXMubGlzdCk7Zi5hcHBlbmRUbyh0aGlzLmxpc3RbMF0ucGFyZW50Tm9kZSl9ZWxzZXtpLmluc2VydEJlZm9yZSh0aGlzLmxpc1tjXSk7Zi5pbnNlcnRCZWZvcmUodGhpcy5wYW5lbHNbY10pfWcuZGlzYWJsZWQ9YS5tYXAoZy5kaXNhYmxlZCxmdW5jdGlvbihrLGope3JldHVybiBrPj1jPysrazprfSk7dGhpcy5fdGFiaWZ5KCk7aWYodGhpcy5hbmNob3JzLmxlbmd0aD09MSl7aS5hZGRDbGFzcygidWktdGFicy1zZWxlY3RlZCB1aS1zdGF0ZS1hY3RpdmUiKTtmLnJlbW92ZUNsYXNzKCJ1aS10YWJzLWhpZGUiKTt0aGlzLmVsZW1lbnQucXVldWUoInRhYnMiLGZ1bmN0aW9uKCl7Yi5fdHJpZ2dlcigic2hvdyIsbnVsbCxiLl91aShiLmFuY2hvcnNbMF0sYi5wYW5lbHNbMF0pKX0pO3RoaXMubG9hZCgwKX10aGlzLl90cmlnZ2VyKCJhZGQiLG51bGwsdGhpcy5fdWkodGhpcy5hbmNob3JzW2NdLHRoaXMucGFuZWxzW2NdKSl9LHJlbW92ZTpmdW5jdGlvbihiKXt2YXIgZD10aGlzLm9wdGlvbnMsZT10aGlzLmxpcy5lcShiKS5yZW1vdmUoKSxjPXRoaXMucGFuZWxzLmVxKGIpLnJlbW92ZSgpO2lmKGUuaGFzQ2xhc3MoInVpLXRhYnMtc2VsZWN0ZWQiKSYmdGhpcy5hbmNob3JzLmxlbmd0aD4xKXt0aGlzLnNlbGVjdChiKyhiKzE8dGhpcy5hbmNob3JzLmxlbmd0aD8xOi0xKSl9ZC5kaXNhYmxlZD1hLm1hcChhLmdyZXAoZC5kaXNhYmxlZCxmdW5jdGlvbihnLGYpe3JldHVybiBnIT1ifSksZnVuY3Rpb24oZyxmKXtyZXR1cm4gZz49Yj8tLWc6Z30pO3RoaXMuX3RhYmlmeSgpO3RoaXMuX3RyaWdnZXIoInJlbW92ZSIsbnVsbCx0aGlzLl91aShlLmZpbmQoImEiKVswXSxjWzBdKSl9LGVuYWJsZTpmdW5jdGlvbihiKXt2YXIgYz10aGlzLm9wdGlvbnM7aWYoYS5pbkFycmF5KGIsYy5kaXNhYmxlZCk9PS0xKXtyZXR1cm59dGhpcy5saXMuZXEoYikucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIik7Yy5kaXNhYmxlZD1hLmdyZXAoYy5kaXNhYmxlZCxmdW5jdGlvbihlLGQpe3JldHVybiBlIT1ifSk7dGhpcy5fdHJpZ2dlcigiZW5hYmxlIixudWxsLHRoaXMuX3VpKHRoaXMuYW5jaG9yc1tiXSx0aGlzLnBhbmVsc1tiXSkpfSxkaXNhYmxlOmZ1bmN0aW9uKGMpe3ZhciBiPXRoaXMsZD10aGlzLm9wdGlvbnM7aWYoYyE9ZC5zZWxlY3RlZCl7dGhpcy5saXMuZXEoYykuYWRkQ2xhc3MoInVpLXN0YXRlLWRpc2FibGVkIik7ZC5kaXNhYmxlZC5wdXNoKGMpO2QuZGlzYWJsZWQuc29ydCgpO3RoaXMuX3RyaWdnZXIoImRpc2FibGUiLG51bGwsdGhpcy5fdWkodGhpcy5hbmNob3JzW2NdLHRoaXMucGFuZWxzW2NdKSl9fSxzZWxlY3Q6ZnVuY3Rpb24oYil7aWYodHlwZW9mIGI9PSJzdHJpbmciKXtiPXRoaXMuYW5jaG9ycy5pbmRleCh0aGlzLmFuY2hvcnMuZmlsdGVyKCJbaHJlZiQ9IitiKyJdIikpfWVsc2V7aWYoYj09PW51bGwpe2I9LTF9fWlmKGI9PS0xJiZ0aGlzLm9wdGlvbnMuY29sbGFwc2libGUpe2I9dGhpcy5vcHRpb25zLnNlbGVjdGVkfXRoaXMuYW5jaG9ycy5lcShiKS50cmlnZ2VyKHRoaXMub3B0aW9ucy5ldmVudCsiLnRhYnMiKX0sbG9hZDpmdW5jdGlvbihlKXt2YXIgYz10aGlzLGc9dGhpcy5vcHRpb25zLGI9dGhpcy5hbmNob3JzLmVxKGUpWzBdLGQ9YS5kYXRhKGIsImxvYWQudGFicyIpO3RoaXMuYWJvcnQoKTtpZighZHx8dGhpcy5lbGVtZW50LnF1ZXVlKCJ0YWJzIikubGVuZ3RoIT09MCYmYS5kYXRhKGIsImNhY2hlLnRhYnMiKSl7dGhpcy5lbGVtZW50LmRlcXVldWUoInRhYnMiKTtyZXR1cm59dGhpcy5saXMuZXEoZSkuYWRkQ2xhc3MoInVpLXN0YXRlLXByb2Nlc3NpbmciKTtpZihnLnNwaW5uZXIpe3ZhciBmPWEoInNwYW4iLGIpO2YuZGF0YSgibGFiZWwudGFicyIsZi5odG1sKCkpLmh0bWwoZy5zcGlubmVyKX10aGlzLnhocj1hLmFqYXgoYS5leHRlbmQoe30sZy5hamF4T3B0aW9ucyx7dXJsOmQsc3VjY2VzczpmdW5jdGlvbihpLGgpe2EoYy5fc2FuaXRpemVTZWxlY3RvcihiLmhhc2gpKS5odG1sKGkpO2MuX2NsZWFudXAoKTtpZihnLmNhY2hlKXthLmRhdGEoYiwiY2FjaGUudGFicyIsdHJ1ZSl9Yy5fdHJpZ2dlcigibG9hZCIsbnVsbCxjLl91aShjLmFuY2hvcnNbZV0sYy5wYW5lbHNbZV0pKTt0cnl7Zy5hamF4T3B0aW9ucy5zdWNjZXNzKGksaCl9Y2F0Y2goail7fWMuZWxlbWVudC5kZXF1ZXVlKCJ0YWJzIil9fSkpfSxhYm9ydDpmdW5jdGlvbigpe3RoaXMuZWxlbWVudC5xdWV1ZShbXSk7dGhpcy5wYW5lbHMuc3RvcChmYWxzZSx0cnVlKTtpZih0aGlzLnhocil7dGhpcy54aHIuYWJvcnQoKTtkZWxldGUgdGhpcy54aHJ9dGhpcy5fY2xlYW51cCgpfSx1cmw6ZnVuY3Rpb24oYyxiKXt0aGlzLmFuY2hvcnMuZXEoYykucmVtb3ZlRGF0YSgiY2FjaGUudGFicyIpLmRhdGEoImxvYWQudGFicyIsYil9LGxlbmd0aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmFuY2hvcnMubGVuZ3RofX0pO2EuZXh0ZW5kKGEudWkudGFicyx7dmVyc2lvbjoiMS43LjIiLGdldHRlcjoibGVuZ3RoIixkZWZhdWx0czp7YWpheE9wdGlvbnM6bnVsbCxjYWNoZTpmYWxzZSxjb29raWU6bnVsbCxjb2xsYXBzaWJsZTpmYWxzZSxkaXNhYmxlZDpbXSxldmVudDoiY2xpY2siLGZ4Om51bGwsaWRQcmVmaXg6InVpLXRhYnMtIixwYW5lbFRlbXBsYXRlOiI8ZGl2PjwvZGl2PiIsc3Bpbm5lcjoiPGVtPkxvYWRpbmcmIzgyMzA7PC9lbT4iLHRhYlRlbXBsYXRlOic8bGk+PGEgaHJlZj0iI3tocmVmfSI+PHNwYW4+I3tsYWJlbH08L3NwYW4+PC9hPjwvbGk+J319KTthLmV4dGVuZChhLnVpLnRhYnMucHJvdG90eXBlLHtyb3RhdGlvbjpudWxsLHJvdGF0ZTpmdW5jdGlvbihkLGYpe3ZhciBiPXRoaXMsZz10aGlzLm9wdGlvbnM7dmFyIGM9Yi5fcm90YXRlfHwoYi5fcm90YXRlPWZ1bmN0aW9uKGgpe2NsZWFyVGltZW91dChiLnJvdGF0aW9uKTtiLnJvdGF0aW9uPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgaT1nLnNlbGVjdGVkO2Iuc2VsZWN0KCsraTxiLmFuY2hvcnMubGVuZ3RoP2k6MCl9LGQpO2lmKGgpe2guc3RvcFByb3BhZ2F0aW9uKCl9fSk7dmFyIGU9Yi5fdW5yb3RhdGV8fChiLl91bnJvdGF0ZT0hZj9mdW5jdGlvbihoKXtpZihoLmNsaWVudFgpe2Iucm90YXRlKG51bGwpfX06ZnVuY3Rpb24oaCl7dD1nLnNlbGVjdGVkO2MoKX0pO2lmKGQpe3RoaXMuZWxlbWVudC5iaW5kKCJ0YWJzc2hvdyIsYyk7dGhpcy5hbmNob3JzLmJpbmQoZy5ldmVudCsiLnRhYnMiLGUpO2MoKX1lbHNle2NsZWFyVGltZW91dChiLnJvdGF0aW9uKTt0aGlzLmVsZW1lbnQudW5iaW5kKCJ0YWJzc2hvdyIsYyk7dGhpcy5hbmNob3JzLnVuYmluZChnLmV2ZW50KyIudGFicyIsZSk7ZGVsZXRlIHRoaXMuX3JvdGF0ZTtkZWxldGUgdGhpcy5fdW5yb3RhdGV9fX0pfSkoalF1ZXJ5KTs7LyoKICogalF1ZXJ5IFVJIERhdGVwaWNrZXIgMS43LjIKICoKICogQ29weXJpZ2h0IChjKSAyMDA5IEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkKICogYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICoKICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9EYXRlcGlja2VyCiAqCiAqIERlcGVuZHM6CiAqCXVpLmNvcmUuanMKICovCihmdW5jdGlvbigkKXskLmV4dGVuZCgkLnVpLHtkYXRlcGlja2VyOnt2ZXJzaW9uOiIxLjcuMiJ9fSk7dmFyIFBST1BfTkFNRT0iZGF0ZXBpY2tlciI7ZnVuY3Rpb24gRGF0ZXBpY2tlcigpe3RoaXMuZGVidWc9ZmFsc2U7dGhpcy5fY3VySW5zdD1udWxsO3RoaXMuX2tleUV2ZW50PWZhbHNlO3RoaXMuX2Rpc2FibGVkSW5wdXRzPVtdO3RoaXMuX2RhdGVwaWNrZXJTaG93aW5nPWZhbHNlO3RoaXMuX2luRGlhbG9nPWZhbHNlO3RoaXMuX21haW5EaXZJZD0idWktZGF0ZXBpY2tlci1kaXYiO3RoaXMuX2lubGluZUNsYXNzPSJ1aS1kYXRlcGlja2VyLWlubGluZSI7dGhpcy5fYXBwZW5kQ2xhc3M9InVpLWRhdGVwaWNrZXItYXBwZW5kIjt0aGlzLl90cmlnZ2VyQ2xhc3M9InVpLWRhdGVwaWNrZXItdHJpZ2dlciI7dGhpcy5fZGlhbG9nQ2xhc3M9InVpLWRhdGVwaWNrZXItZGlhbG9nIjt0aGlzLl9kaXNhYmxlQ2xhc3M9InVpLWRhdGVwaWNrZXItZGlzYWJsZWQiO3RoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzPSJ1aS1kYXRlcGlja2VyLXVuc2VsZWN0YWJsZSI7dGhpcy5fY3VycmVudENsYXNzPSJ1aS1kYXRlcGlja2VyLWN1cnJlbnQtZGF5Ijt0aGlzLl9kYXlPdmVyQ2xhc3M9InVpLWRhdGVwaWNrZXItZGF5cy1jZWxsLW92ZXIiO3RoaXMucmVnaW9uYWw9W107dGhpcy5yZWdpb25hbFsiIl09e2Nsb3NlVGV4dDoiRG9uZSIscHJldlRleHQ6IlByZXYiLG5leHRUZXh0OiJOZXh0IixjdXJyZW50VGV4dDoiVG9kYXkiLG1vbnRoTmFtZXM6WyJKYW51YXJ5IiwiRmVicnVhcnkiLCJNYXJjaCIsIkFwcmlsIiwiTWF5IiwiSnVuZSIsIkp1bHkiLCJBdWd1c3QiLCJTZXB0ZW1iZXIiLCJPY3RvYmVyIiwiTm92ZW1iZXIiLCJEZWNlbWJlciJdLG1vbnRoTmFtZXNTaG9ydDpbIkphbiIsIkZlYiIsIk1hciIsIkFwciIsIk1heSIsIkp1biIsIkp1bCIsIkF1ZyIsIlNlcCIsIk9jdCIsIk5vdiIsIkRlYyJdLGRheU5hbWVzOlsiU3VuZGF5IiwiTW9uZGF5IiwiVHVlc2RheSIsIldlZG5lc2RheSIsIlRodXJzZGF5IiwiRnJpZGF5IiwiU2F0dXJkYXkiXSxkYXlOYW1lc1Nob3J0OlsiU3VuIiwiTW9uIiwiVHVlIiwiV2VkIiwiVGh1IiwiRnJpIiwiU2F0Il0sZGF5TmFtZXNNaW46WyJTdSIsIk1vIiwiVHUiLCJXZSIsIlRoIiwiRnIiLCJTYSJdLGRhdGVGb3JtYXQ6Im1tL2RkL3l5IixmaXJzdERheTowLGlzUlRMOmZhbHNlfTt0aGlzLl9kZWZhdWx0cz17c2hvd09uOiJmb2N1cyIsc2hvd0FuaW06InNob3ciLHNob3dPcHRpb25zOnt9LGRlZmF1bHREYXRlOm51bGwsYXBwZW5kVGV4dDoiIixidXR0b25UZXh0OiIuLi4iLGJ1dHRvbkltYWdlOiIiLGJ1dHRvbkltYWdlT25seTpmYWxzZSxoaWRlSWZOb1ByZXZOZXh0OmZhbHNlLG5hdmlnYXRpb25Bc0RhdGVGb3JtYXQ6ZmFsc2UsZ290b0N1cnJlbnQ6ZmFsc2UsY2hhbmdlTW9udGg6ZmFsc2UsY2hhbmdlWWVhcjpmYWxzZSxzaG93TW9udGhBZnRlclllYXI6ZmFsc2UseWVhclJhbmdlOiItMTA6KzEwIixzaG93T3RoZXJNb250aHM6ZmFsc2UsY2FsY3VsYXRlV2Vlazp0aGlzLmlzbzg2MDFXZWVrLHNob3J0WWVhckN1dG9mZjoiKzEwIixtaW5EYXRlOm51bGwsbWF4RGF0ZTpudWxsLGR1cmF0aW9uOiJub3JtYWwiLGJlZm9yZVNob3dEYXk6bnVsbCxiZWZvcmVTaG93Om51bGwsb25TZWxlY3Q6bnVsbCxvbkNoYW5nZU1vbnRoWWVhcjpudWxsLG9uQ2xvc2U6bnVsbCxudW1iZXJPZk1vbnRoczoxLHNob3dDdXJyZW50QXRQb3M6MCxzdGVwTW9udGhzOjEsc3RlcEJpZ01vbnRoczoxMixhbHRGaWVsZDoiIixhbHRGb3JtYXQ6IiIsY29uc3RyYWluSW5wdXQ6dHJ1ZSxzaG93QnV0dG9uUGFuZWw6ZmFsc2V9OyQuZXh0ZW5kKHRoaXMuX2RlZmF1bHRzLHRoaXMucmVnaW9uYWxbIiJdKTt0aGlzLmRwRGl2PSQoJzxkaXYgaWQ9IicrdGhpcy5fbWFpbkRpdklkKyciIGNsYXNzPSJ1aS1kYXRlcGlja2VyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1oZWxwZXItY2xlYXJmaXggdWktY29ybmVyLWFsbCB1aS1oZWxwZXItaGlkZGVuLWFjY2Vzc2libGUiPjwvZGl2PicpfSQuZXh0ZW5kKERhdGVwaWNrZXIucHJvdG90eXBlLHttYXJrZXJDbGFzc05hbWU6Imhhc0RhdGVwaWNrZXIiLGxvZzpmdW5jdGlvbigpe2lmKHRoaXMuZGVidWcpe2NvbnNvbGUubG9nLmFwcGx5KCIiLGFyZ3VtZW50cyl9fSxzZXREZWZhdWx0czpmdW5jdGlvbihzZXR0aW5ncyl7ZXh0ZW5kUmVtb3ZlKHRoaXMuX2RlZmF1bHRzLHNldHRpbmdzfHx7fSk7cmV0dXJuIHRoaXN9LF9hdHRhY2hEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCxzZXR0aW5ncyl7dmFyIGlubGluZVNldHRpbmdzPW51bGw7Zm9yKHZhciBhdHRyTmFtZSBpbiB0aGlzLl9kZWZhdWx0cyl7dmFyIGF0dHJWYWx1ZT10YXJnZXQuZ2V0QXR0cmlidXRlKCJkYXRlOiIrYXR0ck5hbWUpO2lmKGF0dHJWYWx1ZSl7aW5saW5lU2V0dGluZ3M9aW5saW5lU2V0dGluZ3N8fHt9O3RyeXtpbmxpbmVTZXR0aW5nc1thdHRyTmFtZV09ZXZhbChhdHRyVmFsdWUpfWNhdGNoKGVycil7aW5saW5lU2V0dGluZ3NbYXR0ck5hbWVdPWF0dHJWYWx1ZX19fXZhciBub2RlTmFtZT10YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTt2YXIgaW5saW5lPShub2RlTmFtZT09ImRpdiJ8fG5vZGVOYW1lPT0ic3BhbiIpO2lmKCF0YXJnZXQuaWQpe3RhcmdldC5pZD0iZHAiKygrK3RoaXMudXVpZCl9dmFyIGluc3Q9dGhpcy5fbmV3SW5zdCgkKHRhcmdldCksaW5saW5lKTtpbnN0LnNldHRpbmdzPSQuZXh0ZW5kKHt9LHNldHRpbmdzfHx7fSxpbmxpbmVTZXR0aW5nc3x8e30pO2lmKG5vZGVOYW1lPT0iaW5wdXQiKXt0aGlzLl9jb25uZWN0RGF0ZXBpY2tlcih0YXJnZXQsaW5zdCl9ZWxzZXtpZihpbmxpbmUpe3RoaXMuX2lubGluZURhdGVwaWNrZXIodGFyZ2V0LGluc3QpfX19LF9uZXdJbnN0OmZ1bmN0aW9uKHRhcmdldCxpbmxpbmUpe3ZhciBpZD10YXJnZXRbMF0uaWQucmVwbGFjZSgvKFs6XFtcXVwuXSkvZywiXFxcXCQxIik7cmV0dXJue2lkOmlkLGlucHV0OnRhcmdldCxzZWxlY3RlZERheTowLHNlbGVjdGVkTW9udGg6MCxzZWxlY3RlZFllYXI6MCxkcmF3TW9udGg6MCxkcmF3WWVhcjowLGlubGluZTppbmxpbmUsZHBEaXY6KCFpbmxpbmU/dGhpcy5kcERpdjokKCc8ZGl2IGNsYXNzPSInK3RoaXMuX2lubGluZUNsYXNzKycgdWktZGF0ZXBpY2tlciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktaGVscGVyLWNsZWFyZml4IHVpLWNvcm5lci1hbGwiPjwvZGl2PicpKX19LF9jb25uZWN0RGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsaW5zdCl7dmFyIGlucHV0PSQodGFyZ2V0KTtpbnN0LmFwcGVuZD0kKFtdKTtpbnN0LnRyaWdnZXI9JChbXSk7aWYoaW5wdXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm59dmFyIGFwcGVuZFRleHQ9dGhpcy5fZ2V0KGluc3QsImFwcGVuZFRleHQiKTt2YXIgaXNSVEw9dGhpcy5fZ2V0KGluc3QsImlzUlRMIik7aWYoYXBwZW5kVGV4dCl7aW5zdC5hcHBlbmQ9JCgnPHNwYW4gY2xhc3M9IicrdGhpcy5fYXBwZW5kQ2xhc3MrJyI+JythcHBlbmRUZXh0KyI8L3NwYW4+Iik7aW5wdXRbaXNSVEw/ImJlZm9yZSI6ImFmdGVyIl0oaW5zdC5hcHBlbmQpfXZhciBzaG93T249dGhpcy5fZ2V0KGluc3QsInNob3dPbiIpO2lmKHNob3dPbj09ImZvY3VzInx8c2hvd09uPT0iYm90aCIpe2lucHV0LmZvY3VzKHRoaXMuX3Nob3dEYXRlcGlja2VyKX1pZihzaG93T249PSJidXR0b24ifHxzaG93T249PSJib3RoIil7dmFyIGJ1dHRvblRleHQ9dGhpcy5fZ2V0KGluc3QsImJ1dHRvblRleHQiKTt2YXIgYnV0dG9uSW1hZ2U9dGhpcy5fZ2V0KGluc3QsImJ1dHRvbkltYWdlIik7aW5zdC50cmlnZ2VyPSQodGhpcy5fZ2V0KGluc3QsImJ1dHRvbkltYWdlT25seSIpPyQoIjxpbWcvPiIpLmFkZENsYXNzKHRoaXMuX3RyaWdnZXJDbGFzcykuYXR0cih7c3JjOmJ1dHRvbkltYWdlLGFsdDpidXR0b25UZXh0LHRpdGxlOmJ1dHRvblRleHR9KTokKCc8YnV0dG9uIHR5cGU9ImJ1dHRvbiI+PC9idXR0b24+JykuYWRkQ2xhc3ModGhpcy5fdHJpZ2dlckNsYXNzKS5odG1sKGJ1dHRvbkltYWdlPT0iIj9idXR0b25UZXh0OiQoIjxpbWcvPiIpLmF0dHIoe3NyYzpidXR0b25JbWFnZSxhbHQ6YnV0dG9uVGV4dCx0aXRsZTpidXR0b25UZXh0fSkpKTtpbnB1dFtpc1JUTD8iYmVmb3JlIjoiYWZ0ZXIiXShpbnN0LnRyaWdnZXIpO2luc3QudHJpZ2dlci5jbGljayhmdW5jdGlvbigpe2lmKCQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmcmJiQuZGF0ZXBpY2tlci5fbGFzdElucHV0PT10YXJnZXQpeyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIoKX1lbHNleyQuZGF0ZXBpY2tlci5fc2hvd0RhdGVwaWNrZXIodGFyZ2V0KX1yZXR1cm4gZmFsc2V9KX1pbnB1dC5hZGRDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkua2V5ZG93bih0aGlzLl9kb0tleURvd24pLmtleXByZXNzKHRoaXMuX2RvS2V5UHJlc3MpLmJpbmQoInNldERhdGEuZGF0ZXBpY2tlciIsZnVuY3Rpb24oZXZlbnQsa2V5LHZhbHVlKXtpbnN0LnNldHRpbmdzW2tleV09dmFsdWV9KS5iaW5kKCJnZXREYXRhLmRhdGVwaWNrZXIiLGZ1bmN0aW9uKGV2ZW50LGtleSl7cmV0dXJuIHRoaXMuX2dldChpbnN0LGtleSl9KTskLmRhdGEodGFyZ2V0LFBST1BfTkFNRSxpbnN0KX0sX2lubGluZURhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0LGluc3Qpe3ZhciBkaXZTcGFuPSQodGFyZ2V0KTtpZihkaXZTcGFuLmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufWRpdlNwYW4uYWRkQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpLmFwcGVuZChpbnN0LmRwRGl2KS5iaW5kKCJzZXREYXRhLmRhdGVwaWNrZXIiLGZ1bmN0aW9uKGV2ZW50LGtleSx2YWx1ZSl7aW5zdC5zZXR0aW5nc1trZXldPXZhbHVlfSkuYmluZCgiZ2V0RGF0YS5kYXRlcGlja2VyIixmdW5jdGlvbihldmVudCxrZXkpe3JldHVybiB0aGlzLl9nZXQoaW5zdCxrZXkpfSk7JC5kYXRhKHRhcmdldCxQUk9QX05BTUUsaW5zdCk7dGhpcy5fc2V0RGF0ZShpbnN0LHRoaXMuX2dldERlZmF1bHREYXRlKGluc3QpKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpbnN0KX0sX2RpYWxvZ0RhdGVwaWNrZXI6ZnVuY3Rpb24oaW5wdXQsZGF0ZVRleHQsb25TZWxlY3Qsc2V0dGluZ3MscG9zKXt2YXIgaW5zdD10aGlzLl9kaWFsb2dJbnN0O2lmKCFpbnN0KXt2YXIgaWQ9ImRwIisoKyt0aGlzLnV1aWQpO3RoaXMuX2RpYWxvZ0lucHV0PSQoJzxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0iJytpZCsnIiBzaXplPSIxIiBzdHlsZT0icG9zaXRpb246IGFic29sdXRlOyB0b3A6IC0xMDBweDsiLz4nKTt0aGlzLl9kaWFsb2dJbnB1dC5rZXlkb3duKHRoaXMuX2RvS2V5RG93bik7JCgiYm9keSIpLmFwcGVuZCh0aGlzLl9kaWFsb2dJbnB1dCk7aW5zdD10aGlzLl9kaWFsb2dJbnN0PXRoaXMuX25ld0luc3QodGhpcy5fZGlhbG9nSW5wdXQsZmFsc2UpO2luc3Quc2V0dGluZ3M9e307JC5kYXRhKHRoaXMuX2RpYWxvZ0lucHV0WzBdLFBST1BfTkFNRSxpbnN0KX1leHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncyxzZXR0aW5nc3x8e30pO3RoaXMuX2RpYWxvZ0lucHV0LnZhbChkYXRlVGV4dCk7dGhpcy5fcG9zPShwb3M/KHBvcy5sZW5ndGg/cG9zOltwb3MucGFnZVgscG9zLnBhZ2VZXSk6bnVsbCk7aWYoIXRoaXMuX3Bvcyl7dmFyIGJyb3dzZXJXaWR0aD13aW5kb3cuaW5uZXJXaWR0aHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRofHxkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO3ZhciBicm93c2VySGVpZ2h0PXdpbmRvdy5pbm5lckhlaWdodHx8ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodHx8ZG9jdW1lbnQuYm9keS5jbGllbnRIZWlnaHQ7dmFyIHNjcm9sbFg9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdDt2YXIgc2Nyb2xsWT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDt0aGlzLl9wb3M9Wyhicm93c2VyV2lkdGgvMiktMTAwK3Njcm9sbFgsKGJyb3dzZXJIZWlnaHQvMiktMTUwK3Njcm9sbFldfXRoaXMuX2RpYWxvZ0lucHV0LmNzcygibGVmdCIsdGhpcy5fcG9zWzBdKyJweCIpLmNzcygidG9wIix0aGlzLl9wb3NbMV0rInB4Iik7aW5zdC5zZXR0aW5ncy5vblNlbGVjdD1vblNlbGVjdDt0aGlzLl9pbkRpYWxvZz10cnVlO3RoaXMuZHBEaXYuYWRkQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpO3RoaXMuX3Nob3dEYXRlcGlja2VyKHRoaXMuX2RpYWxvZ0lucHV0WzBdKTtpZigkLmJsb2NrVUkpeyQuYmxvY2tVSSh0aGlzLmRwRGl2KX0kLmRhdGEodGhpcy5fZGlhbG9nSW5wdXRbMF0sUFJPUF9OQU1FLGluc3QpO3JldHVybiB0aGlzfSxfZGVzdHJveURhdGVwaWNrZXI6ZnVuY3Rpb24odGFyZ2V0KXt2YXIgJHRhcmdldD0kKHRhcmdldCk7dmFyIGluc3Q9JC5kYXRhKHRhcmdldCxQUk9QX05BTUUpO2lmKCEkdGFyZ2V0Lmhhc0NsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKSl7cmV0dXJufXZhciBub2RlTmFtZT10YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTskLnJlbW92ZURhdGEodGFyZ2V0LFBST1BfTkFNRSk7aWYobm9kZU5hbWU9PSJpbnB1dCIpe2luc3QuYXBwZW5kLnJlbW92ZSgpO2luc3QudHJpZ2dlci5yZW1vdmUoKTskdGFyZ2V0LnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS51bmJpbmQoImZvY3VzIix0aGlzLl9zaG93RGF0ZXBpY2tlcikudW5iaW5kKCJrZXlkb3duIix0aGlzLl9kb0tleURvd24pLnVuYmluZCgia2V5cHJlc3MiLHRoaXMuX2RvS2V5UHJlc3MpfWVsc2V7aWYobm9kZU5hbWU9PSJkaXYifHxub2RlTmFtZT09InNwYW4iKXskdGFyZ2V0LnJlbW92ZUNsYXNzKHRoaXMubWFya2VyQ2xhc3NOYW1lKS5lbXB0eSgpfX19LF9lbmFibGVEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCl7dmFyICR0YXJnZXQ9JCh0YXJnZXQpO3ZhciBpbnN0PSQuZGF0YSh0YXJnZXQsUFJPUF9OQU1FKTtpZighJHRhcmdldC5oYXNDbGFzcyh0aGlzLm1hcmtlckNsYXNzTmFtZSkpe3JldHVybn12YXIgbm9kZU5hbWU9dGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7aWYobm9kZU5hbWU9PSJpbnB1dCIpe3RhcmdldC5kaXNhYmxlZD1mYWxzZTtpbnN0LnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD1mYWxzZX0pLmVuZCgpLmZpbHRlcigiaW1nIikuY3NzKHtvcGFjaXR5OiIxLjAiLGN1cnNvcjoiIn0pfWVsc2V7aWYobm9kZU5hbWU9PSJkaXYifHxub2RlTmFtZT09InNwYW4iKXt2YXIgaW5saW5lPSR0YXJnZXQuY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKTtpbmxpbmUuY2hpbGRyZW4oKS5yZW1vdmVDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKX19dGhpcy5fZGlzYWJsZWRJbnB1dHM9JC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24odmFsdWUpe3JldHVybih2YWx1ZT09dGFyZ2V0P251bGw6dmFsdWUpfSl9LF9kaXNhYmxlRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQpe3ZhciAkdGFyZ2V0PSQodGFyZ2V0KTt2YXIgaW5zdD0kLmRhdGEodGFyZ2V0LFBST1BfTkFNRSk7aWYoISR0YXJnZXQuaGFzQ2xhc3ModGhpcy5tYXJrZXJDbGFzc05hbWUpKXtyZXR1cm59dmFyIG5vZGVOYW1lPXRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO2lmKG5vZGVOYW1lPT0iaW5wdXQiKXt0YXJnZXQuZGlzYWJsZWQ9dHJ1ZTtpbnN0LnRyaWdnZXIuZmlsdGVyKCJidXR0b24iKS5lYWNoKGZ1bmN0aW9uKCl7dGhpcy5kaXNhYmxlZD10cnVlfSkuZW5kKCkuZmlsdGVyKCJpbWciKS5jc3Moe29wYWNpdHk6IjAuNSIsY3Vyc29yOiJkZWZhdWx0In0pfWVsc2V7aWYobm9kZU5hbWU9PSJkaXYifHxub2RlTmFtZT09InNwYW4iKXt2YXIgaW5saW5lPSR0YXJnZXQuY2hpbGRyZW4oIi4iK3RoaXMuX2lubGluZUNsYXNzKTtpbmxpbmUuY2hpbGRyZW4oKS5hZGRDbGFzcygidWktc3RhdGUtZGlzYWJsZWQiKX19dGhpcy5fZGlzYWJsZWRJbnB1dHM9JC5tYXAodGhpcy5fZGlzYWJsZWRJbnB1dHMsZnVuY3Rpb24odmFsdWUpe3JldHVybih2YWx1ZT09dGFyZ2V0P251bGw6dmFsdWUpfSk7dGhpcy5fZGlzYWJsZWRJbnB1dHNbdGhpcy5fZGlzYWJsZWRJbnB1dHMubGVuZ3RoXT10YXJnZXR9LF9pc0Rpc2FibGVkRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQpe2lmKCF0YXJnZXQpe3JldHVybiBmYWxzZX1mb3IodmFyIGk9MDtpPHRoaXMuX2Rpc2FibGVkSW5wdXRzLmxlbmd0aDtpKyspe2lmKHRoaXMuX2Rpc2FibGVkSW5wdXRzW2ldPT10YXJnZXQpe3JldHVybiB0cnVlfX1yZXR1cm4gZmFsc2V9LF9nZXRJbnN0OmZ1bmN0aW9uKHRhcmdldCl7dHJ5e3JldHVybiAkLmRhdGEodGFyZ2V0LFBST1BfTkFNRSl9Y2F0Y2goZXJyKXt0aHJvdyJNaXNzaW5nIGluc3RhbmNlIGRhdGEgZm9yIHRoaXMgZGF0ZXBpY2tlciJ9fSxfb3B0aW9uRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsbmFtZSx2YWx1ZSl7dmFyIGluc3Q9dGhpcy5fZ2V0SW5zdCh0YXJnZXQpO2lmKGFyZ3VtZW50cy5sZW5ndGg9PTImJnR5cGVvZiBuYW1lPT0ic3RyaW5nIil7cmV0dXJuKG5hbWU9PSJkZWZhdWx0cyI/JC5leHRlbmQoe30sJC5kYXRlcGlja2VyLl9kZWZhdWx0cyk6KGluc3Q/KG5hbWU9PSJhbGwiPyQuZXh0ZW5kKHt9LGluc3Quc2V0dGluZ3MpOnRoaXMuX2dldChpbnN0LG5hbWUpKTpudWxsKSl9dmFyIHNldHRpbmdzPW5hbWV8fHt9O2lmKHR5cGVvZiBuYW1lPT0ic3RyaW5nIil7c2V0dGluZ3M9e307c2V0dGluZ3NbbmFtZV09dmFsdWV9aWYoaW5zdCl7aWYodGhpcy5fY3VySW5zdD09aW5zdCl7dGhpcy5faGlkZURhdGVwaWNrZXIobnVsbCl9dmFyIGRhdGU9dGhpcy5fZ2V0RGF0ZURhdGVwaWNrZXIodGFyZ2V0KTtleHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncyxzZXR0aW5ncyk7dGhpcy5fc2V0RGF0ZURhdGVwaWNrZXIodGFyZ2V0LGRhdGUpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCl9fSxfY2hhbmdlRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQsbmFtZSx2YWx1ZSl7dGhpcy5fb3B0aW9uRGF0ZXBpY2tlcih0YXJnZXQsbmFtZSx2YWx1ZSl9LF9yZWZyZXNoRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQpe3ZhciBpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0KTtpZihpbnN0KXt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpfX0sX3NldERhdGVEYXRlcGlja2VyOmZ1bmN0aW9uKHRhcmdldCxkYXRlLGVuZERhdGUpe3ZhciBpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0KTtpZihpbnN0KXt0aGlzLl9zZXREYXRlKGluc3QsZGF0ZSxlbmREYXRlKTt0aGlzLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO3RoaXMuX3VwZGF0ZUFsdGVybmF0ZShpbnN0KX19LF9nZXREYXRlRGF0ZXBpY2tlcjpmdW5jdGlvbih0YXJnZXQpe3ZhciBpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0KTtpZihpbnN0JiYhaW5zdC5pbmxpbmUpe3RoaXMuX3NldERhdGVGcm9tRmllbGQoaW5zdCl9cmV0dXJuKGluc3Q/dGhpcy5fZ2V0RGF0ZShpbnN0KTpudWxsKX0sX2RvS2V5RG93bjpmdW5jdGlvbihldmVudCl7dmFyIGluc3Q9JC5kYXRlcGlja2VyLl9nZXRJbnN0KGV2ZW50LnRhcmdldCk7dmFyIGhhbmRsZWQ9dHJ1ZTt2YXIgaXNSVEw9aW5zdC5kcERpdi5pcygiLnVpLWRhdGVwaWNrZXItcnRsIik7aW5zdC5fa2V5RXZlbnQ9dHJ1ZTtpZigkLmRhdGVwaWNrZXIuX2RhdGVwaWNrZXJTaG93aW5nKXtzd2l0Y2goZXZlbnQua2V5Q29kZSl7Y2FzZSA5OiQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIobnVsbCwiIik7YnJlYWs7Y2FzZSAxMzp2YXIgc2VsPSQoInRkLiIrJC5kYXRlcGlja2VyLl9kYXlPdmVyQ2xhc3MrIiwgdGQuIiskLmRhdGVwaWNrZXIuX2N1cnJlbnRDbGFzcyxpbnN0LmRwRGl2KTtpZihzZWxbMF0peyQuZGF0ZXBpY2tlci5fc2VsZWN0RGF5KGV2ZW50LnRhcmdldCxpbnN0LnNlbGVjdGVkTW9udGgsaW5zdC5zZWxlY3RlZFllYXIsc2VsWzBdKX1lbHNleyQuZGF0ZXBpY2tlci5faGlkZURhdGVwaWNrZXIobnVsbCwkLmRhdGVwaWNrZXIuX2dldChpbnN0LCJkdXJhdGlvbiIpKX1yZXR1cm4gZmFsc2U7YnJlYWs7Y2FzZSAyNzokLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKG51bGwsJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwiZHVyYXRpb24iKSk7YnJlYWs7Y2FzZSAzMzokLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LChldmVudC5jdHJsS2V5Py0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzdGVwQmlnTW9udGhzIik6LSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBNb250aHMiKSksIk0iKTticmVhaztjYXNlIDM0OiQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsKGV2ZW50LmN0cmxLZXk/KyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBCaWdNb250aHMiKTorJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic3RlcE1vbnRocyIpKSwiTSIpO2JyZWFrO2Nhc2UgMzU6aWYoZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleSl7JC5kYXRlcGlja2VyLl9jbGVhckRhdGUoZXZlbnQudGFyZ2V0KX1oYW5kbGVkPWV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXk7YnJlYWs7Y2FzZSAzNjppZihldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2dvdG9Ub2RheShldmVudC50YXJnZXQpfWhhbmRsZWQ9ZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleTticmVhaztjYXNlIDM3OmlmKGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsKGlzUlRMPysxOi0xKSwiRCIpfWhhbmRsZWQ9ZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleTtpZihldmVudC5vcmlnaW5hbEV2ZW50LmFsdEtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwoZXZlbnQuY3RybEtleT8tJC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic3RlcEJpZ01vbnRocyIpOi0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzdGVwTW9udGhzIikpLCJNIil9YnJlYWs7Y2FzZSAzODppZihldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LC03LCJEIil9aGFuZGxlZD1ldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5O2JyZWFrO2Nhc2UgMzk6aWYoZXZlbnQuY3RybEtleXx8ZXZlbnQubWV0YUtleSl7JC5kYXRlcGlja2VyLl9hZGp1c3REYXRlKGV2ZW50LnRhcmdldCwoaXNSVEw/LTE6KzEpLCJEIil9aGFuZGxlZD1ldmVudC5jdHJsS2V5fHxldmVudC5tZXRhS2V5O2lmKGV2ZW50Lm9yaWdpbmFsRXZlbnQuYWx0S2V5KXskLmRhdGVwaWNrZXIuX2FkanVzdERhdGUoZXZlbnQudGFyZ2V0LChldmVudC5jdHJsS2V5PyskLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzdGVwQmlnTW9udGhzIik6KyQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInN0ZXBNb250aHMiKSksIk0iKX1icmVhaztjYXNlIDQwOmlmKGV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXkpeyQuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShldmVudC50YXJnZXQsKzcsIkQiKX1oYW5kbGVkPWV2ZW50LmN0cmxLZXl8fGV2ZW50Lm1ldGFLZXk7YnJlYWs7ZGVmYXVsdDpoYW5kbGVkPWZhbHNlfX1lbHNle2lmKGV2ZW50LmtleUNvZGU9PTM2JiZldmVudC5jdHJsS2V5KXskLmRhdGVwaWNrZXIuX3Nob3dEYXRlcGlja2VyKHRoaXMpfWVsc2V7aGFuZGxlZD1mYWxzZX19aWYoaGFuZGxlZCl7ZXZlbnQucHJldmVudERlZmF1bHQoKTtldmVudC5zdG9wUHJvcGFnYXRpb24oKX19LF9kb0tleVByZXNzOmZ1bmN0aW9uKGV2ZW50KXt2YXIgaW5zdD0kLmRhdGVwaWNrZXIuX2dldEluc3QoZXZlbnQudGFyZ2V0KTtpZigkLmRhdGVwaWNrZXIuX2dldChpbnN0LCJjb25zdHJhaW5JbnB1dCIpKXt2YXIgY2hhcnM9JC5kYXRlcGlja2VyLl9wb3NzaWJsZUNoYXJzKCQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKSk7dmFyIGNocj1TdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LmNoYXJDb2RlPT11bmRlZmluZWQ/ZXZlbnQua2V5Q29kZTpldmVudC5jaGFyQ29kZSk7cmV0dXJuIGV2ZW50LmN0cmxLZXl8fChjaHI8IiAifHwhY2hhcnN8fGNoYXJzLmluZGV4T2YoY2hyKT4tMSl9fSxfc2hvd0RhdGVwaWNrZXI6ZnVuY3Rpb24oaW5wdXQpe2lucHV0PWlucHV0LnRhcmdldHx8aW5wdXQ7aWYoaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSE9ImlucHV0Iil7aW5wdXQ9JCgiaW5wdXQiLGlucHV0LnBhcmVudE5vZGUpWzBdfWlmKCQuZGF0ZXBpY2tlci5faXNEaXNhYmxlZERhdGVwaWNrZXIoaW5wdXQpfHwkLmRhdGVwaWNrZXIuX2xhc3RJbnB1dD09aW5wdXQpe3JldHVybn12YXIgaW5zdD0kLmRhdGVwaWNrZXIuX2dldEluc3QoaW5wdXQpO3ZhciBiZWZvcmVTaG93PSQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsImJlZm9yZVNob3ciKTtleHRlbmRSZW1vdmUoaW5zdC5zZXR0aW5ncywoYmVmb3JlU2hvdz9iZWZvcmVTaG93LmFwcGx5KGlucHV0LFtpbnB1dCxpbnN0XSk6e30pKTskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKG51bGwsIiIpOyQuZGF0ZXBpY2tlci5fbGFzdElucHV0PWlucHV0OyQuZGF0ZXBpY2tlci5fc2V0RGF0ZUZyb21GaWVsZChpbnN0KTtpZigkLmRhdGVwaWNrZXIuX2luRGlhbG9nKXtpbnB1dC52YWx1ZT0iIn1pZighJC5kYXRlcGlja2VyLl9wb3MpeyQuZGF0ZXBpY2tlci5fcG9zPSQuZGF0ZXBpY2tlci5fZmluZFBvcyhpbnB1dCk7JC5kYXRlcGlja2VyLl9wb3NbMV0rPWlucHV0Lm9mZnNldEhlaWdodH12YXIgaXNGaXhlZD1mYWxzZTskKGlucHV0KS5wYXJlbnRzKCkuZWFjaChmdW5jdGlvbigpe2lzRml4ZWR8PSQodGhpcykuY3NzKCJwb3NpdGlvbiIpPT0iZml4ZWQiO3JldHVybiAhaXNGaXhlZH0pO2lmKGlzRml4ZWQmJiQuYnJvd3Nlci5vcGVyYSl7JC5kYXRlcGlja2VyLl9wb3NbMF0tPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0OyQuZGF0ZXBpY2tlci5fcG9zWzFdLT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfXZhciBvZmZzZXQ9e2xlZnQ6JC5kYXRlcGlja2VyLl9wb3NbMF0sdG9wOiQuZGF0ZXBpY2tlci5fcG9zWzFdfTskLmRhdGVwaWNrZXIuX3Bvcz1udWxsO2luc3QucmFuZ2VTdGFydD1udWxsO2luc3QuZHBEaXYuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLGRpc3BsYXk6ImJsb2NrIix0b3A6Ii0xMDAwcHgifSk7JC5kYXRlcGlja2VyLl91cGRhdGVEYXRlcGlja2VyKGluc3QpO29mZnNldD0kLmRhdGVwaWNrZXIuX2NoZWNrT2Zmc2V0KGluc3Qsb2Zmc2V0LGlzRml4ZWQpO2luc3QuZHBEaXYuY3NzKHtwb3NpdGlvbjooJC5kYXRlcGlja2VyLl9pbkRpYWxvZyYmJC5ibG9ja1VJPyJzdGF0aWMiOihpc0ZpeGVkPyJmaXhlZCI6ImFic29sdXRlIikpLGRpc3BsYXk6Im5vbmUiLGxlZnQ6b2Zmc2V0LmxlZnQrInB4Iix0b3A6b2Zmc2V0LnRvcCsicHgifSk7aWYoIWluc3QuaW5saW5lKXt2YXIgc2hvd0FuaW09JC5kYXRlcGlja2VyLl9nZXQoaW5zdCwic2hvd0FuaW0iKXx8InNob3ciO3ZhciBkdXJhdGlvbj0kLmRhdGVwaWNrZXIuX2dldChpbnN0LCJkdXJhdGlvbiIpO3ZhciBwb3N0UHJvY2Vzcz1mdW5jdGlvbigpeyQuZGF0ZXBpY2tlci5fZGF0ZXBpY2tlclNob3dpbmc9dHJ1ZTtpZigkLmJyb3dzZXIubXNpZSYmcGFyc2VJbnQoJC5icm93c2VyLnZlcnNpb24sMTApPDcpeyQoImlmcmFtZS51aS1kYXRlcGlja2VyLWNvdmVyIikuY3NzKHt3aWR0aDppbnN0LmRwRGl2LndpZHRoKCkrNCxoZWlnaHQ6aW5zdC5kcERpdi5oZWlnaHQoKSs0fSl9fTtpZigkLmVmZmVjdHMmJiQuZWZmZWN0c1tzaG93QW5pbV0pe2luc3QuZHBEaXYuc2hvdyhzaG93QW5pbSwkLmRhdGVwaWNrZXIuX2dldChpbnN0LCJzaG93T3B0aW9ucyIpLGR1cmF0aW9uLHBvc3RQcm9jZXNzKX1lbHNle2luc3QuZHBEaXZbc2hvd0FuaW1dKGR1cmF0aW9uLHBvc3RQcm9jZXNzKX1pZihkdXJhdGlvbj09IiIpe3Bvc3RQcm9jZXNzKCl9aWYoaW5zdC5pbnB1dFswXS50eXBlIT0iaGlkZGVuIil7aW5zdC5pbnB1dFswXS5mb2N1cygpfSQuZGF0ZXBpY2tlci5fY3VySW5zdD1pbnN0fX0sX3VwZGF0ZURhdGVwaWNrZXI6ZnVuY3Rpb24oaW5zdCl7dmFyIGRpbXM9e3dpZHRoOmluc3QuZHBEaXYud2lkdGgoKSs0LGhlaWdodDppbnN0LmRwRGl2LmhlaWdodCgpKzR9O3ZhciBzZWxmPXRoaXM7aW5zdC5kcERpdi5lbXB0eSgpLmFwcGVuZCh0aGlzLl9nZW5lcmF0ZUhUTUwoaW5zdCkpLmZpbmQoImlmcmFtZS51aS1kYXRlcGlja2VyLWNvdmVyIikuY3NzKHt3aWR0aDpkaW1zLndpZHRoLGhlaWdodDpkaW1zLmhlaWdodH0pLmVuZCgpLmZpbmQoImJ1dHRvbiwgLnVpLWRhdGVwaWNrZXItcHJldiwgLnVpLWRhdGVwaWNrZXItbmV4dCwgLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIgdGQgYSIpLmJpbmQoIm1vdXNlb3V0IixmdW5jdGlvbigpeyQodGhpcykucmVtb3ZlQ2xhc3MoInVpLXN0YXRlLWhvdmVyIik7aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1wcmV2IikhPS0xKXskKHRoaXMpLnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLXByZXYtaG92ZXIiKX1pZih0aGlzLmNsYXNzTmFtZS5pbmRleE9mKCJ1aS1kYXRlcGlja2VyLW5leHQiKSE9LTEpeyQodGhpcykucmVtb3ZlQ2xhc3MoInVpLWRhdGVwaWNrZXItbmV4dC1ob3ZlciIpfX0pLmJpbmQoIm1vdXNlb3ZlciIsZnVuY3Rpb24oKXtpZighc2VsZi5faXNEaXNhYmxlZERhdGVwaWNrZXIoaW5zdC5pbmxpbmU/aW5zdC5kcERpdi5wYXJlbnQoKVswXTppbnN0LmlucHV0WzBdKSl7JCh0aGlzKS5wYXJlbnRzKCIudWktZGF0ZXBpY2tlci1jYWxlbmRhciIpLmZpbmQoImEiKS5yZW1vdmVDbGFzcygidWktc3RhdGUtaG92ZXIiKTskKHRoaXMpLmFkZENsYXNzKCJ1aS1zdGF0ZS1ob3ZlciIpO2lmKHRoaXMuY2xhc3NOYW1lLmluZGV4T2YoInVpLWRhdGVwaWNrZXItcHJldiIpIT0tMSl7JCh0aGlzKS5hZGRDbGFzcygidWktZGF0ZXBpY2tlci1wcmV2LWhvdmVyIil9aWYodGhpcy5jbGFzc05hbWUuaW5kZXhPZigidWktZGF0ZXBpY2tlci1uZXh0IikhPS0xKXskKHRoaXMpLmFkZENsYXNzKCJ1aS1kYXRlcGlja2VyLW5leHQtaG92ZXIiKX19fSkuZW5kKCkuZmluZCgiLiIrdGhpcy5fZGF5T3ZlckNsYXNzKyIgYSIpLnRyaWdnZXIoIm1vdXNlb3ZlciIpLmVuZCgpO3ZhciBudW1Nb250aHM9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaW5zdCk7dmFyIGNvbHM9bnVtTW9udGhzWzFdO3ZhciB3aWR0aD0xNztpZihjb2xzPjEpe2luc3QuZHBEaXYuYWRkQ2xhc3MoInVpLWRhdGVwaWNrZXItbXVsdGktIitjb2xzKS5jc3MoIndpZHRoIiwod2lkdGgqY29scykrImVtIil9ZWxzZXtpbnN0LmRwRGl2LnJlbW92ZUNsYXNzKCJ1aS1kYXRlcGlja2VyLW11bHRpLTIgdWktZGF0ZXBpY2tlci1tdWx0aS0zIHVpLWRhdGVwaWNrZXItbXVsdGktNCIpLndpZHRoKCIiKX1pbnN0LmRwRGl2WyhudW1Nb250aHNbMF0hPTF8fG51bU1vbnRoc1sxXSE9MT8iYWRkIjoicmVtb3ZlIikrIkNsYXNzIl0oInVpLWRhdGVwaWNrZXItbXVsdGkiKTtpbnN0LmRwRGl2Wyh0aGlzLl9nZXQoaW5zdCwiaXNSVEwiKT8iYWRkIjoicmVtb3ZlIikrIkNsYXNzIl0oInVpLWRhdGVwaWNrZXItcnRsIik7aWYoaW5zdC5pbnB1dCYmaW5zdC5pbnB1dFswXS50eXBlIT0iaGlkZGVuIiYmaW5zdD09JC5kYXRlcGlja2VyLl9jdXJJbnN0KXskKGluc3QuaW5wdXRbMF0pLmZvY3VzKCl9fSxfY2hlY2tPZmZzZXQ6ZnVuY3Rpb24oaW5zdCxvZmZzZXQsaXNGaXhlZCl7dmFyIGRwV2lkdGg9aW5zdC5kcERpdi5vdXRlcldpZHRoKCk7dmFyIGRwSGVpZ2h0PWluc3QuZHBEaXYub3V0ZXJIZWlnaHQoKTt2YXIgaW5wdXRXaWR0aD1pbnN0LmlucHV0P2luc3QuaW5wdXQub3V0ZXJXaWR0aCgpOjA7dmFyIGlucHV0SGVpZ2h0PWluc3QuaW5wdXQ/aW5zdC5pbnB1dC5vdXRlckhlaWdodCgpOjA7dmFyIHZpZXdXaWR0aD0od2luZG93LmlubmVyV2lkdGh8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aHx8ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCkrJChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpO3ZhciB2aWV3SGVpZ2h0PSh3aW5kb3cuaW5uZXJIZWlnaHR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHR8fGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0KSskKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtvZmZzZXQubGVmdC09KHRoaXMuX2dldChpbnN0LCJpc1JUTCIpPyhkcFdpZHRoLWlucHV0V2lkdGgpOjApO29mZnNldC5sZWZ0LT0oaXNGaXhlZCYmb2Zmc2V0LmxlZnQ9PWluc3QuaW5wdXQub2Zmc2V0KCkubGVmdCk/JChkb2N1bWVudCkuc2Nyb2xsTGVmdCgpOjA7b2Zmc2V0LnRvcC09KGlzRml4ZWQmJm9mZnNldC50b3A9PShpbnN0LmlucHV0Lm9mZnNldCgpLnRvcCtpbnB1dEhlaWdodCkpPyQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpOjA7b2Zmc2V0LmxlZnQtPShvZmZzZXQubGVmdCtkcFdpZHRoPnZpZXdXaWR0aCYmdmlld1dpZHRoPmRwV2lkdGgpP01hdGguYWJzKG9mZnNldC5sZWZ0K2RwV2lkdGgtdmlld1dpZHRoKTowO29mZnNldC50b3AtPShvZmZzZXQudG9wK2RwSGVpZ2h0PnZpZXdIZWlnaHQmJnZpZXdIZWlnaHQ+ZHBIZWlnaHQpP01hdGguYWJzKG9mZnNldC50b3ArZHBIZWlnaHQraW5wdXRIZWlnaHQqMi12aWV3SGVpZ2h0KTowO3JldHVybiBvZmZzZXR9LF9maW5kUG9zOmZ1bmN0aW9uKG9iail7d2hpbGUob2JqJiYob2JqLnR5cGU9PSJoaWRkZW4ifHxvYmoubm9kZVR5cGUhPTEpKXtvYmo9b2JqLm5leHRTaWJsaW5nfXZhciBwb3NpdGlvbj0kKG9iaikub2Zmc2V0KCk7cmV0dXJuW3Bvc2l0aW9uLmxlZnQscG9zaXRpb24udG9wXX0sX2hpZGVEYXRlcGlja2VyOmZ1bmN0aW9uKGlucHV0LGR1cmF0aW9uKXt2YXIgaW5zdD10aGlzLl9jdXJJbnN0O2lmKCFpbnN0fHwoaW5wdXQmJmluc3QhPSQuZGF0YShpbnB1dCxQUk9QX05BTUUpKSl7cmV0dXJufWlmKGluc3Quc3RheU9wZW4pe3RoaXMuX3NlbGVjdERhdGUoIiMiK2luc3QuaWQsdGhpcy5fZm9ybWF0RGF0ZShpbnN0LGluc3QuY3VycmVudERheSxpbnN0LmN1cnJlbnRNb250aCxpbnN0LmN1cnJlbnRZZWFyKSl9aW5zdC5zdGF5T3Blbj1mYWxzZTtpZih0aGlzLl9kYXRlcGlja2VyU2hvd2luZyl7ZHVyYXRpb249KGR1cmF0aW9uIT1udWxsP2R1cmF0aW9uOnRoaXMuX2dldChpbnN0LCJkdXJhdGlvbiIpKTt2YXIgc2hvd0FuaW09dGhpcy5fZ2V0KGluc3QsInNob3dBbmltIik7dmFyIHBvc3RQcm9jZXNzPWZ1bmN0aW9uKCl7JC5kYXRlcGlja2VyLl90aWR5RGlhbG9nKGluc3QpfTtpZihkdXJhdGlvbiE9IiImJiQuZWZmZWN0cyYmJC5lZmZlY3RzW3Nob3dBbmltXSl7aW5zdC5kcERpdi5oaWRlKHNob3dBbmltLCQuZGF0ZXBpY2tlci5fZ2V0KGluc3QsInNob3dPcHRpb25zIiksZHVyYXRpb24scG9zdFByb2Nlc3MpfWVsc2V7aW5zdC5kcERpdlsoZHVyYXRpb249PSIiPyJoaWRlIjooc2hvd0FuaW09PSJzbGlkZURvd24iPyJzbGlkZVVwIjooc2hvd0FuaW09PSJmYWRlSW4iPyJmYWRlT3V0IjoiaGlkZSIpKSldKGR1cmF0aW9uLHBvc3RQcm9jZXNzKX1pZihkdXJhdGlvbj09IiIpe3RoaXMuX3RpZHlEaWFsb2coaW5zdCl9dmFyIG9uQ2xvc2U9dGhpcy5fZ2V0KGluc3QsIm9uQ2xvc2UiKTtpZihvbkNsb3NlKXtvbkNsb3NlLmFwcGx5KChpbnN0LmlucHV0P2luc3QuaW5wdXRbMF06bnVsbCksWyhpbnN0LmlucHV0P2luc3QuaW5wdXQudmFsKCk6IiIpLGluc3RdKX10aGlzLl9kYXRlcGlja2VyU2hvd2luZz1mYWxzZTt0aGlzLl9sYXN0SW5wdXQ9bnVsbDtpZih0aGlzLl9pbkRpYWxvZyl7dGhpcy5fZGlhbG9nSW5wdXQuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLGxlZnQ6IjAiLHRvcDoiLTEwMHB4In0pO2lmKCQuYmxvY2tVSSl7JC51bmJsb2NrVUkoKTskKCJib2R5IikuYXBwZW5kKHRoaXMuZHBEaXYpfX10aGlzLl9pbkRpYWxvZz1mYWxzZX10aGlzLl9jdXJJbnN0PW51bGx9LF90aWR5RGlhbG9nOmZ1bmN0aW9uKGluc3Qpe2luc3QuZHBEaXYucmVtb3ZlQ2xhc3ModGhpcy5fZGlhbG9nQ2xhc3MpLnVuYmluZCgiLnVpLWRhdGVwaWNrZXItY2FsZW5kYXIiKX0sX2NoZWNrRXh0ZXJuYWxDbGljazpmdW5jdGlvbihldmVudCl7aWYoISQuZGF0ZXBpY2tlci5fY3VySW5zdCl7cmV0dXJufXZhciAkdGFyZ2V0PSQoZXZlbnQudGFyZ2V0KTtpZigoJHRhcmdldC5wYXJlbnRzKCIjIiskLmRhdGVwaWNrZXIuX21haW5EaXZJZCkubGVuZ3RoPT0wKSYmISR0YXJnZXQuaGFzQ2xhc3MoJC5kYXRlcGlja2VyLm1hcmtlckNsYXNzTmFtZSkmJiEkdGFyZ2V0Lmhhc0NsYXNzKCQuZGF0ZXBpY2tlci5fdHJpZ2dlckNsYXNzKSYmJC5kYXRlcGlja2VyLl9kYXRlcGlja2VyU2hvd2luZyYmISgkLmRhdGVwaWNrZXIuX2luRGlhbG9nJiYkLmJsb2NrVUkpKXskLmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKG51bGwsIiIpfX0sX2FkanVzdERhdGU6ZnVuY3Rpb24oaWQsb2Zmc2V0LHBlcmlvZCl7dmFyIHRhcmdldD0kKGlkKTt2YXIgaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7aWYodGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIodGFyZ2V0WzBdKSl7cmV0dXJufXRoaXMuX2FkanVzdEluc3REYXRlKGluc3Qsb2Zmc2V0KyhwZXJpb2Q9PSJNIj90aGlzLl9nZXQoaW5zdCwic2hvd0N1cnJlbnRBdFBvcyIpOjApLHBlcmlvZCk7dGhpcy5fdXBkYXRlRGF0ZXBpY2tlcihpbnN0KX0sX2dvdG9Ub2RheTpmdW5jdGlvbihpZCl7dmFyIHRhcmdldD0kKGlkKTt2YXIgaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7aWYodGhpcy5fZ2V0KGluc3QsImdvdG9DdXJyZW50IikmJmluc3QuY3VycmVudERheSl7aW5zdC5zZWxlY3RlZERheT1pbnN0LmN1cnJlbnREYXk7aW5zdC5kcmF3TW9udGg9aW5zdC5zZWxlY3RlZE1vbnRoPWluc3QuY3VycmVudE1vbnRoO2luc3QuZHJhd1llYXI9aW5zdC5zZWxlY3RlZFllYXI9aW5zdC5jdXJyZW50WWVhcn1lbHNle3ZhciBkYXRlPW5ldyBEYXRlKCk7aW5zdC5zZWxlY3RlZERheT1kYXRlLmdldERhdGUoKTtpbnN0LmRyYXdNb250aD1pbnN0LnNlbGVjdGVkTW9udGg9ZGF0ZS5nZXRNb250aCgpO2luc3QuZHJhd1llYXI9aW5zdC5zZWxlY3RlZFllYXI9ZGF0ZS5nZXRGdWxsWWVhcigpfXRoaXMuX25vdGlmeUNoYW5nZShpbnN0KTt0aGlzLl9hZGp1c3REYXRlKHRhcmdldCl9LF9zZWxlY3RNb250aFllYXI6ZnVuY3Rpb24oaWQsc2VsZWN0LHBlcmlvZCl7dmFyIHRhcmdldD0kKGlkKTt2YXIgaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7aW5zdC5fc2VsZWN0aW5nTW9udGhZZWFyPWZhbHNlO2luc3RbInNlbGVjdGVkIisocGVyaW9kPT0iTSI/Ik1vbnRoIjoiWWVhciIpXT1pbnN0WyJkcmF3IisocGVyaW9kPT0iTSI/Ik1vbnRoIjoiWWVhciIpXT1wYXJzZUludChzZWxlY3Qub3B0aW9uc1tzZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWUsMTApO3RoaXMuX25vdGlmeUNoYW5nZShpbnN0KTt0aGlzLl9hZGp1c3REYXRlKHRhcmdldCl9LF9jbGlja01vbnRoWWVhcjpmdW5jdGlvbihpZCl7dmFyIHRhcmdldD0kKGlkKTt2YXIgaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7aWYoaW5zdC5pbnB1dCYmaW5zdC5fc2VsZWN0aW5nTW9udGhZZWFyJiYhJC5icm93c2VyLm1zaWUpe2luc3QuaW5wdXRbMF0uZm9jdXMoKX1pbnN0Ll9zZWxlY3RpbmdNb250aFllYXI9IWluc3QuX3NlbGVjdGluZ01vbnRoWWVhcn0sX3NlbGVjdERheTpmdW5jdGlvbihpZCxtb250aCx5ZWFyLHRkKXt2YXIgdGFyZ2V0PSQoaWQpO2lmKCQodGQpLmhhc0NsYXNzKHRoaXMuX3Vuc2VsZWN0YWJsZUNsYXNzKXx8dGhpcy5faXNEaXNhYmxlZERhdGVwaWNrZXIodGFyZ2V0WzBdKSl7cmV0dXJufXZhciBpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTtpbnN0LnNlbGVjdGVkRGF5PWluc3QuY3VycmVudERheT0kKCJhIix0ZCkuaHRtbCgpO2luc3Quc2VsZWN0ZWRNb250aD1pbnN0LmN1cnJlbnRNb250aD1tb250aDtpbnN0LnNlbGVjdGVkWWVhcj1pbnN0LmN1cnJlbnRZZWFyPXllYXI7aWYoaW5zdC5zdGF5T3Blbil7aW5zdC5lbmREYXk9aW5zdC5lbmRNb250aD1pbnN0LmVuZFllYXI9bnVsbH10aGlzLl9zZWxlY3REYXRlKGlkLHRoaXMuX2Zvcm1hdERhdGUoaW5zdCxpbnN0LmN1cnJlbnREYXksaW5zdC5jdXJyZW50TW9udGgsaW5zdC5jdXJyZW50WWVhcikpO2lmKGluc3Quc3RheU9wZW4pe2luc3QucmFuZ2VTdGFydD10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShpbnN0LmN1cnJlbnRZZWFyLGluc3QuY3VycmVudE1vbnRoLGluc3QuY3VycmVudERheSkpO3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCl9fSxfY2xlYXJEYXRlOmZ1bmN0aW9uKGlkKXt2YXIgdGFyZ2V0PSQoaWQpO3ZhciBpbnN0PXRoaXMuX2dldEluc3QodGFyZ2V0WzBdKTtpbnN0LnN0YXlPcGVuPWZhbHNlO2luc3QuZW5kRGF5PWluc3QuZW5kTW9udGg9aW5zdC5lbmRZZWFyPWluc3QucmFuZ2VTdGFydD1udWxsO3RoaXMuX3NlbGVjdERhdGUodGFyZ2V0LCIiKX0sX3NlbGVjdERhdGU6ZnVuY3Rpb24oaWQsZGF0ZVN0cil7dmFyIHRhcmdldD0kKGlkKTt2YXIgaW5zdD10aGlzLl9nZXRJbnN0KHRhcmdldFswXSk7ZGF0ZVN0cj0oZGF0ZVN0ciE9bnVsbD9kYXRlU3RyOnRoaXMuX2Zvcm1hdERhdGUoaW5zdCkpO2lmKGluc3QuaW5wdXQpe2luc3QuaW5wdXQudmFsKGRhdGVTdHIpfXRoaXMuX3VwZGF0ZUFsdGVybmF0ZShpbnN0KTt2YXIgb25TZWxlY3Q9dGhpcy5fZ2V0KGluc3QsIm9uU2VsZWN0Iik7aWYob25TZWxlY3Qpe29uU2VsZWN0LmFwcGx5KChpbnN0LmlucHV0P2luc3QuaW5wdXRbMF06bnVsbCksW2RhdGVTdHIsaW5zdF0pfWVsc2V7aWYoaW5zdC5pbnB1dCl7aW5zdC5pbnB1dC50cmlnZ2VyKCJjaGFuZ2UiKX19aWYoaW5zdC5pbmxpbmUpe3RoaXMuX3VwZGF0ZURhdGVwaWNrZXIoaW5zdCl9ZWxzZXtpZighaW5zdC5zdGF5T3Blbil7dGhpcy5faGlkZURhdGVwaWNrZXIobnVsbCx0aGlzLl9nZXQoaW5zdCwiZHVyYXRpb24iKSk7dGhpcy5fbGFzdElucHV0PWluc3QuaW5wdXRbMF07aWYodHlwZW9mKGluc3QuaW5wdXRbMF0pIT0ib2JqZWN0Iil7aW5zdC5pbnB1dFswXS5mb2N1cygpfXRoaXMuX2xhc3RJbnB1dD1udWxsfX19LF91cGRhdGVBbHRlcm5hdGU6ZnVuY3Rpb24oaW5zdCl7dmFyIGFsdEZpZWxkPXRoaXMuX2dldChpbnN0LCJhbHRGaWVsZCIpO2lmKGFsdEZpZWxkKXt2YXIgYWx0Rm9ybWF0PXRoaXMuX2dldChpbnN0LCJhbHRGb3JtYXQiKXx8dGhpcy5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKTt2YXIgZGF0ZT10aGlzLl9nZXREYXRlKGluc3QpO2RhdGVTdHI9dGhpcy5mb3JtYXREYXRlKGFsdEZvcm1hdCxkYXRlLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSk7JChhbHRGaWVsZCkuZWFjaChmdW5jdGlvbigpeyQodGhpcykudmFsKGRhdGVTdHIpfSl9fSxub1dlZWtlbmRzOmZ1bmN0aW9uKGRhdGUpe3ZhciBkYXk9ZGF0ZS5nZXREYXkoKTtyZXR1cm5bKGRheT4wJiZkYXk8NiksIiJdfSxpc284NjAxV2VlazpmdW5jdGlvbihkYXRlKXt2YXIgY2hlY2tEYXRlPW5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSxkYXRlLmdldE1vbnRoKCksZGF0ZS5nZXREYXRlKCkpO3ZhciBmaXJzdE1vbj1uZXcgRGF0ZShjaGVja0RhdGUuZ2V0RnVsbFllYXIoKSwxLTEsNCk7dmFyIGZpcnN0RGF5PWZpcnN0TW9uLmdldERheSgpfHw3O2ZpcnN0TW9uLnNldERhdGUoZmlyc3RNb24uZ2V0RGF0ZSgpKzEtZmlyc3REYXkpO2lmKGZpcnN0RGF5PDQmJmNoZWNrRGF0ZTxmaXJzdE1vbil7Y2hlY2tEYXRlLnNldERhdGUoY2hlY2tEYXRlLmdldERhdGUoKS0zKTtyZXR1cm4gJC5kYXRlcGlja2VyLmlzbzg2MDFXZWVrKGNoZWNrRGF0ZSl9ZWxzZXtpZihjaGVja0RhdGU+bmV3IERhdGUoY2hlY2tEYXRlLmdldEZ1bGxZZWFyKCksMTItMSwyOCkpe2ZpcnN0RGF5PW5ldyBEYXRlKGNoZWNrRGF0ZS5nZXRGdWxsWWVhcigpKzEsMS0xLDQpLmdldERheSgpfHw3O2lmKGZpcnN0RGF5PjQmJihjaGVja0RhdGUuZ2V0RGF5KCl8fDcpPGZpcnN0RGF5LTMpe3JldHVybiAxfX19cmV0dXJuIE1hdGguZmxvb3IoKChjaGVja0RhdGUtZmlyc3RNb24pLzg2NDAwMDAwKS83KSsxfSxwYXJzZURhdGU6ZnVuY3Rpb24oZm9ybWF0LHZhbHVlLHNldHRpbmdzKXtpZihmb3JtYXQ9PW51bGx8fHZhbHVlPT1udWxsKXt0aHJvdyJJbnZhbGlkIGFyZ3VtZW50cyJ9dmFsdWU9KHR5cGVvZiB2YWx1ZT09Im9iamVjdCI/dmFsdWUudG9TdHJpbmcoKTp2YWx1ZSsiIik7aWYodmFsdWU9PSIiKXtyZXR1cm4gbnVsbH12YXIgc2hvcnRZZWFyQ3V0b2ZmPShzZXR0aW5ncz9zZXR0aW5ncy5zaG9ydFllYXJDdXRvZmY6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLnNob3J0WWVhckN1dG9mZjt2YXIgZGF5TmFtZXNTaG9ydD0oc2V0dGluZ3M/c2V0dGluZ3MuZGF5TmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydDt2YXIgZGF5TmFtZXM9KHNldHRpbmdzP3NldHRpbmdzLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lczt2YXIgbW9udGhOYW1lc1Nob3J0PShzZXR0aW5ncz9zZXR0aW5ncy5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydDt2YXIgbW9udGhOYW1lcz0oc2V0dGluZ3M/c2V0dGluZ3MubW9udGhOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lczt2YXIgeWVhcj0tMTt2YXIgbW9udGg9LTE7dmFyIGRheT0tMTt2YXIgZG95PS0xO3ZhciBsaXRlcmFsPWZhbHNlO3ZhciBsb29rQWhlYWQ9ZnVuY3Rpb24obWF0Y2gpe3ZhciBtYXRjaGVzPShpRm9ybWF0KzE8Zm9ybWF0Lmxlbmd0aCYmZm9ybWF0LmNoYXJBdChpRm9ybWF0KzEpPT1tYXRjaCk7aWYobWF0Y2hlcyl7aUZvcm1hdCsrfXJldHVybiBtYXRjaGVzfTt2YXIgZ2V0TnVtYmVyPWZ1bmN0aW9uKG1hdGNoKXtsb29rQWhlYWQobWF0Y2gpO3ZhciBvcmlnU2l6ZT0obWF0Y2g9PSJAIj8xNDoobWF0Y2g9PSJ5Ij80OihtYXRjaD09Im8iPzM6MikpKTt2YXIgc2l6ZT1vcmlnU2l6ZTt2YXIgbnVtPTA7d2hpbGUoc2l6ZT4wJiZpVmFsdWU8dmFsdWUubGVuZ3RoJiZ2YWx1ZS5jaGFyQXQoaVZhbHVlKT49IjAiJiZ2YWx1ZS5jaGFyQXQoaVZhbHVlKTw9IjkiKXtudW09bnVtKjEwK3BhcnNlSW50KHZhbHVlLmNoYXJBdChpVmFsdWUrKyksMTApO3NpemUtLX1pZihzaXplPT1vcmlnU2l6ZSl7dGhyb3ciTWlzc2luZyBudW1iZXIgYXQgcG9zaXRpb24gIitpVmFsdWV9cmV0dXJuIG51bX07dmFyIGdldE5hbWU9ZnVuY3Rpb24obWF0Y2gsc2hvcnROYW1lcyxsb25nTmFtZXMpe3ZhciBuYW1lcz0obG9va0FoZWFkKG1hdGNoKT9sb25nTmFtZXM6c2hvcnROYW1lcyk7dmFyIHNpemU9MDtmb3IodmFyIGo9MDtqPG5hbWVzLmxlbmd0aDtqKyspe3NpemU9TWF0aC5tYXgoc2l6ZSxuYW1lc1tqXS5sZW5ndGgpfXZhciBuYW1lPSIiO3ZhciBpSW5pdD1pVmFsdWU7d2hpbGUoc2l6ZT4wJiZpVmFsdWU8dmFsdWUubGVuZ3RoKXtuYW1lKz12YWx1ZS5jaGFyQXQoaVZhbHVlKyspO2Zvcih2YXIgaT0wO2k8bmFtZXMubGVuZ3RoO2krKyl7aWYobmFtZT09bmFtZXNbaV0pe3JldHVybiBpKzF9fXNpemUtLX10aHJvdyJVbmtub3duIG5hbWUgYXQgcG9zaXRpb24gIitpSW5pdH07dmFyIGNoZWNrTGl0ZXJhbD1mdW5jdGlvbigpe2lmKHZhbHVlLmNoYXJBdChpVmFsdWUpIT1mb3JtYXQuY2hhckF0KGlGb3JtYXQpKXt0aHJvdyJVbmV4cGVjdGVkIGxpdGVyYWwgYXQgcG9zaXRpb24gIitpVmFsdWV9aVZhbHVlKyt9O3ZhciBpVmFsdWU9MDtmb3IodmFyIGlGb3JtYXQ9MDtpRm9ybWF0PGZvcm1hdC5sZW5ndGg7aUZvcm1hdCsrKXtpZihsaXRlcmFsKXtpZihmb3JtYXQuY2hhckF0KGlGb3JtYXQpPT0iJyImJiFsb29rQWhlYWQoIiciKSl7bGl0ZXJhbD1mYWxzZX1lbHNle2NoZWNrTGl0ZXJhbCgpfX1lbHNle3N3aXRjaChmb3JtYXQuY2hhckF0KGlGb3JtYXQpKXtjYXNlImQiOmRheT1nZXROdW1iZXIoImQiKTticmVhaztjYXNlIkQiOmdldE5hbWUoIkQiLGRheU5hbWVzU2hvcnQsZGF5TmFtZXMpO2JyZWFrO2Nhc2UibyI6ZG95PWdldE51bWJlcigibyIpO2JyZWFrO2Nhc2UibSI6bW9udGg9Z2V0TnVtYmVyKCJtIik7YnJlYWs7Y2FzZSJNIjptb250aD1nZXROYW1lKCJNIixtb250aE5hbWVzU2hvcnQsbW9udGhOYW1lcyk7YnJlYWs7Y2FzZSJ5Ijp5ZWFyPWdldE51bWJlcigieSIpO2JyZWFrO2Nhc2UiQCI6dmFyIGRhdGU9bmV3IERhdGUoZ2V0TnVtYmVyKCJAIikpO3llYXI9ZGF0ZS5nZXRGdWxsWWVhcigpO21vbnRoPWRhdGUuZ2V0TW9udGgoKSsxO2RheT1kYXRlLmdldERhdGUoKTticmVhaztjYXNlIiciOmlmKGxvb2tBaGVhZCgiJyIpKXtjaGVja0xpdGVyYWwoKX1lbHNle2xpdGVyYWw9dHJ1ZX1icmVhaztkZWZhdWx0OmNoZWNrTGl0ZXJhbCgpfX19aWYoeWVhcj09LTEpe3llYXI9bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpfWVsc2V7aWYoeWVhcjwxMDApe3llYXIrPW5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKS1uZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCklMTAwKyh5ZWFyPD1zaG9ydFllYXJDdXRvZmY/MDotMTAwKX19aWYoZG95Pi0xKXttb250aD0xO2RheT1kb3k7ZG97dmFyIGRpbT10aGlzLl9nZXREYXlzSW5Nb250aCh5ZWFyLG1vbnRoLTEpO2lmKGRheTw9ZGltKXticmVha31tb250aCsrO2RheS09ZGltfXdoaWxlKHRydWUpfXZhciBkYXRlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsbW9udGgtMSxkYXkpKTtpZihkYXRlLmdldEZ1bGxZZWFyKCkhPXllYXJ8fGRhdGUuZ2V0TW9udGgoKSsxIT1tb250aHx8ZGF0ZS5nZXREYXRlKCkhPWRheSl7dGhyb3ciSW52YWxpZCBkYXRlIn1yZXR1cm4gZGF0ZX0sQVRPTToieXktbW0tZGQiLENPT0tJRToiRCwgZGQgTSB5eSIsSVNPXzg2MDE6Inl5LW1tLWRkIixSRkNfODIyOiJELCBkIE0geSIsUkZDXzg1MDoiREQsIGRkLU0teSIsUkZDXzEwMzY6IkQsIGQgTSB5IixSRkNfMTEyMzoiRCwgZCBNIHl5IixSRkNfMjgyMjoiRCwgZCBNIHl5IixSU1M6IkQsIGQgTSB5IixUSU1FU1RBTVA6IkAiLFczQzoieXktbW0tZGQiLGZvcm1hdERhdGU6ZnVuY3Rpb24oZm9ybWF0LGRhdGUsc2V0dGluZ3Mpe2lmKCFkYXRlKXtyZXR1cm4iIn12YXIgZGF5TmFtZXNTaG9ydD0oc2V0dGluZ3M/c2V0dGluZ3MuZGF5TmFtZXNTaG9ydDpudWxsKXx8dGhpcy5fZGVmYXVsdHMuZGF5TmFtZXNTaG9ydDt2YXIgZGF5TmFtZXM9KHNldHRpbmdzP3NldHRpbmdzLmRheU5hbWVzOm51bGwpfHx0aGlzLl9kZWZhdWx0cy5kYXlOYW1lczt2YXIgbW9udGhOYW1lc1Nob3J0PShzZXR0aW5ncz9zZXR0aW5ncy5tb250aE5hbWVzU2hvcnQ6bnVsbCl8fHRoaXMuX2RlZmF1bHRzLm1vbnRoTmFtZXNTaG9ydDt2YXIgbW9udGhOYW1lcz0oc2V0dGluZ3M/c2V0dGluZ3MubW9udGhOYW1lczpudWxsKXx8dGhpcy5fZGVmYXVsdHMubW9udGhOYW1lczt2YXIgbG9va0FoZWFkPWZ1bmN0aW9uKG1hdGNoKXt2YXIgbWF0Y2hlcz0oaUZvcm1hdCsxPGZvcm1hdC5sZW5ndGgmJmZvcm1hdC5jaGFyQXQoaUZvcm1hdCsxKT09bWF0Y2gpO2lmKG1hdGNoZXMpe2lGb3JtYXQrK31yZXR1cm4gbWF0Y2hlc307dmFyIGZvcm1hdE51bWJlcj1mdW5jdGlvbihtYXRjaCx2YWx1ZSxsZW4pe3ZhciBudW09IiIrdmFsdWU7aWYobG9va0FoZWFkKG1hdGNoKSl7d2hpbGUobnVtLmxlbmd0aDxsZW4pe251bT0iMCIrbnVtfX1yZXR1cm4gbnVtfTt2YXIgZm9ybWF0TmFtZT1mdW5jdGlvbihtYXRjaCx2YWx1ZSxzaG9ydE5hbWVzLGxvbmdOYW1lcyl7cmV0dXJuKGxvb2tBaGVhZChtYXRjaCk/bG9uZ05hbWVzW3ZhbHVlXTpzaG9ydE5hbWVzW3ZhbHVlXSl9O3ZhciBvdXRwdXQ9IiI7dmFyIGxpdGVyYWw9ZmFsc2U7aWYoZGF0ZSl7Zm9yKHZhciBpRm9ybWF0PTA7aUZvcm1hdDxmb3JtYXQubGVuZ3RoO2lGb3JtYXQrKyl7aWYobGl0ZXJhbCl7aWYoZm9ybWF0LmNoYXJBdChpRm9ybWF0KT09IiciJiYhbG9va0FoZWFkKCInIikpe2xpdGVyYWw9ZmFsc2V9ZWxzZXtvdXRwdXQrPWZvcm1hdC5jaGFyQXQoaUZvcm1hdCl9fWVsc2V7c3dpdGNoKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpe2Nhc2UiZCI6b3V0cHV0Kz1mb3JtYXROdW1iZXIoImQiLGRhdGUuZ2V0RGF0ZSgpLDIpO2JyZWFrO2Nhc2UiRCI6b3V0cHV0Kz1mb3JtYXROYW1lKCJEIixkYXRlLmdldERheSgpLGRheU5hbWVzU2hvcnQsZGF5TmFtZXMpO2JyZWFrO2Nhc2UibyI6dmFyIGRveT1kYXRlLmdldERhdGUoKTtmb3IodmFyIG09ZGF0ZS5nZXRNb250aCgpLTE7bT49MDttLS0pe2RveSs9dGhpcy5fZ2V0RGF5c0luTW9udGgoZGF0ZS5nZXRGdWxsWWVhcigpLG0pfW91dHB1dCs9Zm9ybWF0TnVtYmVyKCJvIixkb3ksMyk7YnJlYWs7Y2FzZSJtIjpvdXRwdXQrPWZvcm1hdE51bWJlcigibSIsZGF0ZS5nZXRNb250aCgpKzEsMik7YnJlYWs7Y2FzZSJNIjpvdXRwdXQrPWZvcm1hdE5hbWUoIk0iLGRhdGUuZ2V0TW9udGgoKSxtb250aE5hbWVzU2hvcnQsbW9udGhOYW1lcyk7YnJlYWs7Y2FzZSJ5IjpvdXRwdXQrPShsb29rQWhlYWQoInkiKT9kYXRlLmdldEZ1bGxZZWFyKCk6KGRhdGUuZ2V0WWVhcigpJTEwMDwxMD8iMCI6IiIpK2RhdGUuZ2V0WWVhcigpJTEwMCk7YnJlYWs7Y2FzZSJAIjpvdXRwdXQrPWRhdGUuZ2V0VGltZSgpO2JyZWFrO2Nhc2UiJyI6aWYobG9va0FoZWFkKCInIikpe291dHB1dCs9IicifWVsc2V7bGl0ZXJhbD10cnVlfWJyZWFrO2RlZmF1bHQ6b3V0cHV0Kz1mb3JtYXQuY2hhckF0KGlGb3JtYXQpfX19fXJldHVybiBvdXRwdXR9LF9wb3NzaWJsZUNoYXJzOmZ1bmN0aW9uKGZvcm1hdCl7dmFyIGNoYXJzPSIiO3ZhciBsaXRlcmFsPWZhbHNlO2Zvcih2YXIgaUZvcm1hdD0wO2lGb3JtYXQ8Zm9ybWF0Lmxlbmd0aDtpRm9ybWF0Kyspe2lmKGxpdGVyYWwpe2lmKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCk9PSInIiYmIWxvb2tBaGVhZCgiJyIpKXtsaXRlcmFsPWZhbHNlfWVsc2V7Y2hhcnMrPWZvcm1hdC5jaGFyQXQoaUZvcm1hdCl9fWVsc2V7c3dpdGNoKGZvcm1hdC5jaGFyQXQoaUZvcm1hdCkpe2Nhc2UiZCI6Y2FzZSJtIjpjYXNlInkiOmNhc2UiQCI6Y2hhcnMrPSIwMTIzNDU2Nzg5IjticmVhaztjYXNlIkQiOmNhc2UiTSI6cmV0dXJuIG51bGw7Y2FzZSInIjppZihsb29rQWhlYWQoIiciKSl7Y2hhcnMrPSInIn1lbHNle2xpdGVyYWw9dHJ1ZX1icmVhaztkZWZhdWx0OmNoYXJzKz1mb3JtYXQuY2hhckF0KGlGb3JtYXQpfX19cmV0dXJuIGNoYXJzfSxfZ2V0OmZ1bmN0aW9uKGluc3QsbmFtZSl7cmV0dXJuIGluc3Quc2V0dGluZ3NbbmFtZV0hPT11bmRlZmluZWQ/aW5zdC5zZXR0aW5nc1tuYW1lXTp0aGlzLl9kZWZhdWx0c1tuYW1lXX0sX3NldERhdGVGcm9tRmllbGQ6ZnVuY3Rpb24oaW5zdCl7dmFyIGRhdGVGb3JtYXQ9dGhpcy5fZ2V0KGluc3QsImRhdGVGb3JtYXQiKTt2YXIgZGF0ZXM9aW5zdC5pbnB1dD9pbnN0LmlucHV0LnZhbCgpOm51bGw7aW5zdC5lbmREYXk9aW5zdC5lbmRNb250aD1pbnN0LmVuZFllYXI9bnVsbDt2YXIgZGF0ZT1kZWZhdWx0RGF0ZT10aGlzLl9nZXREZWZhdWx0RGF0ZShpbnN0KTt2YXIgc2V0dGluZ3M9dGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpO3RyeXtkYXRlPXRoaXMucGFyc2VEYXRlKGRhdGVGb3JtYXQsZGF0ZXMsc2V0dGluZ3MpfHxkZWZhdWx0RGF0ZX1jYXRjaChldmVudCl7dGhpcy5sb2coZXZlbnQpO2RhdGU9ZGVmYXVsdERhdGV9aW5zdC5zZWxlY3RlZERheT1kYXRlLmdldERhdGUoKTtpbnN0LmRyYXdNb250aD1pbnN0LnNlbGVjdGVkTW9udGg9ZGF0ZS5nZXRNb250aCgpO2luc3QuZHJhd1llYXI9aW5zdC5zZWxlY3RlZFllYXI9ZGF0ZS5nZXRGdWxsWWVhcigpO2luc3QuY3VycmVudERheT0oZGF0ZXM/ZGF0ZS5nZXREYXRlKCk6MCk7aW5zdC5jdXJyZW50TW9udGg9KGRhdGVzP2RhdGUuZ2V0TW9udGgoKTowKTtpbnN0LmN1cnJlbnRZZWFyPShkYXRlcz9kYXRlLmdldEZ1bGxZZWFyKCk6MCk7dGhpcy5fYWRqdXN0SW5zdERhdGUoaW5zdCl9LF9nZXREZWZhdWx0RGF0ZTpmdW5jdGlvbihpbnN0KXt2YXIgZGF0ZT10aGlzLl9kZXRlcm1pbmVEYXRlKHRoaXMuX2dldChpbnN0LCJkZWZhdWx0RGF0ZSIpLG5ldyBEYXRlKCkpO3ZhciBtaW5EYXRlPXRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWluIix0cnVlKTt2YXIgbWF4RGF0ZT10aGlzLl9nZXRNaW5NYXhEYXRlKGluc3QsIm1heCIpO2RhdGU9KG1pbkRhdGUmJmRhdGU8bWluRGF0ZT9taW5EYXRlOmRhdGUpO2RhdGU9KG1heERhdGUmJmRhdGU+bWF4RGF0ZT9tYXhEYXRlOmRhdGUpO3JldHVybiBkYXRlfSxfZGV0ZXJtaW5lRGF0ZTpmdW5jdGlvbihkYXRlLGRlZmF1bHREYXRlKXt2YXIgb2Zmc2V0TnVtZXJpYz1mdW5jdGlvbihvZmZzZXQpe3ZhciBkYXRlPW5ldyBEYXRlKCk7ZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpK29mZnNldCk7cmV0dXJuIGRhdGV9O3ZhciBvZmZzZXRTdHJpbmc9ZnVuY3Rpb24ob2Zmc2V0LGdldERheXNJbk1vbnRoKXt2YXIgZGF0ZT1uZXcgRGF0ZSgpO3ZhciB5ZWFyPWRhdGUuZ2V0RnVsbFllYXIoKTt2YXIgbW9udGg9ZGF0ZS5nZXRNb250aCgpO3ZhciBkYXk9ZGF0ZS5nZXREYXRlKCk7dmFyIHBhdHRlcm49LyhbKy1dP1swLTldKylccyooZHxEfHd8V3xtfE18eXxZKT8vZzt2YXIgbWF0Y2hlcz1wYXR0ZXJuLmV4ZWMob2Zmc2V0KTt3aGlsZShtYXRjaGVzKXtzd2l0Y2gobWF0Y2hlc1syXXx8ImQiKXtjYXNlImQiOmNhc2UiRCI6ZGF5Kz1wYXJzZUludChtYXRjaGVzWzFdLDEwKTticmVhaztjYXNlInciOmNhc2UiVyI6ZGF5Kz1wYXJzZUludChtYXRjaGVzWzFdLDEwKSo3O2JyZWFrO2Nhc2UibSI6Y2FzZSJNIjptb250aCs9cGFyc2VJbnQobWF0Y2hlc1sxXSwxMCk7ZGF5PU1hdGgubWluKGRheSxnZXREYXlzSW5Nb250aCh5ZWFyLG1vbnRoKSk7YnJlYWs7Y2FzZSJ5IjpjYXNlIlkiOnllYXIrPXBhcnNlSW50KG1hdGNoZXNbMV0sMTApO2RheT1NYXRoLm1pbihkYXksZ2V0RGF5c0luTW9udGgoeWVhcixtb250aCkpO2JyZWFrfW1hdGNoZXM9cGF0dGVybi5leGVjKG9mZnNldCl9cmV0dXJuIG5ldyBEYXRlKHllYXIsbW9udGgsZGF5KX07ZGF0ZT0oZGF0ZT09bnVsbD9kZWZhdWx0RGF0ZToodHlwZW9mIGRhdGU9PSJzdHJpbmciP29mZnNldFN0cmluZyhkYXRlLHRoaXMuX2dldERheXNJbk1vbnRoKToodHlwZW9mIGRhdGU9PSJudW1iZXIiPyhpc05hTihkYXRlKT9kZWZhdWx0RGF0ZTpvZmZzZXROdW1lcmljKGRhdGUpKTpkYXRlKSkpO2RhdGU9KGRhdGUmJmRhdGUudG9TdHJpbmcoKT09IkludmFsaWQgRGF0ZSI/ZGVmYXVsdERhdGU6ZGF0ZSk7aWYoZGF0ZSl7ZGF0ZS5zZXRIb3VycygwKTtkYXRlLnNldE1pbnV0ZXMoMCk7ZGF0ZS5zZXRTZWNvbmRzKDApO2RhdGUuc2V0TWlsbGlzZWNvbmRzKDApfXJldHVybiB0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChkYXRlKX0sX2RheWxpZ2h0U2F2aW5nQWRqdXN0OmZ1bmN0aW9uKGRhdGUpe2lmKCFkYXRlKXtyZXR1cm4gbnVsbH1kYXRlLnNldEhvdXJzKGRhdGUuZ2V0SG91cnMoKT4xMj9kYXRlLmdldEhvdXJzKCkrMjowKTtyZXR1cm4gZGF0ZX0sX3NldERhdGU6ZnVuY3Rpb24oaW5zdCxkYXRlLGVuZERhdGUpe3ZhciBjbGVhcj0hKGRhdGUpO3ZhciBvcmlnTW9udGg9aW5zdC5zZWxlY3RlZE1vbnRoO3ZhciBvcmlnWWVhcj1pbnN0LnNlbGVjdGVkWWVhcjtkYXRlPXRoaXMuX2RldGVybWluZURhdGUoZGF0ZSxuZXcgRGF0ZSgpKTtpbnN0LnNlbGVjdGVkRGF5PWluc3QuY3VycmVudERheT1kYXRlLmdldERhdGUoKTtpbnN0LmRyYXdNb250aD1pbnN0LnNlbGVjdGVkTW9udGg9aW5zdC5jdXJyZW50TW9udGg9ZGF0ZS5nZXRNb250aCgpO2luc3QuZHJhd1llYXI9aW5zdC5zZWxlY3RlZFllYXI9aW5zdC5jdXJyZW50WWVhcj1kYXRlLmdldEZ1bGxZZWFyKCk7aWYob3JpZ01vbnRoIT1pbnN0LnNlbGVjdGVkTW9udGh8fG9yaWdZZWFyIT1pbnN0LnNlbGVjdGVkWWVhcil7dGhpcy5fbm90aWZ5Q2hhbmdlKGluc3QpfXRoaXMuX2FkanVzdEluc3REYXRlKGluc3QpO2lmKGluc3QuaW5wdXQpe2luc3QuaW5wdXQudmFsKGNsZWFyPyIiOnRoaXMuX2Zvcm1hdERhdGUoaW5zdCkpfX0sX2dldERhdGU6ZnVuY3Rpb24oaW5zdCl7dmFyIHN0YXJ0RGF0ZT0oIWluc3QuY3VycmVudFllYXJ8fChpbnN0LmlucHV0JiZpbnN0LmlucHV0LnZhbCgpPT0iIik/bnVsbDp0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShpbnN0LmN1cnJlbnRZZWFyLGluc3QuY3VycmVudE1vbnRoLGluc3QuY3VycmVudERheSkpKTtyZXR1cm4gc3RhcnREYXRlfSxfZ2VuZXJhdGVIVE1MOmZ1bmN0aW9uKGluc3Qpe3ZhciB0b2RheT1uZXcgRGF0ZSgpO3RvZGF5PXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHRvZGF5LmdldEZ1bGxZZWFyKCksdG9kYXkuZ2V0TW9udGgoKSx0b2RheS5nZXREYXRlKCkpKTt2YXIgaXNSVEw9dGhpcy5fZ2V0KGluc3QsImlzUlRMIik7dmFyIHNob3dCdXR0b25QYW5lbD10aGlzLl9nZXQoaW5zdCwic2hvd0J1dHRvblBhbmVsIik7dmFyIGhpZGVJZk5vUHJldk5leHQ9dGhpcy5fZ2V0KGluc3QsImhpZGVJZk5vUHJldk5leHQiKTt2YXIgbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdD10aGlzLl9nZXQoaW5zdCwibmF2aWdhdGlvbkFzRGF0ZUZvcm1hdCIpO3ZhciBudW1Nb250aHM9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaW5zdCk7dmFyIHNob3dDdXJyZW50QXRQb3M9dGhpcy5fZ2V0KGluc3QsInNob3dDdXJyZW50QXRQb3MiKTt2YXIgc3RlcE1vbnRocz10aGlzLl9nZXQoaW5zdCwic3RlcE1vbnRocyIpO3ZhciBzdGVwQmlnTW9udGhzPXRoaXMuX2dldChpbnN0LCJzdGVwQmlnTW9udGhzIik7dmFyIGlzTXVsdGlNb250aD0obnVtTW9udGhzWzBdIT0xfHxudW1Nb250aHNbMV0hPTEpO3ZhciBjdXJyZW50RGF0ZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdCgoIWluc3QuY3VycmVudERheT9uZXcgRGF0ZSg5OTk5LDksOSk6bmV3IERhdGUoaW5zdC5jdXJyZW50WWVhcixpbnN0LmN1cnJlbnRNb250aCxpbnN0LmN1cnJlbnREYXkpKSk7dmFyIG1pbkRhdGU9dGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCJtaW4iLHRydWUpO3ZhciBtYXhEYXRlPXRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWF4Iik7dmFyIGRyYXdNb250aD1pbnN0LmRyYXdNb250aC1zaG93Q3VycmVudEF0UG9zO3ZhciBkcmF3WWVhcj1pbnN0LmRyYXdZZWFyO2lmKGRyYXdNb250aDwwKXtkcmF3TW9udGgrPTEyO2RyYXdZZWFyLS19aWYobWF4RGF0ZSl7dmFyIG1heERyYXc9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUobWF4RGF0ZS5nZXRGdWxsWWVhcigpLG1heERhdGUuZ2V0TW9udGgoKS1udW1Nb250aHNbMV0rMSxtYXhEYXRlLmdldERhdGUoKSkpO21heERyYXc9KG1pbkRhdGUmJm1heERyYXc8bWluRGF0ZT9taW5EYXRlOm1heERyYXcpO3doaWxlKHRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLGRyYXdNb250aCwxKSk+bWF4RHJhdyl7ZHJhd01vbnRoLS07aWYoZHJhd01vbnRoPDApe2RyYXdNb250aD0xMTtkcmF3WWVhci0tfX19aW5zdC5kcmF3TW9udGg9ZHJhd01vbnRoO2luc3QuZHJhd1llYXI9ZHJhd1llYXI7dmFyIHByZXZUZXh0PXRoaXMuX2dldChpbnN0LCJwcmV2VGV4dCIpO3ByZXZUZXh0PSghbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdD9wcmV2VGV4dDp0aGlzLmZvcm1hdERhdGUocHJldlRleHQsdGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoZHJhd1llYXIsZHJhd01vbnRoLXN0ZXBNb250aHMsMSkpLHRoaXMuX2dldEZvcm1hdENvbmZpZyhpbnN0KSkpO3ZhciBwcmV2PSh0aGlzLl9jYW5BZGp1c3RNb250aChpbnN0LC0xLGRyYXdZZWFyLGRyYXdNb250aCk/JzxhIGNsYXNzPSJ1aS1kYXRlcGlja2VyLXByZXYgdWktY29ybmVyLWFsbCIgb25jbGljaz0iRFBfalF1ZXJ5LmRhdGVwaWNrZXIuX2FkanVzdERhdGUoXCcjJytpbnN0LmlkKyInLCAtIitzdGVwTW9udGhzKyIsICdNJyk7XCIgdGl0bGU9XCIiK3ByZXZUZXh0KyciPjxzcGFuIGNsYXNzPSJ1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLScrKGlzUlRMPyJlIjoidyIpKyciPicrcHJldlRleHQrIjwvc3Bhbj48L2E+IjooaGlkZUlmTm9QcmV2TmV4dD8iIjonPGEgY2xhc3M9InVpLWRhdGVwaWNrZXItcHJldiB1aS1jb3JuZXItYWxsIHVpLXN0YXRlLWRpc2FibGVkIiB0aXRsZT0iJytwcmV2VGV4dCsnIj48c3BhbiBjbGFzcz0idWktaWNvbiB1aS1pY29uLWNpcmNsZS10cmlhbmdsZS0nKyhpc1JUTD8iZSI6InciKSsnIj4nK3ByZXZUZXh0KyI8L3NwYW4+PC9hPiIpKTt2YXIgbmV4dFRleHQ9dGhpcy5fZ2V0KGluc3QsIm5leHRUZXh0Iik7bmV4dFRleHQ9KCFuYXZpZ2F0aW9uQXNEYXRlRm9ybWF0P25leHRUZXh0OnRoaXMuZm9ybWF0RGF0ZShuZXh0VGV4dCx0aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhcixkcmF3TW9udGgrc3RlcE1vbnRocywxKSksdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKSk7dmFyIG5leHQ9KHRoaXMuX2NhbkFkanVzdE1vbnRoKGluc3QsKzEsZHJhd1llYXIsZHJhd01vbnRoKT8nPGEgY2xhc3M9InVpLWRhdGVwaWNrZXItbmV4dCB1aS1jb3JuZXItYWxsIiBvbmNsaWNrPSJEUF9qUXVlcnkuZGF0ZXBpY2tlci5fYWRqdXN0RGF0ZShcJyMnK2luc3QuaWQrIicsICsiK3N0ZXBNb250aHMrIiwgJ00nKTtcIiB0aXRsZT1cIiIrbmV4dFRleHQrJyI+PHNwYW4gY2xhc3M9InVpLWljb24gdWktaWNvbi1jaXJjbGUtdHJpYW5nbGUtJysoaXNSVEw/InciOiJlIikrJyI+JytuZXh0VGV4dCsiPC9zcGFuPjwvYT4iOihoaWRlSWZOb1ByZXZOZXh0PyIiOic8YSBjbGFzcz0idWktZGF0ZXBpY2tlci1uZXh0IHVpLWNvcm5lci1hbGwgdWktc3RhdGUtZGlzYWJsZWQiIHRpdGxlPSInK25leHRUZXh0KyciPjxzcGFuIGNsYXNzPSJ1aS1pY29uIHVpLWljb24tY2lyY2xlLXRyaWFuZ2xlLScrKGlzUlRMPyJ3IjoiZSIpKyciPicrbmV4dFRleHQrIjwvc3Bhbj48L2E+IikpO3ZhciBjdXJyZW50VGV4dD10aGlzLl9nZXQoaW5zdCwiY3VycmVudFRleHQiKTt2YXIgZ290b0RhdGU9KHRoaXMuX2dldChpbnN0LCJnb3RvQ3VycmVudCIpJiZpbnN0LmN1cnJlbnREYXk/Y3VycmVudERhdGU6dG9kYXkpO2N1cnJlbnRUZXh0PSghbmF2aWdhdGlvbkFzRGF0ZUZvcm1hdD9jdXJyZW50VGV4dDp0aGlzLmZvcm1hdERhdGUoY3VycmVudFRleHQsZ290b0RhdGUsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKSk7dmFyIGNvbnRyb2xzPSghaW5zdC5pbmxpbmU/JzxidXR0b24gdHlwZT0iYnV0dG9uIiBjbGFzcz0idWktZGF0ZXBpY2tlci1jbG9zZSB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXByaW1hcnkgdWktY29ybmVyLWFsbCIgb25jbGljaz0iRFBfalF1ZXJ5LmRhdGVwaWNrZXIuX2hpZGVEYXRlcGlja2VyKCk7Ij4nK3RoaXMuX2dldChpbnN0LCJjbG9zZVRleHQiKSsiPC9idXR0b24+IjoiIik7dmFyIGJ1dHRvblBhbmVsPShzaG93QnV0dG9uUGFuZWwpPyc8ZGl2IGNsYXNzPSJ1aS1kYXRlcGlja2VyLWJ1dHRvbnBhbmUgdWktd2lkZ2V0LWNvbnRlbnQiPicrKGlzUlRMP2NvbnRyb2xzOiIiKSsodGhpcy5faXNJblJhbmdlKGluc3QsZ290b0RhdGUpPyc8YnV0dG9uIHR5cGU9ImJ1dHRvbiIgY2xhc3M9InVpLWRhdGVwaWNrZXItY3VycmVudCB1aS1zdGF0ZS1kZWZhdWx0IHVpLXByaW9yaXR5LXNlY29uZGFyeSB1aS1jb3JuZXItYWxsIiBvbmNsaWNrPSJEUF9qUXVlcnkuZGF0ZXBpY2tlci5fZ290b1RvZGF5KFwnIycraW5zdC5pZCsiJyk7XCI+IitjdXJyZW50VGV4dCsiPC9idXR0b24+IjoiIikrKGlzUlRMPyIiOmNvbnRyb2xzKSsiPC9kaXY+IjoiIjt2YXIgZmlyc3REYXk9cGFyc2VJbnQodGhpcy5fZ2V0KGluc3QsImZpcnN0RGF5IiksMTApO2ZpcnN0RGF5PShpc05hTihmaXJzdERheSk/MDpmaXJzdERheSk7dmFyIGRheU5hbWVzPXRoaXMuX2dldChpbnN0LCJkYXlOYW1lcyIpO3ZhciBkYXlOYW1lc1Nob3J0PXRoaXMuX2dldChpbnN0LCJkYXlOYW1lc1Nob3J0Iik7dmFyIGRheU5hbWVzTWluPXRoaXMuX2dldChpbnN0LCJkYXlOYW1lc01pbiIpO3ZhciBtb250aE5hbWVzPXRoaXMuX2dldChpbnN0LCJtb250aE5hbWVzIik7dmFyIG1vbnRoTmFtZXNTaG9ydD10aGlzLl9nZXQoaW5zdCwibW9udGhOYW1lc1Nob3J0Iik7dmFyIGJlZm9yZVNob3dEYXk9dGhpcy5fZ2V0KGluc3QsImJlZm9yZVNob3dEYXkiKTt2YXIgc2hvd090aGVyTW9udGhzPXRoaXMuX2dldChpbnN0LCJzaG93T3RoZXJNb250aHMiKTt2YXIgY2FsY3VsYXRlV2Vlaz10aGlzLl9nZXQoaW5zdCwiY2FsY3VsYXRlV2VlayIpfHx0aGlzLmlzbzg2MDFXZWVrO3ZhciBlbmREYXRlPWluc3QuZW5kRGF5P3RoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGluc3QuZW5kWWVhcixpbnN0LmVuZE1vbnRoLGluc3QuZW5kRGF5KSk6Y3VycmVudERhdGU7dmFyIGRlZmF1bHREYXRlPXRoaXMuX2dldERlZmF1bHREYXRlKGluc3QpO3ZhciBodG1sPSIiO2Zvcih2YXIgcm93PTA7cm93PG51bU1vbnRoc1swXTtyb3crKyl7dmFyIGdyb3VwPSIiO2Zvcih2YXIgY29sPTA7Y29sPG51bU1vbnRoc1sxXTtjb2wrKyl7dmFyIHNlbGVjdGVkRGF0ZT10aGlzLl9kYXlsaWdodFNhdmluZ0FkanVzdChuZXcgRGF0ZShkcmF3WWVhcixkcmF3TW9udGgsaW5zdC5zZWxlY3RlZERheSkpO3ZhciBjb3JuZXJDbGFzcz0iIHVpLWNvcm5lci1hbGwiO3ZhciBjYWxlbmRlcj0iIjtpZihpc011bHRpTW9udGgpe2NhbGVuZGVyKz0nPGRpdiBjbGFzcz0idWktZGF0ZXBpY2tlci1ncm91cCB1aS1kYXRlcGlja2VyLWdyb3VwLSc7c3dpdGNoKGNvbCl7Y2FzZSAwOmNhbGVuZGVyKz0iZmlyc3QiO2Nvcm5lckNsYXNzPSIgdWktY29ybmVyLSIrKGlzUlRMPyJyaWdodCI6ImxlZnQiKTticmVhaztjYXNlIG51bU1vbnRoc1sxXS0xOmNhbGVuZGVyKz0ibGFzdCI7Y29ybmVyQ2xhc3M9IiB1aS1jb3JuZXItIisoaXNSVEw/ImxlZnQiOiJyaWdodCIpO2JyZWFrO2RlZmF1bHQ6Y2FsZW5kZXIrPSJtaWRkbGUiO2Nvcm5lckNsYXNzPSIiO2JyZWFrfWNhbGVuZGVyKz0nIj4nfWNhbGVuZGVyKz0nPGRpdiBjbGFzcz0idWktZGF0ZXBpY2tlci1oZWFkZXIgdWktd2lkZ2V0LWhlYWRlciB1aS1oZWxwZXItY2xlYXJmaXgnK2Nvcm5lckNsYXNzKyciPicrKC9hbGx8bGVmdC8udGVzdChjb3JuZXJDbGFzcykmJnJvdz09MD8oaXNSVEw/bmV4dDpwcmV2KToiIikrKC9hbGx8cmlnaHQvLnRlc3QoY29ybmVyQ2xhc3MpJiZyb3c9PTA/KGlzUlRMP3ByZXY6bmV4dCk6IiIpK3RoaXMuX2dlbmVyYXRlTW9udGhZZWFySGVhZGVyKGluc3QsZHJhd01vbnRoLGRyYXdZZWFyLG1pbkRhdGUsbWF4RGF0ZSxzZWxlY3RlZERhdGUscm93PjB8fGNvbD4wLG1vbnRoTmFtZXMsbW9udGhOYW1lc1Nob3J0KSsnPC9kaXY+PHRhYmxlIGNsYXNzPSJ1aS1kYXRlcGlja2VyLWNhbGVuZGFyIj48dGhlYWQ+PHRyPic7dmFyIHRoZWFkPSIiO2Zvcih2YXIgZG93PTA7ZG93PDc7ZG93Kyspe3ZhciBkYXk9KGRvdytmaXJzdERheSklNzt0aGVhZCs9Ijx0aCIrKChkb3crZmlyc3REYXkrNiklNz49NT8nIGNsYXNzPSJ1aS1kYXRlcGlja2VyLXdlZWstZW5kIic6IiIpKyc+PHNwYW4gdGl0bGU9IicrZGF5TmFtZXNbZGF5XSsnIj4nK2RheU5hbWVzTWluW2RheV0rIjwvc3Bhbj48L3RoPiJ9Y2FsZW5kZXIrPXRoZWFkKyI8L3RyPjwvdGhlYWQ+PHRib2R5PiI7dmFyIGRheXNJbk1vbnRoPXRoaXMuX2dldERheXNJbk1vbnRoKGRyYXdZZWFyLGRyYXdNb250aCk7aWYoZHJhd1llYXI9PWluc3Quc2VsZWN0ZWRZZWFyJiZkcmF3TW9udGg9PWluc3Quc2VsZWN0ZWRNb250aCl7aW5zdC5zZWxlY3RlZERheT1NYXRoLm1pbihpbnN0LnNlbGVjdGVkRGF5LGRheXNJbk1vbnRoKX12YXIgbGVhZERheXM9KHRoaXMuX2dldEZpcnN0RGF5T2ZNb250aChkcmF3WWVhcixkcmF3TW9udGgpLWZpcnN0RGF5KzcpJTc7dmFyIG51bVJvd3M9KGlzTXVsdGlNb250aD82Ok1hdGguY2VpbCgobGVhZERheXMrZGF5c0luTW9udGgpLzcpKTt2YXIgcHJpbnREYXRlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKGRyYXdZZWFyLGRyYXdNb250aCwxLWxlYWREYXlzKSk7Zm9yKHZhciBkUm93PTA7ZFJvdzxudW1Sb3dzO2RSb3crKyl7Y2FsZW5kZXIrPSI8dHI+Ijt2YXIgdGJvZHk9IiI7Zm9yKHZhciBkb3c9MDtkb3c8Nztkb3crKyl7dmFyIGRheVNldHRpbmdzPShiZWZvcmVTaG93RGF5P2JlZm9yZVNob3dEYXkuYXBwbHkoKGluc3QuaW5wdXQ/aW5zdC5pbnB1dFswXTpudWxsKSxbcHJpbnREYXRlXSk6W3RydWUsIiJdKTt2YXIgb3RoZXJNb250aD0ocHJpbnREYXRlLmdldE1vbnRoKCkhPWRyYXdNb250aCk7dmFyIHVuc2VsZWN0YWJsZT1vdGhlck1vbnRofHwhZGF5U2V0dGluZ3NbMF18fChtaW5EYXRlJiZwcmludERhdGU8bWluRGF0ZSl8fChtYXhEYXRlJiZwcmludERhdGU+bWF4RGF0ZSk7dGJvZHkrPSc8dGQgY2xhc3M9IicrKChkb3crZmlyc3REYXkrNiklNz49NT8iIHVpLWRhdGVwaWNrZXItd2Vlay1lbmQiOiIiKSsob3RoZXJNb250aD8iIHVpLWRhdGVwaWNrZXItb3RoZXItbW9udGgiOiIiKSsoKHByaW50RGF0ZS5nZXRUaW1lKCk9PXNlbGVjdGVkRGF0ZS5nZXRUaW1lKCkmJmRyYXdNb250aD09aW5zdC5zZWxlY3RlZE1vbnRoJiZpbnN0Ll9rZXlFdmVudCl8fChkZWZhdWx0RGF0ZS5nZXRUaW1lKCk9PXByaW50RGF0ZS5nZXRUaW1lKCkmJmRlZmF1bHREYXRlLmdldFRpbWUoKT09c2VsZWN0ZWREYXRlLmdldFRpbWUoKSk/IiAiK3RoaXMuX2RheU92ZXJDbGFzczoiIikrKHVuc2VsZWN0YWJsZT8iICIrdGhpcy5fdW5zZWxlY3RhYmxlQ2xhc3MrIiB1aS1zdGF0ZS1kaXNhYmxlZCI6IiIpKyhvdGhlck1vbnRoJiYhc2hvd090aGVyTW9udGhzPyIiOiIgIitkYXlTZXR0aW5nc1sxXSsocHJpbnREYXRlLmdldFRpbWUoKT49Y3VycmVudERhdGUuZ2V0VGltZSgpJiZwcmludERhdGUuZ2V0VGltZSgpPD1lbmREYXRlLmdldFRpbWUoKT8iICIrdGhpcy5fY3VycmVudENsYXNzOiIiKSsocHJpbnREYXRlLmdldFRpbWUoKT09dG9kYXkuZ2V0VGltZSgpPyIgdWktZGF0ZXBpY2tlci10b2RheSI6IiIpKSsnIicrKCghb3RoZXJNb250aHx8c2hvd090aGVyTW9udGhzKSYmZGF5U2V0dGluZ3NbMl0/JyB0aXRsZT0iJytkYXlTZXR0aW5nc1syXSsnIic6IiIpKyh1bnNlbGVjdGFibGU/IiI6IiBvbmNsaWNrPVwiRFBfalF1ZXJ5LmRhdGVwaWNrZXIuX3NlbGVjdERheSgnIyIraW5zdC5pZCsiJywiK2RyYXdNb250aCsiLCIrZHJhd1llYXIrJywgdGhpcyk7cmV0dXJuIGZhbHNlOyInKSsiPiIrKG90aGVyTW9udGg/KHNob3dPdGhlck1vbnRocz9wcmludERhdGUuZ2V0RGF0ZSgpOiImI3hhMDsiKToodW5zZWxlY3RhYmxlPyc8c3BhbiBjbGFzcz0idWktc3RhdGUtZGVmYXVsdCI+JytwcmludERhdGUuZ2V0RGF0ZSgpKyI8L3NwYW4+IjonPGEgY2xhc3M9InVpLXN0YXRlLWRlZmF1bHQnKyhwcmludERhdGUuZ2V0VGltZSgpPT10b2RheS5nZXRUaW1lKCk/IiB1aS1zdGF0ZS1oaWdobGlnaHQiOiIiKSsocHJpbnREYXRlLmdldFRpbWUoKT49Y3VycmVudERhdGUuZ2V0VGltZSgpJiZwcmludERhdGUuZ2V0VGltZSgpPD1lbmREYXRlLmdldFRpbWUoKT8iIHVpLXN0YXRlLWFjdGl2ZSI6IiIpKyciIGhyZWY9IiMiPicrcHJpbnREYXRlLmdldERhdGUoKSsiPC9hPiIpKSsiPC90ZD4iO3ByaW50RGF0ZS5zZXREYXRlKHByaW50RGF0ZS5nZXREYXRlKCkrMSk7cHJpbnREYXRlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KHByaW50RGF0ZSl9Y2FsZW5kZXIrPXRib2R5KyI8L3RyPiJ9ZHJhd01vbnRoKys7aWYoZHJhd01vbnRoPjExKXtkcmF3TW9udGg9MDtkcmF3WWVhcisrfWNhbGVuZGVyKz0iPC90Ym9keT48L3RhYmxlPiIrKGlzTXVsdGlNb250aD8iPC9kaXY+IisoKG51bU1vbnRoc1swXT4wJiZjb2w9PW51bU1vbnRoc1sxXS0xKT8nPGRpdiBjbGFzcz0idWktZGF0ZXBpY2tlci1yb3ctYnJlYWsiPjwvZGl2Pic6IiIpOiIiKTtncm91cCs9Y2FsZW5kZXJ9aHRtbCs9Z3JvdXB9aHRtbCs9YnV0dG9uUGFuZWwrKCQuYnJvd3Nlci5tc2llJiZwYXJzZUludCgkLmJyb3dzZXIudmVyc2lvbiwxMCk8NyYmIWluc3QuaW5saW5lPyc8aWZyYW1lIHNyYz0iamF2YXNjcmlwdDpmYWxzZTsiIGNsYXNzPSJ1aS1kYXRlcGlja2VyLWNvdmVyIiBmcmFtZWJvcmRlcj0iMCI+PC9pZnJhbWU+JzoiIik7aW5zdC5fa2V5RXZlbnQ9ZmFsc2U7cmV0dXJuIGh0bWx9LF9nZW5lcmF0ZU1vbnRoWWVhckhlYWRlcjpmdW5jdGlvbihpbnN0LGRyYXdNb250aCxkcmF3WWVhcixtaW5EYXRlLG1heERhdGUsc2VsZWN0ZWREYXRlLHNlY29uZGFyeSxtb250aE5hbWVzLG1vbnRoTmFtZXNTaG9ydCl7bWluRGF0ZT0oaW5zdC5yYW5nZVN0YXJ0JiZtaW5EYXRlJiZzZWxlY3RlZERhdGU8bWluRGF0ZT9zZWxlY3RlZERhdGU6bWluRGF0ZSk7dmFyIGNoYW5nZU1vbnRoPXRoaXMuX2dldChpbnN0LCJjaGFuZ2VNb250aCIpO3ZhciBjaGFuZ2VZZWFyPXRoaXMuX2dldChpbnN0LCJjaGFuZ2VZZWFyIik7dmFyIHNob3dNb250aEFmdGVyWWVhcj10aGlzLl9nZXQoaW5zdCwic2hvd01vbnRoQWZ0ZXJZZWFyIik7dmFyIGh0bWw9JzxkaXYgY2xhc3M9InVpLWRhdGVwaWNrZXItdGl0bGUiPic7dmFyIG1vbnRoSHRtbD0iIjtpZihzZWNvbmRhcnl8fCFjaGFuZ2VNb250aCl7bW9udGhIdG1sKz0nPHNwYW4gY2xhc3M9InVpLWRhdGVwaWNrZXItbW9udGgiPicrbW9udGhOYW1lc1tkcmF3TW9udGhdKyI8L3NwYW4+ICJ9ZWxzZXt2YXIgaW5NaW5ZZWFyPShtaW5EYXRlJiZtaW5EYXRlLmdldEZ1bGxZZWFyKCk9PWRyYXdZZWFyKTt2YXIgaW5NYXhZZWFyPShtYXhEYXRlJiZtYXhEYXRlLmdldEZ1bGxZZWFyKCk9PWRyYXdZZWFyKTttb250aEh0bWwrPSc8c2VsZWN0IGNsYXNzPSJ1aS1kYXRlcGlja2VyLW1vbnRoIiBvbmNoYW5nZT0iRFBfalF1ZXJ5LmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihcJyMnK2luc3QuaWQrIicsIHRoaXMsICdNJyk7XCIgb25jbGljaz1cIkRQX2pRdWVyeS5kYXRlcGlja2VyLl9jbGlja01vbnRoWWVhcignIyIraW5zdC5pZCsiJyk7XCI+Ijtmb3IodmFyIG1vbnRoPTA7bW9udGg8MTI7bW9udGgrKyl7aWYoKCFpbk1pblllYXJ8fG1vbnRoPj1taW5EYXRlLmdldE1vbnRoKCkpJiYoIWluTWF4WWVhcnx8bW9udGg8PW1heERhdGUuZ2V0TW9udGgoKSkpe21vbnRoSHRtbCs9JzxvcHRpb24gdmFsdWU9IicrbW9udGgrJyInKyhtb250aD09ZHJhd01vbnRoPycgc2VsZWN0ZWQ9InNlbGVjdGVkIic6IiIpKyI+Iittb250aE5hbWVzU2hvcnRbbW9udGhdKyI8L29wdGlvbj4ifX1tb250aEh0bWwrPSI8L3NlbGVjdD4ifWlmKCFzaG93TW9udGhBZnRlclllYXIpe2h0bWwrPW1vbnRoSHRtbCsoKHNlY29uZGFyeXx8Y2hhbmdlTW9udGh8fGNoYW5nZVllYXIpJiYoIShjaGFuZ2VNb250aCYmY2hhbmdlWWVhcikpPyImI3hhMDsiOiIiKX1pZihzZWNvbmRhcnl8fCFjaGFuZ2VZZWFyKXtodG1sKz0nPHNwYW4gY2xhc3M9InVpLWRhdGVwaWNrZXIteWVhciI+JytkcmF3WWVhcisiPC9zcGFuPiJ9ZWxzZXt2YXIgeWVhcnM9dGhpcy5fZ2V0KGluc3QsInllYXJSYW5nZSIpLnNwbGl0KCI6Iik7dmFyIHllYXI9MDt2YXIgZW5kWWVhcj0wO2lmKHllYXJzLmxlbmd0aCE9Mil7eWVhcj1kcmF3WWVhci0xMDtlbmRZZWFyPWRyYXdZZWFyKzEwfWVsc2V7aWYoeWVhcnNbMF0uY2hhckF0KDApPT0iKyJ8fHllYXJzWzBdLmNoYXJBdCgwKT09Ii0iKXt5ZWFyPWRyYXdZZWFyK3BhcnNlSW50KHllYXJzWzBdLDEwKTtlbmRZZWFyPWRyYXdZZWFyK3BhcnNlSW50KHllYXJzWzFdLDEwKX1lbHNle3llYXI9cGFyc2VJbnQoeWVhcnNbMF0sMTApO2VuZFllYXI9cGFyc2VJbnQoeWVhcnNbMV0sMTApfX15ZWFyPShtaW5EYXRlP01hdGgubWF4KHllYXIsbWluRGF0ZS5nZXRGdWxsWWVhcigpKTp5ZWFyKTtlbmRZZWFyPShtYXhEYXRlP01hdGgubWluKGVuZFllYXIsbWF4RGF0ZS5nZXRGdWxsWWVhcigpKTplbmRZZWFyKTtodG1sKz0nPHNlbGVjdCBjbGFzcz0idWktZGF0ZXBpY2tlci15ZWFyIiBvbmNoYW5nZT0iRFBfalF1ZXJ5LmRhdGVwaWNrZXIuX3NlbGVjdE1vbnRoWWVhcihcJyMnK2luc3QuaWQrIicsIHRoaXMsICdZJyk7XCIgb25jbGljaz1cIkRQX2pRdWVyeS5kYXRlcGlja2VyLl9jbGlja01vbnRoWWVhcignIyIraW5zdC5pZCsiJyk7XCI+Ijtmb3IoO3llYXI8PWVuZFllYXI7eWVhcisrKXtodG1sKz0nPG9wdGlvbiB2YWx1ZT0iJyt5ZWFyKyciJysoeWVhcj09ZHJhd1llYXI/JyBzZWxlY3RlZD0ic2VsZWN0ZWQiJzoiIikrIj4iK3llYXIrIjwvb3B0aW9uPiJ9aHRtbCs9Ijwvc2VsZWN0PiJ9aWYoc2hvd01vbnRoQWZ0ZXJZZWFyKXtodG1sKz0oc2Vjb25kYXJ5fHxjaGFuZ2VNb250aHx8Y2hhbmdlWWVhcj8iJiN4YTA7IjoiIikrbW9udGhIdG1sfWh0bWwrPSI8L2Rpdj4iO3JldHVybiBodG1sfSxfYWRqdXN0SW5zdERhdGU6ZnVuY3Rpb24oaW5zdCxvZmZzZXQscGVyaW9kKXt2YXIgeWVhcj1pbnN0LmRyYXdZZWFyKyhwZXJpb2Q9PSJZIj9vZmZzZXQ6MCk7dmFyIG1vbnRoPWluc3QuZHJhd01vbnRoKyhwZXJpb2Q9PSJNIj9vZmZzZXQ6MCk7dmFyIGRheT1NYXRoLm1pbihpbnN0LnNlbGVjdGVkRGF5LHRoaXMuX2dldERheXNJbk1vbnRoKHllYXIsbW9udGgpKSsocGVyaW9kPT0iRCI/b2Zmc2V0OjApO3ZhciBkYXRlPXRoaXMuX2RheWxpZ2h0U2F2aW5nQWRqdXN0KG5ldyBEYXRlKHllYXIsbW9udGgsZGF5KSk7dmFyIG1pbkRhdGU9dGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCJtaW4iLHRydWUpO3ZhciBtYXhEYXRlPXRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWF4Iik7ZGF0ZT0obWluRGF0ZSYmZGF0ZTxtaW5EYXRlP21pbkRhdGU6ZGF0ZSk7ZGF0ZT0obWF4RGF0ZSYmZGF0ZT5tYXhEYXRlP21heERhdGU6ZGF0ZSk7aW5zdC5zZWxlY3RlZERheT1kYXRlLmdldERhdGUoKTtpbnN0LmRyYXdNb250aD1pbnN0LnNlbGVjdGVkTW9udGg9ZGF0ZS5nZXRNb250aCgpO2luc3QuZHJhd1llYXI9aW5zdC5zZWxlY3RlZFllYXI9ZGF0ZS5nZXRGdWxsWWVhcigpO2lmKHBlcmlvZD09Ik0ifHxwZXJpb2Q9PSJZIil7dGhpcy5fbm90aWZ5Q2hhbmdlKGluc3QpfX0sX25vdGlmeUNoYW5nZTpmdW5jdGlvbihpbnN0KXt2YXIgb25DaGFuZ2U9dGhpcy5fZ2V0KGluc3QsIm9uQ2hhbmdlTW9udGhZZWFyIik7aWYob25DaGFuZ2Upe29uQ2hhbmdlLmFwcGx5KChpbnN0LmlucHV0P2luc3QuaW5wdXRbMF06bnVsbCksW2luc3Quc2VsZWN0ZWRZZWFyLGluc3Quc2VsZWN0ZWRNb250aCsxLGluc3RdKX19LF9nZXROdW1iZXJPZk1vbnRoczpmdW5jdGlvbihpbnN0KXt2YXIgbnVtTW9udGhzPXRoaXMuX2dldChpbnN0LCJudW1iZXJPZk1vbnRocyIpO3JldHVybihudW1Nb250aHM9PW51bGw/WzEsMV06KHR5cGVvZiBudW1Nb250aHM9PSJudW1iZXIiP1sxLG51bU1vbnRoc106bnVtTW9udGhzKSl9LF9nZXRNaW5NYXhEYXRlOmZ1bmN0aW9uKGluc3QsbWluTWF4LGNoZWNrUmFuZ2Upe3ZhciBkYXRlPXRoaXMuX2RldGVybWluZURhdGUodGhpcy5fZ2V0KGluc3QsbWluTWF4KyJEYXRlIiksbnVsbCk7cmV0dXJuKCFjaGVja1JhbmdlfHwhaW5zdC5yYW5nZVN0YXJ0P2RhdGU6KCFkYXRlfHxpbnN0LnJhbmdlU3RhcnQ+ZGF0ZT9pbnN0LnJhbmdlU3RhcnQ6ZGF0ZSkpfSxfZ2V0RGF5c0luTW9udGg6ZnVuY3Rpb24oeWVhcixtb250aCl7cmV0dXJuIDMyLW5ldyBEYXRlKHllYXIsbW9udGgsMzIpLmdldERhdGUoKX0sX2dldEZpcnN0RGF5T2ZNb250aDpmdW5jdGlvbih5ZWFyLG1vbnRoKXtyZXR1cm4gbmV3IERhdGUoeWVhcixtb250aCwxKS5nZXREYXkoKX0sX2NhbkFkanVzdE1vbnRoOmZ1bmN0aW9uKGluc3Qsb2Zmc2V0LGN1clllYXIsY3VyTW9udGgpe3ZhciBudW1Nb250aHM9dGhpcy5fZ2V0TnVtYmVyT2ZNb250aHMoaW5zdCk7dmFyIGRhdGU9dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoY3VyWWVhcixjdXJNb250aCsob2Zmc2V0PDA/b2Zmc2V0Om51bU1vbnRoc1sxXSksMSkpO2lmKG9mZnNldDwwKXtkYXRlLnNldERhdGUodGhpcy5fZ2V0RGF5c0luTW9udGgoZGF0ZS5nZXRGdWxsWWVhcigpLGRhdGUuZ2V0TW9udGgoKSkpfXJldHVybiB0aGlzLl9pc0luUmFuZ2UoaW5zdCxkYXRlKX0sX2lzSW5SYW5nZTpmdW5jdGlvbihpbnN0LGRhdGUpe3ZhciBuZXdNaW5EYXRlPSghaW5zdC5yYW5nZVN0YXJ0P251bGw6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaW5zdC5zZWxlY3RlZFllYXIsaW5zdC5zZWxlY3RlZE1vbnRoLGluc3Quc2VsZWN0ZWREYXkpKSk7bmV3TWluRGF0ZT0obmV3TWluRGF0ZSYmaW5zdC5yYW5nZVN0YXJ0PG5ld01pbkRhdGU/aW5zdC5yYW5nZVN0YXJ0Om5ld01pbkRhdGUpO3ZhciBtaW5EYXRlPW5ld01pbkRhdGV8fHRoaXMuX2dldE1pbk1heERhdGUoaW5zdCwibWluIik7dmFyIG1heERhdGU9dGhpcy5fZ2V0TWluTWF4RGF0ZShpbnN0LCJtYXgiKTtyZXR1cm4oKCFtaW5EYXRlfHxkYXRlPj1taW5EYXRlKSYmKCFtYXhEYXRlfHxkYXRlPD1tYXhEYXRlKSl9LF9nZXRGb3JtYXRDb25maWc6ZnVuY3Rpb24oaW5zdCl7dmFyIHNob3J0WWVhckN1dG9mZj10aGlzLl9nZXQoaW5zdCwic2hvcnRZZWFyQ3V0b2ZmIik7c2hvcnRZZWFyQ3V0b2ZmPSh0eXBlb2Ygc2hvcnRZZWFyQ3V0b2ZmIT0ic3RyaW5nIj9zaG9ydFllYXJDdXRvZmY6bmV3IERhdGUoKS5nZXRGdWxsWWVhcigpJTEwMCtwYXJzZUludChzaG9ydFllYXJDdXRvZmYsMTApKTtyZXR1cm57c2hvcnRZZWFyQ3V0b2ZmOnNob3J0WWVhckN1dG9mZixkYXlOYW1lc1Nob3J0OnRoaXMuX2dldChpbnN0LCJkYXlOYW1lc1Nob3J0IiksZGF5TmFtZXM6dGhpcy5fZ2V0KGluc3QsImRheU5hbWVzIiksbW9udGhOYW1lc1Nob3J0OnRoaXMuX2dldChpbnN0LCJtb250aE5hbWVzU2hvcnQiKSxtb250aE5hbWVzOnRoaXMuX2dldChpbnN0LCJtb250aE5hbWVzIil9fSxfZm9ybWF0RGF0ZTpmdW5jdGlvbihpbnN0LGRheSxtb250aCx5ZWFyKXtpZighZGF5KXtpbnN0LmN1cnJlbnREYXk9aW5zdC5zZWxlY3RlZERheTtpbnN0LmN1cnJlbnRNb250aD1pbnN0LnNlbGVjdGVkTW9udGg7aW5zdC5jdXJyZW50WWVhcj1pbnN0LnNlbGVjdGVkWWVhcn12YXIgZGF0ZT0oZGF5Pyh0eXBlb2YgZGF5PT0ib2JqZWN0Ij9kYXk6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoeWVhcixtb250aCxkYXkpKSk6dGhpcy5fZGF5bGlnaHRTYXZpbmdBZGp1c3QobmV3IERhdGUoaW5zdC5jdXJyZW50WWVhcixpbnN0LmN1cnJlbnRNb250aCxpbnN0LmN1cnJlbnREYXkpKSk7cmV0dXJuIHRoaXMuZm9ybWF0RGF0ZSh0aGlzLl9nZXQoaW5zdCwiZGF0ZUZvcm1hdCIpLGRhdGUsdGhpcy5fZ2V0Rm9ybWF0Q29uZmlnKGluc3QpKX19KTtmdW5jdGlvbiBleHRlbmRSZW1vdmUodGFyZ2V0LHByb3BzKXskLmV4dGVuZCh0YXJnZXQscHJvcHMpO2Zvcih2YXIgbmFtZSBpbiBwcm9wcyl7aWYocHJvcHNbbmFtZV09PW51bGx8fHByb3BzW25hbWVdPT11bmRlZmluZWQpe3RhcmdldFtuYW1lXT1wcm9wc1tuYW1lXX19cmV0dXJuIHRhcmdldH1mdW5jdGlvbiBpc0FycmF5KGEpe3JldHVybihhJiYoKCQuYnJvd3Nlci5zYWZhcmkmJnR5cGVvZiBhPT0ib2JqZWN0IiYmYS5sZW5ndGgpfHwoYS5jb25zdHJ1Y3RvciYmYS5jb25zdHJ1Y3Rvci50b1N0cmluZygpLm1hdGNoKC9cQXJyYXlcKFwpLykpKSl9JC5mbi5kYXRlcGlja2VyPWZ1bmN0aW9uKG9wdGlvbnMpe2lmKCEkLmRhdGVwaWNrZXIuaW5pdGlhbGl6ZWQpeyQoZG9jdW1lbnQpLm1vdXNlZG93bigkLmRhdGVwaWNrZXIuX2NoZWNrRXh0ZXJuYWxDbGljaykuZmluZCgiYm9keSIpLmFwcGVuZCgkLmRhdGVwaWNrZXIuZHBEaXYpOyQuZGF0ZXBpY2tlci5pbml0aWFsaXplZD10cnVlfXZhciBvdGhlckFyZ3M9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKHR5cGVvZiBvcHRpb25zPT0ic3RyaW5nIiYmKG9wdGlvbnM9PSJpc0Rpc2FibGVkInx8b3B0aW9ucz09ImdldERhdGUiKSl7cmV0dXJuICQuZGF0ZXBpY2tlclsiXyIrb3B0aW9ucysiRGF0ZXBpY2tlciJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KG90aGVyQXJncykpfWlmKG9wdGlvbnM9PSJvcHRpb24iJiZhcmd1bWVudHMubGVuZ3RoPT0yJiZ0eXBlb2YgYXJndW1lbnRzWzFdPT0ic3RyaW5nIil7cmV0dXJuICQuZGF0ZXBpY2tlclsiXyIrb3B0aW9ucysiRGF0ZXBpY2tlciJdLmFwcGx5KCQuZGF0ZXBpY2tlcixbdGhpc1swXV0uY29uY2F0KG90aGVyQXJncykpfXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt0eXBlb2Ygb3B0aW9ucz09InN0cmluZyI/JC5kYXRlcGlja2VyWyJfIitvcHRpb25zKyJEYXRlcGlja2VyIl0uYXBwbHkoJC5kYXRlcGlja2VyLFt0aGlzXS5jb25jYXQob3RoZXJBcmdzKSk6JC5kYXRlcGlja2VyLl9hdHRhY2hEYXRlcGlja2VyKHRoaXMsb3B0aW9ucyl9KX07JC5kYXRlcGlja2VyPW5ldyBEYXRlcGlja2VyKCk7JC5kYXRlcGlja2VyLmluaXRpYWxpemVkPWZhbHNlOyQuZGF0ZXBpY2tlci51dWlkPW5ldyBEYXRlKCkuZ2V0VGltZSgpOyQuZGF0ZXBpY2tlci52ZXJzaW9uPSIxLjcuMiI7d2luZG93LkRQX2pRdWVyeT0kfSkoalF1ZXJ5KTs7LyoKICogalF1ZXJ5IFVJIFByb2dyZXNzYmFyIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvUHJvZ3Jlc3NiYXIKICoKICogRGVwZW5kczoKICogICB1aS5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS53aWRnZXQoInVpLnByb2dyZXNzYmFyIix7X2luaXQ6ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoInVpLXByb2dyZXNzYmFyIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIikuYXR0cih7cm9sZToicHJvZ3Jlc3NiYXIiLCJhcmlhLXZhbHVlbWluIjp0aGlzLl92YWx1ZU1pbigpLCJhcmlhLXZhbHVlbWF4Ijp0aGlzLl92YWx1ZU1heCgpLCJhcmlhLXZhbHVlbm93Ijp0aGlzLl92YWx1ZSgpfSk7dGhpcy52YWx1ZURpdj1hKCc8ZGl2IGNsYXNzPSJ1aS1wcm9ncmVzc2Jhci12YWx1ZSB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1sZWZ0Ij48L2Rpdj4nKS5hcHBlbmRUbyh0aGlzLmVsZW1lbnQpO3RoaXMuX3JlZnJlc2hWYWx1ZSgpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCJ1aS1wcm9ncmVzc2JhciB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbCIpLnJlbW92ZUF0dHIoInJvbGUiKS5yZW1vdmVBdHRyKCJhcmlhLXZhbHVlbWluIikucmVtb3ZlQXR0cigiYXJpYS12YWx1ZW1heCIpLnJlbW92ZUF0dHIoImFyaWEtdmFsdWVub3ciKS5yZW1vdmVEYXRhKCJwcm9ncmVzc2JhciIpLnVuYmluZCgiLnByb2dyZXNzYmFyIik7dGhpcy52YWx1ZURpdi5yZW1vdmUoKTthLndpZGdldC5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LHZhbHVlOmZ1bmN0aW9uKGIpe2lmKGI9PT11bmRlZmluZWQpe3JldHVybiB0aGlzLl92YWx1ZSgpfXRoaXMuX3NldERhdGEoInZhbHVlIixiKTtyZXR1cm4gdGhpc30sX3NldERhdGE6ZnVuY3Rpb24oYixjKXtzd2l0Y2goYil7Y2FzZSJ2YWx1ZSI6dGhpcy5vcHRpb25zLnZhbHVlPWM7dGhpcy5fcmVmcmVzaFZhbHVlKCk7dGhpcy5fdHJpZ2dlcigiY2hhbmdlIixudWxsLHt9KTticmVha31hLndpZGdldC5wcm90b3R5cGUuX3NldERhdGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxfdmFsdWU6ZnVuY3Rpb24oKXt2YXIgYj10aGlzLm9wdGlvbnMudmFsdWU7aWYoYjx0aGlzLl92YWx1ZU1pbigpKXtiPXRoaXMuX3ZhbHVlTWluKCl9aWYoYj50aGlzLl92YWx1ZU1heCgpKXtiPXRoaXMuX3ZhbHVlTWF4KCl9cmV0dXJuIGJ9LF92YWx1ZU1pbjpmdW5jdGlvbigpe3ZhciBiPTA7cmV0dXJuIGJ9LF92YWx1ZU1heDpmdW5jdGlvbigpe3ZhciBiPTEwMDtyZXR1cm4gYn0sX3JlZnJlc2hWYWx1ZTpmdW5jdGlvbigpe3ZhciBiPXRoaXMudmFsdWUoKTt0aGlzLnZhbHVlRGl2W2I9PXRoaXMuX3ZhbHVlTWF4KCk/ImFkZENsYXNzIjoicmVtb3ZlQ2xhc3MiXSgidWktY29ybmVyLXJpZ2h0Iik7dGhpcy52YWx1ZURpdi53aWR0aChiKyIlIik7dGhpcy5lbGVtZW50LmF0dHIoImFyaWEtdmFsdWVub3ciLGIpfX0pO2EuZXh0ZW5kKGEudWkucHJvZ3Jlc3NiYXIse3ZlcnNpb246IjEuNy4yIixkZWZhdWx0czp7dmFsdWU6MH19KX0pKGpRdWVyeSk7Oy8qCiAqIGpRdWVyeSBVSSBFZmZlY3RzIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvRWZmZWN0cy8KICovCmpRdWVyeS5lZmZlY3RzfHwoZnVuY3Rpb24oZCl7ZC5lZmZlY3RzPXt2ZXJzaW9uOiIxLjcuMiIsc2F2ZTpmdW5jdGlvbihnLGgpe2Zvcih2YXIgZj0wO2Y8aC5sZW5ndGg7ZisrKXtpZihoW2ZdIT09bnVsbCl7Zy5kYXRhKCJlYy5zdG9yYWdlLiIraFtmXSxnWzBdLnN0eWxlW2hbZl1dKX19fSxyZXN0b3JlOmZ1bmN0aW9uKGcsaCl7Zm9yKHZhciBmPTA7ZjxoLmxlbmd0aDtmKyspe2lmKGhbZl0hPT1udWxsKXtnLmNzcyhoW2ZdLGcuZGF0YSgiZWMuc3RvcmFnZS4iK2hbZl0pKX19fSxzZXRNb2RlOmZ1bmN0aW9uKGYsZyl7aWYoZz09InRvZ2dsZSIpe2c9Zi5pcygiOmhpZGRlbiIpPyJzaG93IjoiaGlkZSJ9cmV0dXJuIGd9LGdldEJhc2VsaW5lOmZ1bmN0aW9uKGcsaCl7dmFyIGksZjtzd2l0Y2goZ1swXSl7Y2FzZSJ0b3AiOmk9MDticmVhaztjYXNlIm1pZGRsZSI6aT0wLjU7YnJlYWs7Y2FzZSJib3R0b20iOmk9MTticmVhaztkZWZhdWx0Omk9Z1swXS9oLmhlaWdodH1zd2l0Y2goZ1sxXSl7Y2FzZSJsZWZ0IjpmPTA7YnJlYWs7Y2FzZSJjZW50ZXIiOmY9MC41O2JyZWFrO2Nhc2UicmlnaHQiOmY9MTticmVhaztkZWZhdWx0OmY9Z1sxXS9oLndpZHRofXJldHVybnt4OmYseTppfX0sY3JlYXRlV3JhcHBlcjpmdW5jdGlvbihmKXtpZihmLnBhcmVudCgpLmlzKCIudWktZWZmZWN0cy13cmFwcGVyIikpe3JldHVybiBmLnBhcmVudCgpfXZhciBnPXt3aWR0aDpmLm91dGVyV2lkdGgodHJ1ZSksaGVpZ2h0OmYub3V0ZXJIZWlnaHQodHJ1ZSksImZsb2F0IjpmLmNzcygiZmxvYXQiKX07Zi53cmFwKCc8ZGl2IGNsYXNzPSJ1aS1lZmZlY3RzLXdyYXBwZXIiIHN0eWxlPSJmb250LXNpemU6MTAwJTtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50O2JvcmRlcjpub25lO21hcmdpbjowO3BhZGRpbmc6MCI+PC9kaXY+Jyk7dmFyIGo9Zi5wYXJlbnQoKTtpZihmLmNzcygicG9zaXRpb24iKT09InN0YXRpYyIpe2ouY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUifSk7Zi5jc3Moe3Bvc2l0aW9uOiJyZWxhdGl2ZSJ9KX1lbHNle3ZhciBpPWYuY3NzKCJ0b3AiKTtpZihpc05hTihwYXJzZUludChpLDEwKSkpe2k9ImF1dG8ifXZhciBoPWYuY3NzKCJsZWZ0Iik7aWYoaXNOYU4ocGFyc2VJbnQoaCwxMCkpKXtoPSJhdXRvIn1qLmNzcyh7cG9zaXRpb246Zi5jc3MoInBvc2l0aW9uIiksdG9wOmksbGVmdDpoLHpJbmRleDpmLmNzcygiei1pbmRleCIpfSkuc2hvdygpO2YuY3NzKHtwb3NpdGlvbjoicmVsYXRpdmUiLHRvcDowLGxlZnQ6MH0pfWouY3NzKGcpO3JldHVybiBqfSxyZW1vdmVXcmFwcGVyOmZ1bmN0aW9uKGYpe2lmKGYucGFyZW50KCkuaXMoIi51aS1lZmZlY3RzLXdyYXBwZXIiKSl7cmV0dXJuIGYucGFyZW50KCkucmVwbGFjZVdpdGgoZil9cmV0dXJuIGZ9LHNldFRyYW5zaXRpb246ZnVuY3Rpb24oZyxpLGYsaCl7aD1ofHx7fTtkLmVhY2goaSxmdW5jdGlvbihrLGope3VuaXQ9Zy5jc3NVbml0KGopO2lmKHVuaXRbMF0+MCl7aFtqXT11bml0WzBdKmYrdW5pdFsxXX19KTtyZXR1cm4gaH0sYW5pbWF0ZUNsYXNzOmZ1bmN0aW9uKGgsaSxrLGope3ZhciBmPSh0eXBlb2Ygaz09ImZ1bmN0aW9uIj9rOihqP2o6bnVsbCkpO3ZhciBnPSh0eXBlb2Ygaz09InN0cmluZyI/azpudWxsKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHE9e307dmFyIG89ZCh0aGlzKTt2YXIgcD1vLmF0dHIoInN0eWxlIil8fCIiO2lmKHR5cGVvZiBwPT0ib2JqZWN0Iil7cD1wLmNzc1RleHR9aWYoaC50b2dnbGUpe28uaGFzQ2xhc3MoaC50b2dnbGUpP2gucmVtb3ZlPWgudG9nZ2xlOmguYWRkPWgudG9nZ2xlfXZhciBsPWQuZXh0ZW5kKHt9LChkb2N1bWVudC5kZWZhdWx0Vmlldz9kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCk6dGhpcy5jdXJyZW50U3R5bGUpKTtpZihoLmFkZCl7by5hZGRDbGFzcyhoLmFkZCl9aWYoaC5yZW1vdmUpe28ucmVtb3ZlQ2xhc3MoaC5yZW1vdmUpfXZhciBtPWQuZXh0ZW5kKHt9LChkb2N1bWVudC5kZWZhdWx0Vmlldz9kb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCk6dGhpcy5jdXJyZW50U3R5bGUpKTtpZihoLmFkZCl7by5yZW1vdmVDbGFzcyhoLmFkZCl9aWYoaC5yZW1vdmUpe28uYWRkQ2xhc3MoaC5yZW1vdmUpfWZvcih2YXIgciBpbiBtKXtpZih0eXBlb2YgbVtyXSE9ImZ1bmN0aW9uIiYmbVtyXSYmci5pbmRleE9mKCJNb3oiKT09LTEmJnIuaW5kZXhPZigibGVuZ3RoIik9PS0xJiZtW3JdIT1sW3JdJiYoci5tYXRjaCgvY29sb3IvaSl8fCghci5tYXRjaCgvY29sb3IvaSkmJiFpc05hTihwYXJzZUludChtW3JdLDEwKSkpKSYmKGwucG9zaXRpb24hPSJzdGF0aWMifHwobC5wb3NpdGlvbj09InN0YXRpYyImJiFyLm1hdGNoKC9sZWZ0fHRvcHxib3R0b218cmlnaHQvKSkpKXtxW3JdPW1bcl19fW8uYW5pbWF0ZShxLGksZyxmdW5jdGlvbigpe2lmKHR5cGVvZiBkKHRoaXMpLmF0dHIoInN0eWxlIik9PSJvYmplY3QiKXtkKHRoaXMpLmF0dHIoInN0eWxlIilbImNzc1RleHQiXT0iIjtkKHRoaXMpLmF0dHIoInN0eWxlIilbImNzc1RleHQiXT1wfWVsc2V7ZCh0aGlzKS5hdHRyKCJzdHlsZSIscCl9aWYoaC5hZGQpe2QodGhpcykuYWRkQ2xhc3MoaC5hZGQpfWlmKGgucmVtb3ZlKXtkKHRoaXMpLnJlbW92ZUNsYXNzKGgucmVtb3ZlKX1pZihmKXtmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KX0pfX07ZnVuY3Rpb24gYyhnLGYpe3ZhciBpPWdbMV0mJmdbMV0uY29uc3RydWN0b3I9PU9iamVjdD9nWzFdOnt9O2lmKGYpe2kubW9kZT1mfXZhciBoPWdbMV0mJmdbMV0uY29uc3RydWN0b3IhPU9iamVjdD9nWzFdOihpLmR1cmF0aW9uP2kuZHVyYXRpb246Z1syXSk7aD1kLmZ4Lm9mZj8wOnR5cGVvZiBoPT09Im51bWJlciI/aDpkLmZ4LnNwZWVkc1toXXx8ZC5meC5zcGVlZHMuX2RlZmF1bHQ7dmFyIGo9aS5jYWxsYmFja3x8KGQuaXNGdW5jdGlvbihnWzFdKSYmZ1sxXSl8fChkLmlzRnVuY3Rpb24oZ1syXSkmJmdbMl0pfHwoZC5pc0Z1bmN0aW9uKGdbM10pJiZnWzNdKTtyZXR1cm5bZ1swXSxpLGgsal19ZC5mbi5leHRlbmQoe19zaG93OmQuZm4uc2hvdyxfaGlkZTpkLmZuLmhpZGUsX190b2dnbGU6ZC5mbi50b2dnbGUsX2FkZENsYXNzOmQuZm4uYWRkQ2xhc3MsX3JlbW92ZUNsYXNzOmQuZm4ucmVtb3ZlQ2xhc3MsX3RvZ2dsZUNsYXNzOmQuZm4udG9nZ2xlQ2xhc3MsZWZmZWN0OmZ1bmN0aW9uKGcsZixoLGkpe3JldHVybiBkLmVmZmVjdHNbZ10/ZC5lZmZlY3RzW2ddLmNhbGwodGhpcyx7bWV0aG9kOmcsb3B0aW9uczpmfHx7fSxkdXJhdGlvbjpoLGNhbGxiYWNrOml9KTpudWxsfSxzaG93OmZ1bmN0aW9uKCl7aWYoIWFyZ3VtZW50c1swXXx8KGFyZ3VtZW50c1swXS5jb25zdHJ1Y3Rvcj09TnVtYmVyfHwoLyhzbG93fG5vcm1hbHxmYXN0KS8pLnRlc3QoYXJndW1lbnRzWzBdKSkpe3JldHVybiB0aGlzLl9zaG93LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1lbHNle3JldHVybiB0aGlzLmVmZmVjdC5hcHBseSh0aGlzLGMoYXJndW1lbnRzLCJzaG93IikpfX0saGlkZTpmdW5jdGlvbigpe2lmKCFhcmd1bWVudHNbMF18fChhcmd1bWVudHNbMF0uY29uc3RydWN0b3I9PU51bWJlcnx8KC8oc2xvd3xub3JtYWx8ZmFzdCkvKS50ZXN0KGFyZ3VtZW50c1swXSkpKXtyZXR1cm4gdGhpcy5faGlkZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZWxzZXtyZXR1cm4gdGhpcy5lZmZlY3QuYXBwbHkodGhpcyxjKGFyZ3VtZW50cywiaGlkZSIpKX19LHRvZ2dsZTpmdW5jdGlvbigpe2lmKCFhcmd1bWVudHNbMF18fChhcmd1bWVudHNbMF0uY29uc3RydWN0b3I9PU51bWJlcnx8KC8oc2xvd3xub3JtYWx8ZmFzdCkvKS50ZXN0KGFyZ3VtZW50c1swXSkpfHwoZC5pc0Z1bmN0aW9uKGFyZ3VtZW50c1swXSl8fHR5cGVvZiBhcmd1bWVudHNbMF09PSJib29sZWFuIikpe3JldHVybiB0aGlzLl9fdG9nZ2xlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1lbHNle3JldHVybiB0aGlzLmVmZmVjdC5hcHBseSh0aGlzLGMoYXJndW1lbnRzLCJ0b2dnbGUiKSl9fSxhZGRDbGFzczpmdW5jdGlvbihnLGYsaSxoKXtyZXR1cm4gZj9kLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmFwcGx5KHRoaXMsW3thZGQ6Z30sZixpLGhdKTp0aGlzLl9hZGRDbGFzcyhnKX0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oZyxmLGksaCl7cmV0dXJuIGY/ZC5lZmZlY3RzLmFuaW1hdGVDbGFzcy5hcHBseSh0aGlzLFt7cmVtb3ZlOmd9LGYsaSxoXSk6dGhpcy5fcmVtb3ZlQ2xhc3MoZyl9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGcsZixpLGgpe3JldHVybigodHlwZW9mIGYhPT0iYm9vbGVhbiIpJiZmKT9kLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmFwcGx5KHRoaXMsW3t0b2dnbGU6Z30sZixpLGhdKTp0aGlzLl90b2dnbGVDbGFzcyhnLGYpfSxtb3JwaDpmdW5jdGlvbihmLGgsZyxqLGkpe3JldHVybiBkLmVmZmVjdHMuYW5pbWF0ZUNsYXNzLmFwcGx5KHRoaXMsW3thZGQ6aCxyZW1vdmU6Zn0sZyxqLGldKX0sc3dpdGNoQ2xhc3M6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb3JwaC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGNzc1VuaXQ6ZnVuY3Rpb24oZil7dmFyIGc9dGhpcy5jc3MoZiksaD1bXTtkLmVhY2goWyJlbSIsInB4IiwiJSIsInB0Il0sZnVuY3Rpb24oaixrKXtpZihnLmluZGV4T2Yoayk+MCl7aD1bcGFyc2VGbG9hdChnKSxrXX19KTtyZXR1cm4gaH19KTtkLmVhY2goWyJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXJCb3R0b21Db2xvciIsImJvcmRlckxlZnRDb2xvciIsImJvcmRlclJpZ2h0Q29sb3IiLCJib3JkZXJUb3BDb2xvciIsImNvbG9yIiwib3V0bGluZUNvbG9yIl0sZnVuY3Rpb24oZyxmKXtkLmZ4LnN0ZXBbZl09ZnVuY3Rpb24oaCl7aWYoaC5zdGF0ZT09MCl7aC5zdGFydD1lKGguZWxlbSxmKTtoLmVuZD1iKGguZW5kKX1oLmVsZW0uc3R5bGVbZl09InJnYigiK1tNYXRoLm1heChNYXRoLm1pbihwYXJzZUludCgoaC5wb3MqKGguZW5kWzBdLWguc3RhcnRbMF0pKStoLnN0YXJ0WzBdLDEwKSwyNTUpLDApLE1hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KChoLnBvcyooaC5lbmRbMV0taC5zdGFydFsxXSkpK2guc3RhcnRbMV0sMTApLDI1NSksMCksTWF0aC5tYXgoTWF0aC5taW4ocGFyc2VJbnQoKGgucG9zKihoLmVuZFsyXS1oLnN0YXJ0WzJdKSkraC5zdGFydFsyXSwxMCksMjU1KSwwKV0uam9pbigiLCIpKyIpIn19KTtmdW5jdGlvbiBiKGcpe3ZhciBmO2lmKGcmJmcuY29uc3RydWN0b3I9PUFycmF5JiZnLmxlbmd0aD09Myl7cmV0dXJuIGd9aWYoZj0vcmdiXChccyooWzAtOV17MSwzfSlccyosXHMqKFswLTldezEsM30pXHMqLFxzKihbMC05XXsxLDN9KVxzKlwpLy5leGVjKGcpKXtyZXR1cm5bcGFyc2VJbnQoZlsxXSwxMCkscGFyc2VJbnQoZlsyXSwxMCkscGFyc2VJbnQoZlszXSwxMCldfWlmKGY9L3JnYlwoXHMqKFswLTldKyg/OlwuWzAtOV0rKT8pXCVccyosXHMqKFswLTldKyg/OlwuWzAtOV0rKT8pXCVccyosXHMqKFswLTldKyg/OlwuWzAtOV0rKT8pXCVccypcKS8uZXhlYyhnKSl7cmV0dXJuW3BhcnNlRmxvYXQoZlsxXSkqMi41NSxwYXJzZUZsb2F0KGZbMl0pKjIuNTUscGFyc2VGbG9hdChmWzNdKSoyLjU1XX1pZihmPS8jKFthLWZBLUYwLTldezJ9KShbYS1mQS1GMC05XXsyfSkoW2EtZkEtRjAtOV17Mn0pLy5leGVjKGcpKXtyZXR1cm5bcGFyc2VJbnQoZlsxXSwxNikscGFyc2VJbnQoZlsyXSwxNikscGFyc2VJbnQoZlszXSwxNildfWlmKGY9LyMoW2EtZkEtRjAtOV0pKFthLWZBLUYwLTldKShbYS1mQS1GMC05XSkvLmV4ZWMoZykpe3JldHVybltwYXJzZUludChmWzFdK2ZbMV0sMTYpLHBhcnNlSW50KGZbMl0rZlsyXSwxNikscGFyc2VJbnQoZlszXStmWzNdLDE2KV19aWYoZj0vcmdiYVwoMCwgMCwgMCwgMFwpLy5leGVjKGcpKXtyZXR1cm4gYS50cmFuc3BhcmVudH1yZXR1cm4gYVtkLnRyaW0oZykudG9Mb3dlckNhc2UoKV19ZnVuY3Rpb24gZShoLGYpe3ZhciBnO2Rve2c9ZC5jdXJDU1MoaCxmKTtpZihnIT0iIiYmZyE9InRyYW5zcGFyZW50Inx8ZC5ub2RlTmFtZShoLCJib2R5Iikpe2JyZWFrfWY9ImJhY2tncm91bmRDb2xvciJ9d2hpbGUoaD1oLnBhcmVudE5vZGUpO3JldHVybiBiKGcpfXZhciBhPXthcXVhOlswLDI1NSwyNTVdLGF6dXJlOlsyNDAsMjU1LDI1NV0sYmVpZ2U6WzI0NSwyNDUsMjIwXSxibGFjazpbMCwwLDBdLGJsdWU6WzAsMCwyNTVdLGJyb3duOlsxNjUsNDIsNDJdLGN5YW46WzAsMjU1LDI1NV0sZGFya2JsdWU6WzAsMCwxMzldLGRhcmtjeWFuOlswLDEzOSwxMzldLGRhcmtncmV5OlsxNjksMTY5LDE2OV0sZGFya2dyZWVuOlswLDEwMCwwXSxkYXJra2hha2k6WzE4OSwxODMsMTA3XSxkYXJrbWFnZW50YTpbMTM5LDAsMTM5XSxkYXJrb2xpdmVncmVlbjpbODUsMTA3LDQ3XSxkYXJrb3JhbmdlOlsyNTUsMTQwLDBdLGRhcmtvcmNoaWQ6WzE1Myw1MCwyMDRdLGRhcmtyZWQ6WzEzOSwwLDBdLGRhcmtzYWxtb246WzIzMywxNTAsMTIyXSxkYXJrdmlvbGV0OlsxNDgsMCwyMTFdLGZ1Y2hzaWE6WzI1NSwwLDI1NV0sZ29sZDpbMjU1LDIxNSwwXSxncmVlbjpbMCwxMjgsMF0saW5kaWdvOls3NSwwLDEzMF0sa2hha2k6WzI0MCwyMzAsMTQwXSxsaWdodGJsdWU6WzE3MywyMTYsMjMwXSxsaWdodGN5YW46WzIyNCwyNTUsMjU1XSxsaWdodGdyZWVuOlsxNDQsMjM4LDE0NF0sbGlnaHRncmV5OlsyMTEsMjExLDIxMV0sbGlnaHRwaW5rOlsyNTUsMTgyLDE5M10sbGlnaHR5ZWxsb3c6WzI1NSwyNTUsMjI0XSxsaW1lOlswLDI1NSwwXSxtYWdlbnRhOlsyNTUsMCwyNTVdLG1hcm9vbjpbMTI4LDAsMF0sbmF2eTpbMCwwLDEyOF0sb2xpdmU6WzEyOCwxMjgsMF0sb3JhbmdlOlsyNTUsMTY1LDBdLHBpbms6WzI1NSwxOTIsMjAzXSxwdXJwbGU6WzEyOCwwLDEyOF0sdmlvbGV0OlsxMjgsMCwxMjhdLHJlZDpbMjU1LDAsMF0sc2lsdmVyOlsxOTIsMTkyLDE5Ml0sd2hpdGU6WzI1NSwyNTUsMjU1XSx5ZWxsb3c6WzI1NSwyNTUsMF0sdHJhbnNwYXJlbnQ6WzI1NSwyNTUsMjU1XX07ZC5lYXNpbmcuanN3aW5nPWQuZWFzaW5nLnN3aW5nO2QuZXh0ZW5kKGQuZWFzaW5nLHtkZWY6ImVhc2VPdXRRdWFkIixzd2luZzpmdW5jdGlvbihnLGgsZixqLGkpe3JldHVybiBkLmVhc2luZ1tkLmVhc2luZy5kZWZdKGcsaCxmLGosaSl9LGVhc2VJblF1YWQ6ZnVuY3Rpb24oZyxoLGYsaixpKXtyZXR1cm4gaiooaC89aSkqaCtmfSxlYXNlT3V0UXVhZDpmdW5jdGlvbihnLGgsZixqLGkpe3JldHVybiAtaiooaC89aSkqKGgtMikrZn0sZWFzZUluT3V0UXVhZDpmdW5jdGlvbihnLGgsZixqLGkpe2lmKChoLz1pLzIpPDEpe3JldHVybiBqLzIqaCpoK2Z9cmV0dXJuIC1qLzIqKCgtLWgpKihoLTIpLTEpK2Z9LGVhc2VJbkN1YmljOmZ1bmN0aW9uKGcsaCxmLGosaSl7cmV0dXJuIGoqKGgvPWkpKmgqaCtmfSxlYXNlT3V0Q3ViaWM6ZnVuY3Rpb24oZyxoLGYsaixpKXtyZXR1cm4gaiooKGg9aC9pLTEpKmgqaCsxKStmfSxlYXNlSW5PdXRDdWJpYzpmdW5jdGlvbihnLGgsZixqLGkpe2lmKChoLz1pLzIpPDEpe3JldHVybiBqLzIqaCpoKmgrZn1yZXR1cm4gai8yKigoaC09MikqaCpoKzIpK2Z9LGVhc2VJblF1YXJ0OmZ1bmN0aW9uKGcsaCxmLGosaSl7cmV0dXJuIGoqKGgvPWkpKmgqaCpoK2Z9LGVhc2VPdXRRdWFydDpmdW5jdGlvbihnLGgsZixqLGkpe3JldHVybiAtaiooKGg9aC9pLTEpKmgqaCpoLTEpK2Z9LGVhc2VJbk91dFF1YXJ0OmZ1bmN0aW9uKGcsaCxmLGosaSl7aWYoKGgvPWkvMik8MSl7cmV0dXJuIGovMipoKmgqaCpoK2Z9cmV0dXJuIC1qLzIqKChoLT0yKSpoKmgqaC0yKStmfSxlYXNlSW5RdWludDpmdW5jdGlvbihnLGgsZixqLGkpe3JldHVybiBqKihoLz1pKSpoKmgqaCpoK2Z9LGVhc2VPdXRRdWludDpmdW5jdGlvbihnLGgsZixqLGkpe3JldHVybiBqKigoaD1oL2ktMSkqaCpoKmgqaCsxKStmfSxlYXNlSW5PdXRRdWludDpmdW5jdGlvbihnLGgsZixqLGkpe2lmKChoLz1pLzIpPDEpe3JldHVybiBqLzIqaCpoKmgqaCpoK2Z9cmV0dXJuIGovMiooKGgtPTIpKmgqaCpoKmgrMikrZn0sZWFzZUluU2luZTpmdW5jdGlvbihnLGgsZixqLGkpe3JldHVybiAtaipNYXRoLmNvcyhoL2kqKE1hdGguUEkvMikpK2orZn0sZWFzZU91dFNpbmU6ZnVuY3Rpb24oZyxoLGYsaixpKXtyZXR1cm4gaipNYXRoLnNpbihoL2kqKE1hdGguUEkvMikpK2Z9LGVhc2VJbk91dFNpbmU6ZnVuY3Rpb24oZyxoLGYsaixpKXtyZXR1cm4gLWovMiooTWF0aC5jb3MoTWF0aC5QSSpoL2kpLTEpK2Z9LGVhc2VJbkV4cG86ZnVuY3Rpb24oZyxoLGYsaixpKXtyZXR1cm4oaD09MCk/ZjpqKk1hdGgucG93KDIsMTAqKGgvaS0xKSkrZn0sZWFzZU91dEV4cG86ZnVuY3Rpb24oZyxoLGYsaixpKXtyZXR1cm4oaD09aSk/ZitqOmoqKC1NYXRoLnBvdygyLC0xMCpoL2kpKzEpK2Z9LGVhc2VJbk91dEV4cG86ZnVuY3Rpb24oZyxoLGYsaixpKXtpZihoPT0wKXtyZXR1cm4gZn1pZihoPT1pKXtyZXR1cm4gZitqfWlmKChoLz1pLzIpPDEpe3JldHVybiBqLzIqTWF0aC5wb3coMiwxMCooaC0xKSkrZn1yZXR1cm4gai8yKigtTWF0aC5wb3coMiwtMTAqLS1oKSsyKStmfSxlYXNlSW5DaXJjOmZ1bmN0aW9uKGcsaCxmLGosaSl7cmV0dXJuIC1qKihNYXRoLnNxcnQoMS0oaC89aSkqaCktMSkrZn0sZWFzZU91dENpcmM6ZnVuY3Rpb24oZyxoLGYsaixpKXtyZXR1cm4gaipNYXRoLnNxcnQoMS0oaD1oL2ktMSkqaCkrZn0sZWFzZUluT3V0Q2lyYzpmdW5jdGlvbihnLGgsZixqLGkpe2lmKChoLz1pLzIpPDEpe3JldHVybiAtai8yKihNYXRoLnNxcnQoMS1oKmgpLTEpK2Z9cmV0dXJuIGovMiooTWF0aC5zcXJ0KDEtKGgtPTIpKmgpKzEpK2Z9LGVhc2VJbkVsYXN0aWM6ZnVuY3Rpb24oZyxpLGYsbSxsKXt2YXIgaj0xLjcwMTU4O3ZhciBrPTA7dmFyIGg9bTtpZihpPT0wKXtyZXR1cm4gZn1pZigoaS89bCk9PTEpe3JldHVybiBmK219aWYoIWspe2s9bCowLjN9aWYoaDxNYXRoLmFicyhtKSl7aD1tO3ZhciBqPWsvNH1lbHNle3ZhciBqPWsvKDIqTWF0aC5QSSkqTWF0aC5hc2luKG0vaCl9cmV0dXJuIC0oaCpNYXRoLnBvdygyLDEwKihpLT0xKSkqTWF0aC5zaW4oKGkqbC1qKSooMipNYXRoLlBJKS9rKSkrZn0sZWFzZU91dEVsYXN0aWM6ZnVuY3Rpb24oZyxpLGYsbSxsKXt2YXIgaj0xLjcwMTU4O3ZhciBrPTA7dmFyIGg9bTtpZihpPT0wKXtyZXR1cm4gZn1pZigoaS89bCk9PTEpe3JldHVybiBmK219aWYoIWspe2s9bCowLjN9aWYoaDxNYXRoLmFicyhtKSl7aD1tO3ZhciBqPWsvNH1lbHNle3ZhciBqPWsvKDIqTWF0aC5QSSkqTWF0aC5hc2luKG0vaCl9cmV0dXJuIGgqTWF0aC5wb3coMiwtMTAqaSkqTWF0aC5zaW4oKGkqbC1qKSooMipNYXRoLlBJKS9rKSttK2Z9LGVhc2VJbk91dEVsYXN0aWM6ZnVuY3Rpb24oZyxpLGYsbSxsKXt2YXIgaj0xLjcwMTU4O3ZhciBrPTA7dmFyIGg9bTtpZihpPT0wKXtyZXR1cm4gZn1pZigoaS89bC8yKT09Mil7cmV0dXJuIGYrbX1pZighayl7az1sKigwLjMqMS41KX1pZihoPE1hdGguYWJzKG0pKXtoPW07dmFyIGo9ay80fWVsc2V7dmFyIGo9ay8oMipNYXRoLlBJKSpNYXRoLmFzaW4obS9oKX1pZihpPDEpe3JldHVybiAtMC41KihoKk1hdGgucG93KDIsMTAqKGktPTEpKSpNYXRoLnNpbigoaSpsLWopKigyKk1hdGguUEkpL2spKStmfXJldHVybiBoKk1hdGgucG93KDIsLTEwKihpLT0xKSkqTWF0aC5zaW4oKGkqbC1qKSooMipNYXRoLlBJKS9rKSowLjUrbStmfSxlYXNlSW5CYWNrOmZ1bmN0aW9uKGcsaCxmLGssaixpKXtpZihpPT11bmRlZmluZWQpe2k9MS43MDE1OH1yZXR1cm4gayooaC89aikqaCooKGkrMSkqaC1pKStmfSxlYXNlT3V0QmFjazpmdW5jdGlvbihnLGgsZixrLGosaSl7aWYoaT09dW5kZWZpbmVkKXtpPTEuNzAxNTh9cmV0dXJuIGsqKChoPWgvai0xKSpoKigoaSsxKSpoK2kpKzEpK2Z9LGVhc2VJbk91dEJhY2s6ZnVuY3Rpb24oZyxoLGYsayxqLGkpe2lmKGk9PXVuZGVmaW5lZCl7aT0xLjcwMTU4fWlmKChoLz1qLzIpPDEpe3JldHVybiBrLzIqKGgqaCooKChpKj0oMS41MjUpKSsxKSpoLWkpKStmfXJldHVybiBrLzIqKChoLT0yKSpoKigoKGkqPSgxLjUyNSkpKzEpKmgraSkrMikrZn0sZWFzZUluQm91bmNlOmZ1bmN0aW9uKGcsaCxmLGosaSl7cmV0dXJuIGotZC5lYXNpbmcuZWFzZU91dEJvdW5jZShnLGktaCwwLGosaSkrZn0sZWFzZU91dEJvdW5jZTpmdW5jdGlvbihnLGgsZixqLGkpe2lmKChoLz1pKTwoMS8yLjc1KSl7cmV0dXJuIGoqKDcuNTYyNSpoKmgpK2Z9ZWxzZXtpZihoPCgyLzIuNzUpKXtyZXR1cm4gaiooNy41NjI1KihoLT0oMS41LzIuNzUpKSpoKzAuNzUpK2Z9ZWxzZXtpZihoPCgyLjUvMi43NSkpe3JldHVybiBqKig3LjU2MjUqKGgtPSgyLjI1LzIuNzUpKSpoKzAuOTM3NSkrZn1lbHNle3JldHVybiBqKig3LjU2MjUqKGgtPSgyLjYyNS8yLjc1KSkqaCswLjk4NDM3NSkrZn19fX0sZWFzZUluT3V0Qm91bmNlOmZ1bmN0aW9uKGcsaCxmLGosaSl7aWYoaDxpLzIpe3JldHVybiBkLmVhc2luZy5lYXNlSW5Cb3VuY2UoZyxoKjIsMCxqLGkpKjAuNStmfXJldHVybiBkLmVhc2luZy5lYXNlT3V0Qm91bmNlKGcsaCoyLWksMCxqLGkpKjAuNStqKjAuNStmfX0pfSkoalF1ZXJ5KTs7LyoKICogalF1ZXJ5IFVJIEVmZmVjdHMgQmxpbmQgMS43LjIKICoKICogQ29weXJpZ2h0IChjKSAyMDA5IEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkKICogYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICoKICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9FZmZlY3RzL0JsaW5kCiAqCiAqIERlcGVuZHM6CiAqCWVmZmVjdHMuY29yZS5qcwogKi8KKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5ibGluZD1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksYz1bInBvc2l0aW9uIiwidG9wIiwibGVmdCJdO3ZhciBoPWEuZWZmZWN0cy5zZXRNb2RlKGQsYi5vcHRpb25zLm1vZGV8fCJoaWRlIik7dmFyIGc9Yi5vcHRpb25zLmRpcmVjdGlvbnx8InZlcnRpY2FsIjthLmVmZmVjdHMuc2F2ZShkLGMpO2Quc2hvdygpO3ZhciBqPWEuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKGQpLmNzcyh7b3ZlcmZsb3c6ImhpZGRlbiJ9KTt2YXIgZT0oZz09InZlcnRpY2FsIik/ImhlaWdodCI6IndpZHRoIjt2YXIgaT0oZz09InZlcnRpY2FsIik/ai5oZWlnaHQoKTpqLndpZHRoKCk7aWYoaD09InNob3ciKXtqLmNzcyhlLDApfXZhciBmPXt9O2ZbZV09aD09InNob3ciP2k6MDtqLmFuaW1hdGUoZixiLmR1cmF0aW9uLGIub3B0aW9ucy5lYXNpbmcsZnVuY3Rpb24oKXtpZihoPT0iaGlkZSIpe2QuaGlkZSgpfWEuZWZmZWN0cy5yZXN0b3JlKGQsYyk7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoZCk7aWYoYi5jYWxsYmFjayl7Yi5jYWxsYmFjay5hcHBseShkWzBdLGFyZ3VtZW50cyl9ZC5kZXF1ZXVlKCl9KX0pfX0pKGpRdWVyeSk7Oy8qCiAqIGpRdWVyeSBVSSBFZmZlY3RzIEJvdW5jZSAxLjcuMgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDkgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KQogKiBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL0VmZmVjdHMvQm91bmNlCiAqCiAqIERlcGVuZHM6CiAqCWVmZmVjdHMuY29yZS5qcwogKi8KKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5ib3VuY2U9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMpLGw9WyJwb3NpdGlvbiIsInRvcCIsImxlZnQiXTt2YXIgaz1hLmVmZmVjdHMuc2V0TW9kZShlLGIub3B0aW9ucy5tb2RlfHwiZWZmZWN0Iik7dmFyIG49Yi5vcHRpb25zLmRpcmVjdGlvbnx8InVwIjt2YXIgYz1iLm9wdGlvbnMuZGlzdGFuY2V8fDIwO3ZhciBkPWIub3B0aW9ucy50aW1lc3x8NTt2YXIgZz1iLmR1cmF0aW9ufHwyNTA7aWYoL3Nob3d8aGlkZS8udGVzdChrKSl7bC5wdXNoKCJvcGFjaXR5Iil9YS5lZmZlY3RzLnNhdmUoZSxsKTtlLnNob3coKTthLmVmZmVjdHMuY3JlYXRlV3JhcHBlcihlKTt2YXIgZj0obj09InVwInx8bj09ImRvd24iKT8idG9wIjoibGVmdCI7dmFyIHA9KG49PSJ1cCJ8fG49PSJsZWZ0Iik/InBvcyI6Im5lZyI7dmFyIGM9Yi5vcHRpb25zLmRpc3RhbmNlfHwoZj09InRvcCI/ZS5vdXRlckhlaWdodCh7bWFyZ2luOnRydWV9KS8zOmUub3V0ZXJXaWR0aCh7bWFyZ2luOnRydWV9KS8zKTtpZihrPT0ic2hvdyIpe2UuY3NzKCJvcGFjaXR5IiwwKS5jc3MoZixwPT0icG9zIj8tYzpjKX1pZihrPT0iaGlkZSIpe2M9Yy8oZCoyKX1pZihrIT0iaGlkZSIpe2QtLX1pZihrPT0ic2hvdyIpe3ZhciBoPXtvcGFjaXR5OjF9O2hbZl09KHA9PSJwb3MiPyIrPSI6Ii09IikrYztlLmFuaW1hdGUoaCxnLzIsYi5vcHRpb25zLmVhc2luZyk7Yz1jLzI7ZC0tfWZvcih2YXIgaj0wO2o8ZDtqKyspe3ZhciBvPXt9LG09e307b1tmXT0ocD09InBvcyI/Ii09IjoiKz0iKStjO21bZl09KHA9PSJwb3MiPyIrPSI6Ii09IikrYztlLmFuaW1hdGUobyxnLzIsYi5vcHRpb25zLmVhc2luZykuYW5pbWF0ZShtLGcvMixiLm9wdGlvbnMuZWFzaW5nKTtjPShrPT0iaGlkZSIpP2MqMjpjLzJ9aWYoaz09ImhpZGUiKXt2YXIgaD17b3BhY2l0eTowfTtoW2ZdPShwPT0icG9zIj8iLT0iOiIrPSIpK2M7ZS5hbmltYXRlKGgsZy8yLGIub3B0aW9ucy5lYXNpbmcsZnVuY3Rpb24oKXtlLmhpZGUoKTthLmVmZmVjdHMucmVzdG9yZShlLGwpO2EuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKGUpO2lmKGIuY2FsbGJhY2spe2IuY2FsbGJhY2suYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfWVsc2V7dmFyIG89e30sbT17fTtvW2ZdPShwPT0icG9zIj8iLT0iOiIrPSIpK2M7bVtmXT0ocD09InBvcyI/Iis9IjoiLT0iKStjO2UuYW5pbWF0ZShvLGcvMixiLm9wdGlvbnMuZWFzaW5nKS5hbmltYXRlKG0sZy8yLGIub3B0aW9ucy5lYXNpbmcsZnVuY3Rpb24oKXthLmVmZmVjdHMucmVzdG9yZShlLGwpO2EuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKGUpO2lmKGIuY2FsbGJhY2spe2IuY2FsbGJhY2suYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfWUucXVldWUoImZ4IixmdW5jdGlvbigpe2UuZGVxdWV1ZSgpfSk7ZS5kZXF1ZXVlKCl9KX19KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgRWZmZWN0cyBDbGlwIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvRWZmZWN0cy9DbGlwCiAqCiAqIERlcGVuZHM6CiAqCWVmZmVjdHMuY29yZS5qcwogKi8KKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5jbGlwPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGY9YSh0aGlzKSxqPVsicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwiaGVpZ2h0Iiwid2lkdGgiXTt2YXIgaT1hLmVmZmVjdHMuc2V0TW9kZShmLGIub3B0aW9ucy5tb2RlfHwiaGlkZSIpO3ZhciBrPWIub3B0aW9ucy5kaXJlY3Rpb258fCJ2ZXJ0aWNhbCI7YS5lZmZlY3RzLnNhdmUoZixqKTtmLnNob3coKTt2YXIgYz1hLmVmZmVjdHMuY3JlYXRlV3JhcHBlcihmKS5jc3Moe292ZXJmbG93OiJoaWRkZW4ifSk7dmFyIGU9ZlswXS50YWdOYW1lPT0iSU1HIj9jOmY7dmFyIGc9e3NpemU6KGs9PSJ2ZXJ0aWNhbCIpPyJoZWlnaHQiOiJ3aWR0aCIscG9zaXRpb246KGs9PSJ2ZXJ0aWNhbCIpPyJ0b3AiOiJsZWZ0In07dmFyIGQ9KGs9PSJ2ZXJ0aWNhbCIpP2UuaGVpZ2h0KCk6ZS53aWR0aCgpO2lmKGk9PSJzaG93Iil7ZS5jc3MoZy5zaXplLDApO2UuY3NzKGcucG9zaXRpb24sZC8yKX12YXIgaD17fTtoW2cuc2l6ZV09aT09InNob3ciP2Q6MDtoW2cucG9zaXRpb25dPWk9PSJzaG93Ij8wOmQvMjtlLmFuaW1hdGUoaCx7cXVldWU6ZmFsc2UsZHVyYXRpb246Yi5kdXJhdGlvbixlYXNpbmc6Yi5vcHRpb25zLmVhc2luZyxjb21wbGV0ZTpmdW5jdGlvbigpe2lmKGk9PSJoaWRlIil7Zi5oaWRlKCl9YS5lZmZlY3RzLnJlc3RvcmUoZixqKTthLmVmZmVjdHMucmVtb3ZlV3JhcHBlcihmKTtpZihiLmNhbGxiYWNrKXtiLmNhbGxiYWNrLmFwcGx5KGZbMF0sYXJndW1lbnRzKX1mLmRlcXVldWUoKX19KX0pfX0pKGpRdWVyeSk7Oy8qCiAqIGpRdWVyeSBVSSBFZmZlY3RzIERyb3AgMS43LjIKICoKICogQ29weXJpZ2h0IChjKSAyMDA5IEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkKICogYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICoKICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9FZmZlY3RzL0Ryb3AKICoKICogRGVwZW5kczoKICoJZWZmZWN0cy5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLmRyb3A9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMpLGQ9WyJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJvcGFjaXR5Il07dmFyIGk9YS5lZmZlY3RzLnNldE1vZGUoZSxiLm9wdGlvbnMubW9kZXx8ImhpZGUiKTt2YXIgaD1iLm9wdGlvbnMuZGlyZWN0aW9ufHwibGVmdCI7YS5lZmZlY3RzLnNhdmUoZSxkKTtlLnNob3coKTthLmVmZmVjdHMuY3JlYXRlV3JhcHBlcihlKTt2YXIgZj0oaD09InVwInx8aD09ImRvd24iKT8idG9wIjoibGVmdCI7dmFyIGM9KGg9PSJ1cCJ8fGg9PSJsZWZ0Iik/InBvcyI6Im5lZyI7dmFyIGo9Yi5vcHRpb25zLmRpc3RhbmNlfHwoZj09InRvcCI/ZS5vdXRlckhlaWdodCh7bWFyZ2luOnRydWV9KS8yOmUub3V0ZXJXaWR0aCh7bWFyZ2luOnRydWV9KS8yKTtpZihpPT0ic2hvdyIpe2UuY3NzKCJvcGFjaXR5IiwwKS5jc3MoZixjPT0icG9zIj8tajpqKX12YXIgZz17b3BhY2l0eTppPT0ic2hvdyI/MTowfTtnW2ZdPShpPT0ic2hvdyI/KGM9PSJwb3MiPyIrPSI6Ii09Iik6KGM9PSJwb3MiPyItPSI6Iis9IikpK2o7ZS5hbmltYXRlKGcse3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmIuZHVyYXRpb24sZWFzaW5nOmIub3B0aW9ucy5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtpZihpPT0iaGlkZSIpe2UuaGlkZSgpfWEuZWZmZWN0cy5yZXN0b3JlKGUsZCk7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoZSk7aWYoYi5jYWxsYmFjayl7Yi5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZS5kZXF1ZXVlKCl9fSl9KX19KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgRWZmZWN0cyBFeHBsb2RlIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvRWZmZWN0cy9FeHBsb2RlCiAqCiAqIERlcGVuZHM6CiAqCWVmZmVjdHMuY29yZS5qcwogKi8KKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5leHBsb2RlPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGs9Yi5vcHRpb25zLnBpZWNlcz9NYXRoLnJvdW5kKE1hdGguc3FydChiLm9wdGlvbnMucGllY2VzKSk6Mzt2YXIgZT1iLm9wdGlvbnMucGllY2VzP01hdGgucm91bmQoTWF0aC5zcXJ0KGIub3B0aW9ucy5waWVjZXMpKTozO2Iub3B0aW9ucy5tb2RlPWIub3B0aW9ucy5tb2RlPT0idG9nZ2xlIj8oYSh0aGlzKS5pcygiOnZpc2libGUiKT8iaGlkZSI6InNob3ciKTpiLm9wdGlvbnMubW9kZTt2YXIgaD1hKHRoaXMpLnNob3coKS5jc3MoInZpc2liaWxpdHkiLCJoaWRkZW4iKTt2YXIgbD1oLm9mZnNldCgpO2wudG9wLT1wYXJzZUludChoLmNzcygibWFyZ2luVG9wIiksMTApfHwwO2wubGVmdC09cGFyc2VJbnQoaC5jc3MoIm1hcmdpbkxlZnQiKSwxMCl8fDA7dmFyIGc9aC5vdXRlcldpZHRoKHRydWUpO3ZhciBjPWgub3V0ZXJIZWlnaHQodHJ1ZSk7Zm9yKHZhciBmPTA7ZjxrO2YrKyl7Zm9yKHZhciBkPTA7ZDxlO2QrKyl7aC5jbG9uZSgpLmFwcGVuZFRvKCJib2R5Iikud3JhcCgiPGRpdj48L2Rpdj4iKS5jc3Moe3Bvc2l0aW9uOiJhYnNvbHV0ZSIsdmlzaWJpbGl0eToidmlzaWJsZSIsbGVmdDotZCooZy9lKSx0b3A6LWYqKGMvayl9KS5wYXJlbnQoKS5hZGRDbGFzcygidWktZWZmZWN0cy1leHBsb2RlIikuY3NzKHtwb3NpdGlvbjoiYWJzb2x1dGUiLG92ZXJmbG93OiJoaWRkZW4iLHdpZHRoOmcvZSxoZWlnaHQ6Yy9rLGxlZnQ6bC5sZWZ0K2QqKGcvZSkrKGIub3B0aW9ucy5tb2RlPT0ic2hvdyI/KGQtTWF0aC5mbG9vcihlLzIpKSooZy9lKTowKSx0b3A6bC50b3ArZiooYy9rKSsoYi5vcHRpb25zLm1vZGU9PSJzaG93Ij8oZi1NYXRoLmZsb29yKGsvMikpKihjL2spOjApLG9wYWNpdHk6Yi5vcHRpb25zLm1vZGU9PSJzaG93Ij8wOjF9KS5hbmltYXRlKHtsZWZ0OmwubGVmdCtkKihnL2UpKyhiLm9wdGlvbnMubW9kZT09InNob3ciPzA6KGQtTWF0aC5mbG9vcihlLzIpKSooZy9lKSksdG9wOmwudG9wK2YqKGMvaykrKGIub3B0aW9ucy5tb2RlPT0ic2hvdyI/MDooZi1NYXRoLmZsb29yKGsvMikpKihjL2spKSxvcGFjaXR5OmIub3B0aW9ucy5tb2RlPT0ic2hvdyI/MTowfSxiLmR1cmF0aW9ufHw1MDApfX1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5vcHRpb25zLm1vZGU9PSJzaG93Ij9oLmNzcyh7dmlzaWJpbGl0eToidmlzaWJsZSJ9KTpoLmNzcyh7dmlzaWJpbGl0eToidmlzaWJsZSJ9KS5oaWRlKCk7aWYoYi5jYWxsYmFjayl7Yi5jYWxsYmFjay5hcHBseShoWzBdKX1oLmRlcXVldWUoKTthKCJkaXYudWktZWZmZWN0cy1leHBsb2RlIikucmVtb3ZlKCl9LGIuZHVyYXRpb258fDUwMCl9KX19KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgRWZmZWN0cyBGb2xkIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvRWZmZWN0cy9Gb2xkCiAqCiAqIERlcGVuZHM6CiAqCWVmZmVjdHMuY29yZS5qcwogKi8KKGZ1bmN0aW9uKGEpe2EuZWZmZWN0cy5mb2xkPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKSxrPVsicG9zaXRpb24iLCJ0b3AiLCJsZWZ0Il07dmFyIGg9YS5lZmZlY3RzLnNldE1vZGUoZSxiLm9wdGlvbnMubW9kZXx8ImhpZGUiKTt2YXIgbz1iLm9wdGlvbnMuc2l6ZXx8MTU7dmFyIG49ISghYi5vcHRpb25zLmhvcml6Rmlyc3QpO3ZhciBnPWIuZHVyYXRpb24/Yi5kdXJhdGlvbi8yOmEuZnguc3BlZWRzLl9kZWZhdWx0LzI7YS5lZmZlY3RzLnNhdmUoZSxrKTtlLnNob3coKTt2YXIgZD1hLmVmZmVjdHMuY3JlYXRlV3JhcHBlcihlKS5jc3Moe292ZXJmbG93OiJoaWRkZW4ifSk7dmFyIGk9KChoPT0ic2hvdyIpIT1uKTt2YXIgZj1pP1sid2lkdGgiLCJoZWlnaHQiXTpbImhlaWdodCIsIndpZHRoIl07dmFyIGM9aT9bZC53aWR0aCgpLGQuaGVpZ2h0KCldOltkLmhlaWdodCgpLGQud2lkdGgoKV07dmFyIGo9LyhbMC05XSspJS8uZXhlYyhvKTtpZihqKXtvPXBhcnNlSW50KGpbMV0sMTApLzEwMCpjW2g9PSJoaWRlIj8wOjFdfWlmKGg9PSJzaG93Iil7ZC5jc3Mobj97aGVpZ2h0OjAsd2lkdGg6b306e2hlaWdodDpvLHdpZHRoOjB9KX12YXIgbT17fSxsPXt9O21bZlswXV09aD09InNob3ciP2NbMF06bztsW2ZbMV1dPWg9PSJzaG93Ij9jWzFdOjA7ZC5hbmltYXRlKG0sZyxiLm9wdGlvbnMuZWFzaW5nKS5hbmltYXRlKGwsZyxiLm9wdGlvbnMuZWFzaW5nLGZ1bmN0aW9uKCl7aWYoaD09ImhpZGUiKXtlLmhpZGUoKX1hLmVmZmVjdHMucmVzdG9yZShlLGspO2EuZWZmZWN0cy5yZW1vdmVXcmFwcGVyKGUpO2lmKGIuY2FsbGJhY2spe2IuY2FsbGJhY2suYXBwbHkoZVswXSxhcmd1bWVudHMpfWUuZGVxdWV1ZSgpfSl9KX19KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgRWZmZWN0cyBIaWdobGlnaHQgMS43LjIKICoKICogQ29weXJpZ2h0IChjKSAyMDA5IEFVVEhPUlMudHh0IChodHRwOi8vanF1ZXJ5dWkuY29tL2Fib3V0KQogKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKE1JVC1MSUNFTlNFLnR4dCkKICogYW5kIEdQTCAoR1BMLUxJQ0VOU0UudHh0KSBsaWNlbnNlcy4KICoKICogaHR0cDovL2RvY3MuanF1ZXJ5LmNvbS9VSS9FZmZlY3RzL0hpZ2hsaWdodAogKgogKiBEZXBlbmRzOgogKgllZmZlY3RzLmNvcmUuanMKICovCihmdW5jdGlvbihhKXthLmVmZmVjdHMuaGlnaGxpZ2h0PWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKSxkPVsiYmFja2dyb3VuZEltYWdlIiwiYmFja2dyb3VuZENvbG9yIiwib3BhY2l0eSJdO3ZhciBoPWEuZWZmZWN0cy5zZXRNb2RlKGUsYi5vcHRpb25zLm1vZGV8fCJzaG93Iik7dmFyIGM9Yi5vcHRpb25zLmNvbG9yfHwiI2ZmZmY5OSI7dmFyIGc9ZS5jc3MoImJhY2tncm91bmRDb2xvciIpO2EuZWZmZWN0cy5zYXZlKGUsZCk7ZS5zaG93KCk7ZS5jc3Moe2JhY2tncm91bmRJbWFnZToibm9uZSIsYmFja2dyb3VuZENvbG9yOmN9KTt2YXIgZj17YmFja2dyb3VuZENvbG9yOmd9O2lmKGg9PSJoaWRlIil7Zi5vcGFjaXR5PTB9ZS5hbmltYXRlKGYse3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmIuZHVyYXRpb24sZWFzaW5nOmIub3B0aW9ucy5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtpZihoPT0iaGlkZSIpe2UuaGlkZSgpfWEuZWZmZWN0cy5yZXN0b3JlKGUsZCk7aWYoaD09InNob3ciJiZhLmJyb3dzZXIubXNpZSl7dGhpcy5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoImZpbHRlciIpfWlmKGIuY2FsbGJhY2spe2IuY2FsbGJhY2suYXBwbHkodGhpcyxhcmd1bWVudHMpfWUuZGVxdWV1ZSgpfX0pfSl9fSkoalF1ZXJ5KTs7LyoKICogalF1ZXJ5IFVJIEVmZmVjdHMgUHVsc2F0ZSAxLjcuMgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDkgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KQogKiBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL0VmZmVjdHMvUHVsc2F0ZQogKgogKiBEZXBlbmRzOgogKgllZmZlY3RzLmNvcmUuanMKICovCihmdW5jdGlvbihhKXthLmVmZmVjdHMucHVsc2F0ZT1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBkPWEodGhpcyk7dmFyIGc9YS5lZmZlY3RzLnNldE1vZGUoZCxiLm9wdGlvbnMubW9kZXx8InNob3ciKTt2YXIgZj1iLm9wdGlvbnMudGltZXN8fDU7dmFyIGU9Yi5kdXJhdGlvbj9iLmR1cmF0aW9uLzI6YS5meC5zcGVlZHMuX2RlZmF1bHQvMjtpZihnPT0iaGlkZSIpe2YtLX1pZihkLmlzKCI6aGlkZGVuIikpe2QuY3NzKCJvcGFjaXR5IiwwKTtkLnNob3coKTtkLmFuaW1hdGUoe29wYWNpdHk6MX0sZSxiLm9wdGlvbnMuZWFzaW5nKTtmPWYtMn1mb3IodmFyIGM9MDtjPGY7YysrKXtkLmFuaW1hdGUoe29wYWNpdHk6MH0sZSxiLm9wdGlvbnMuZWFzaW5nKS5hbmltYXRlKHtvcGFjaXR5OjF9LGUsYi5vcHRpb25zLmVhc2luZyl9aWYoZz09ImhpZGUiKXtkLmFuaW1hdGUoe29wYWNpdHk6MH0sZSxiLm9wdGlvbnMuZWFzaW5nLGZ1bmN0aW9uKCl7ZC5oaWRlKCk7aWYoYi5jYWxsYmFjayl7Yi5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSl9ZWxzZXtkLmFuaW1hdGUoe29wYWNpdHk6MH0sZSxiLm9wdGlvbnMuZWFzaW5nKS5hbmltYXRlKHtvcGFjaXR5OjF9LGUsYi5vcHRpb25zLmVhc2luZyxmdW5jdGlvbigpe2lmKGIuY2FsbGJhY2spe2IuY2FsbGJhY2suYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pfWQucXVldWUoImZ4IixmdW5jdGlvbigpe2QuZGVxdWV1ZSgpfSk7ZC5kZXF1ZXVlKCl9KX19KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgRWZmZWN0cyBTY2FsZSAxLjcuMgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDkgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KQogKiBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL0VmZmVjdHMvU2NhbGUKICoKICogRGVwZW5kczoKICoJZWZmZWN0cy5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLnB1ZmY9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgZj1hKHRoaXMpO3ZhciBjPWEuZXh0ZW5kKHRydWUse30sYi5vcHRpb25zKTt2YXIgaD1hLmVmZmVjdHMuc2V0TW9kZShmLGIub3B0aW9ucy5tb2RlfHwiaGlkZSIpO3ZhciBnPXBhcnNlSW50KGIub3B0aW9ucy5wZXJjZW50LDEwKXx8MTUwO2MuZmFkZT10cnVlO3ZhciBlPXtoZWlnaHQ6Zi5oZWlnaHQoKSx3aWR0aDpmLndpZHRoKCl9O3ZhciBkPWcvMTAwO2YuZnJvbT0oaD09ImhpZGUiKT9lOntoZWlnaHQ6ZS5oZWlnaHQqZCx3aWR0aDplLndpZHRoKmR9O2MuZnJvbT1mLmZyb207Yy5wZXJjZW50PShoPT0iaGlkZSIpP2c6MTAwO2MubW9kZT1oO2YuZWZmZWN0KCJzY2FsZSIsYyxiLmR1cmF0aW9uLGIuY2FsbGJhY2spO2YuZGVxdWV1ZSgpfSl9O2EuZWZmZWN0cy5zY2FsZT1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5xdWV1ZShmdW5jdGlvbigpe3ZhciBnPWEodGhpcyk7dmFyIGQ9YS5leHRlbmQodHJ1ZSx7fSxiLm9wdGlvbnMpO3ZhciBqPWEuZWZmZWN0cy5zZXRNb2RlKGcsYi5vcHRpb25zLm1vZGV8fCJlZmZlY3QiKTt2YXIgaD1wYXJzZUludChiLm9wdGlvbnMucGVyY2VudCwxMCl8fChwYXJzZUludChiLm9wdGlvbnMucGVyY2VudCwxMCk9PTA/MDooaj09ImhpZGUiPzA6MTAwKSk7dmFyIGk9Yi5vcHRpb25zLmRpcmVjdGlvbnx8ImJvdGgiO3ZhciBjPWIub3B0aW9ucy5vcmlnaW47aWYoaiE9ImVmZmVjdCIpe2Qub3JpZ2luPWN8fFsibWlkZGxlIiwiY2VudGVyIl07ZC5yZXN0b3JlPXRydWV9dmFyIGY9e2hlaWdodDpnLmhlaWdodCgpLHdpZHRoOmcud2lkdGgoKX07Zy5mcm9tPWIub3B0aW9ucy5mcm9tfHwoaj09InNob3ciP3toZWlnaHQ6MCx3aWR0aDowfTpmKTt2YXIgZT17eTppIT0iaG9yaXpvbnRhbCI/KGgvMTAwKToxLHg6aSE9InZlcnRpY2FsIj8oaC8xMDApOjF9O2cudG89e2hlaWdodDpmLmhlaWdodCplLnksd2lkdGg6Zi53aWR0aCplLnh9O2lmKGIub3B0aW9ucy5mYWRlKXtpZihqPT0ic2hvdyIpe2cuZnJvbS5vcGFjaXR5PTA7Zy50by5vcGFjaXR5PTF9aWYoaj09ImhpZGUiKXtnLmZyb20ub3BhY2l0eT0xO2cudG8ub3BhY2l0eT0wfX1kLmZyb209Zy5mcm9tO2QudG89Zy50bztkLm1vZGU9ajtnLmVmZmVjdCgic2l6ZSIsZCxiLmR1cmF0aW9uLGIuY2FsbGJhY2spO2cuZGVxdWV1ZSgpfSl9O2EuZWZmZWN0cy5zaXplPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxuPVsicG9zaXRpb24iLCJ0b3AiLCJsZWZ0Iiwid2lkdGgiLCJoZWlnaHQiLCJvdmVyZmxvdyIsIm9wYWNpdHkiXTt2YXIgbT1bInBvc2l0aW9uIiwidG9wIiwibGVmdCIsIm92ZXJmbG93Iiwib3BhY2l0eSJdO3ZhciBqPVsid2lkdGgiLCJoZWlnaHQiLCJvdmVyZmxvdyJdO3ZhciBwPVsiZm9udFNpemUiXTt2YXIgaz1bImJvcmRlclRvcFdpZHRoIiwiYm9yZGVyQm90dG9tV2lkdGgiLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSJdO3ZhciBmPVsiYm9yZGVyTGVmdFdpZHRoIiwiYm9yZGVyUmlnaHRXaWR0aCIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1JpZ2h0Il07dmFyIGc9YS5lZmZlY3RzLnNldE1vZGUoYyxiLm9wdGlvbnMubW9kZXx8ImVmZmVjdCIpO3ZhciBpPWIub3B0aW9ucy5yZXN0b3JlfHxmYWxzZTt2YXIgZT1iLm9wdGlvbnMuc2NhbGV8fCJib3RoIjt2YXIgbz1iLm9wdGlvbnMub3JpZ2luO3ZhciBkPXtoZWlnaHQ6Yy5oZWlnaHQoKSx3aWR0aDpjLndpZHRoKCl9O2MuZnJvbT1iLm9wdGlvbnMuZnJvbXx8ZDtjLnRvPWIub3B0aW9ucy50b3x8ZDtpZihvKXt2YXIgaD1hLmVmZmVjdHMuZ2V0QmFzZWxpbmUobyxkKTtjLmZyb20udG9wPShkLmhlaWdodC1jLmZyb20uaGVpZ2h0KSpoLnk7Yy5mcm9tLmxlZnQ9KGQud2lkdGgtYy5mcm9tLndpZHRoKSpoLng7Yy50by50b3A9KGQuaGVpZ2h0LWMudG8uaGVpZ2h0KSpoLnk7Yy50by5sZWZ0PShkLndpZHRoLWMudG8ud2lkdGgpKmgueH12YXIgbD17ZnJvbTp7eTpjLmZyb20uaGVpZ2h0L2QuaGVpZ2h0LHg6Yy5mcm9tLndpZHRoL2Qud2lkdGh9LHRvOnt5OmMudG8uaGVpZ2h0L2QuaGVpZ2h0LHg6Yy50by53aWR0aC9kLndpZHRofX07aWYoZT09ImJveCJ8fGU9PSJib3RoIil7aWYobC5mcm9tLnkhPWwudG8ueSl7bj1uLmNvbmNhdChrKTtjLmZyb209YS5lZmZlY3RzLnNldFRyYW5zaXRpb24oYyxrLGwuZnJvbS55LGMuZnJvbSk7Yy50bz1hLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihjLGssbC50by55LGMudG8pfWlmKGwuZnJvbS54IT1sLnRvLngpe249bi5jb25jYXQoZik7Yy5mcm9tPWEuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGMsZixsLmZyb20ueCxjLmZyb20pO2MudG89YS5lZmZlY3RzLnNldFRyYW5zaXRpb24oYyxmLGwudG8ueCxjLnRvKX19aWYoZT09ImNvbnRlbnQifHxlPT0iYm90aCIpe2lmKGwuZnJvbS55IT1sLnRvLnkpe249bi5jb25jYXQocCk7Yy5mcm9tPWEuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGMscCxsLmZyb20ueSxjLmZyb20pO2MudG89YS5lZmZlY3RzLnNldFRyYW5zaXRpb24oYyxwLGwudG8ueSxjLnRvKX19YS5lZmZlY3RzLnNhdmUoYyxpP246bSk7Yy5zaG93KCk7YS5lZmZlY3RzLmNyZWF0ZVdyYXBwZXIoYyk7Yy5jc3MoIm92ZXJmbG93IiwiaGlkZGVuIikuY3NzKGMuZnJvbSk7aWYoZT09ImNvbnRlbnQifHxlPT0iYm90aCIpe2s9ay5jb25jYXQoWyJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iXSkuY29uY2F0KHApO2Y9Zi5jb25jYXQoWyJtYXJnaW5MZWZ0IiwibWFyZ2luUmlnaHQiXSk7aj1uLmNvbmNhdChrKS5jb25jYXQoZik7Yy5maW5kKCIqW3dpZHRoXSIpLmVhY2goZnVuY3Rpb24oKXtjaGlsZD1hKHRoaXMpO2lmKGkpe2EuZWZmZWN0cy5zYXZlKGNoaWxkLGopfXZhciBxPXtoZWlnaHQ6Y2hpbGQuaGVpZ2h0KCksd2lkdGg6Y2hpbGQud2lkdGgoKX07Y2hpbGQuZnJvbT17aGVpZ2h0OnEuaGVpZ2h0KmwuZnJvbS55LHdpZHRoOnEud2lkdGgqbC5mcm9tLnh9O2NoaWxkLnRvPXtoZWlnaHQ6cS5oZWlnaHQqbC50by55LHdpZHRoOnEud2lkdGgqbC50by54fTtpZihsLmZyb20ueSE9bC50by55KXtjaGlsZC5mcm9tPWEuZWZmZWN0cy5zZXRUcmFuc2l0aW9uKGNoaWxkLGssbC5mcm9tLnksY2hpbGQuZnJvbSk7Y2hpbGQudG89YS5lZmZlY3RzLnNldFRyYW5zaXRpb24oY2hpbGQsayxsLnRvLnksY2hpbGQudG8pfWlmKGwuZnJvbS54IT1sLnRvLngpe2NoaWxkLmZyb209YS5lZmZlY3RzLnNldFRyYW5zaXRpb24oY2hpbGQsZixsLmZyb20ueCxjaGlsZC5mcm9tKTtjaGlsZC50bz1hLmVmZmVjdHMuc2V0VHJhbnNpdGlvbihjaGlsZCxmLGwudG8ueCxjaGlsZC50byl9Y2hpbGQuY3NzKGNoaWxkLmZyb20pO2NoaWxkLmFuaW1hdGUoY2hpbGQudG8sYi5kdXJhdGlvbixiLm9wdGlvbnMuZWFzaW5nLGZ1bmN0aW9uKCl7aWYoaSl7YS5lZmZlY3RzLnJlc3RvcmUoY2hpbGQsail9fSl9KX1jLmFuaW1hdGUoYy50byx7cXVldWU6ZmFsc2UsZHVyYXRpb246Yi5kdXJhdGlvbixlYXNpbmc6Yi5vcHRpb25zLmVhc2luZyxjb21wbGV0ZTpmdW5jdGlvbigpe2lmKGc9PSJoaWRlIil7Yy5oaWRlKCl9YS5lZmZlY3RzLnJlc3RvcmUoYyxpP246bSk7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoYyk7aWYoYi5jYWxsYmFjayl7Yi5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9Yy5kZXF1ZXVlKCl9fSl9KX19KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgRWZmZWN0cyBTaGFrZSAxLjcuMgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDkgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KQogKiBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL0VmZmVjdHMvU2hha2UKICoKICogRGVwZW5kczoKICoJZWZmZWN0cy5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLnNoYWtlPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKSxsPVsicG9zaXRpb24iLCJ0b3AiLCJsZWZ0Il07dmFyIGs9YS5lZmZlY3RzLnNldE1vZGUoZSxiLm9wdGlvbnMubW9kZXx8ImVmZmVjdCIpO3ZhciBuPWIub3B0aW9ucy5kaXJlY3Rpb258fCJsZWZ0Ijt2YXIgYz1iLm9wdGlvbnMuZGlzdGFuY2V8fDIwO3ZhciBkPWIub3B0aW9ucy50aW1lc3x8Mzt2YXIgZz1iLmR1cmF0aW9ufHxiLm9wdGlvbnMuZHVyYXRpb258fDE0MDthLmVmZmVjdHMuc2F2ZShlLGwpO2Uuc2hvdygpO2EuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKGUpO3ZhciBmPShuPT0idXAifHxuPT0iZG93biIpPyJ0b3AiOiJsZWZ0Ijt2YXIgcD0obj09InVwInx8bj09ImxlZnQiKT8icG9zIjoibmVnIjt2YXIgaD17fSxvPXt9LG09e307aFtmXT0ocD09InBvcyI/Ii09IjoiKz0iKStjO29bZl09KHA9PSJwb3MiPyIrPSI6Ii09IikrYyoyO21bZl09KHA9PSJwb3MiPyItPSI6Iis9IikrYyoyO2UuYW5pbWF0ZShoLGcsYi5vcHRpb25zLmVhc2luZyk7Zm9yKHZhciBqPTE7ajxkO2orKyl7ZS5hbmltYXRlKG8sZyxiLm9wdGlvbnMuZWFzaW5nKS5hbmltYXRlKG0sZyxiLm9wdGlvbnMuZWFzaW5nKX1lLmFuaW1hdGUobyxnLGIub3B0aW9ucy5lYXNpbmcpLmFuaW1hdGUoaCxnLzIsYi5vcHRpb25zLmVhc2luZyxmdW5jdGlvbigpe2EuZWZmZWN0cy5yZXN0b3JlKGUsbCk7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoZSk7aWYoYi5jYWxsYmFjayl7Yi5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSk7ZS5xdWV1ZSgiZngiLGZ1bmN0aW9uKCl7ZS5kZXF1ZXVlKCl9KTtlLmRlcXVldWUoKX0pfX0pKGpRdWVyeSk7Oy8qCiAqIGpRdWVyeSBVSSBFZmZlY3RzIFNsaWRlIDEuNy4yCiAqCiAqIENvcHlyaWdodCAoYykgMjAwOSBBVVRIT1JTLnR4dCAoaHR0cDovL2pxdWVyeXVpLmNvbS9hYm91dCkKICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIChNSVQtTElDRU5TRS50eHQpCiAqIGFuZCBHUEwgKEdQTC1MSUNFTlNFLnR4dCkgbGljZW5zZXMuCiAqCiAqIGh0dHA6Ly9kb2NzLmpxdWVyeS5jb20vVUkvRWZmZWN0cy9TbGlkZQogKgogKiBEZXBlbmRzOgogKgllZmZlY3RzLmNvcmUuanMKICovCihmdW5jdGlvbihhKXthLmVmZmVjdHMuc2xpZGU9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMucXVldWUoZnVuY3Rpb24oKXt2YXIgZT1hKHRoaXMpLGQ9WyJwb3NpdGlvbiIsInRvcCIsImxlZnQiXTt2YXIgaT1hLmVmZmVjdHMuc2V0TW9kZShlLGIub3B0aW9ucy5tb2RlfHwic2hvdyIpO3ZhciBoPWIub3B0aW9ucy5kaXJlY3Rpb258fCJsZWZ0IjthLmVmZmVjdHMuc2F2ZShlLGQpO2Uuc2hvdygpO2EuZWZmZWN0cy5jcmVhdGVXcmFwcGVyKGUpLmNzcyh7b3ZlcmZsb3c6ImhpZGRlbiJ9KTt2YXIgZj0oaD09InVwInx8aD09ImRvd24iKT8idG9wIjoibGVmdCI7dmFyIGM9KGg9PSJ1cCJ8fGg9PSJsZWZ0Iik/InBvcyI6Im5lZyI7dmFyIGo9Yi5vcHRpb25zLmRpc3RhbmNlfHwoZj09InRvcCI/ZS5vdXRlckhlaWdodCh7bWFyZ2luOnRydWV9KTplLm91dGVyV2lkdGgoe21hcmdpbjp0cnVlfSkpO2lmKGk9PSJzaG93Iil7ZS5jc3MoZixjPT0icG9zIj8tajpqKX12YXIgZz17fTtnW2ZdPShpPT0ic2hvdyI/KGM9PSJwb3MiPyIrPSI6Ii09Iik6KGM9PSJwb3MiPyItPSI6Iis9IikpK2o7ZS5hbmltYXRlKGcse3F1ZXVlOmZhbHNlLGR1cmF0aW9uOmIuZHVyYXRpb24sZWFzaW5nOmIub3B0aW9ucy5lYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtpZihpPT0iaGlkZSIpe2UuaGlkZSgpfWEuZWZmZWN0cy5yZXN0b3JlKGUsZCk7YS5lZmZlY3RzLnJlbW92ZVdyYXBwZXIoZSk7aWYoYi5jYWxsYmFjayl7Yi5jYWxsYmFjay5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZS5kZXF1ZXVlKCl9fSl9KX19KShqUXVlcnkpOzsvKgogKiBqUXVlcnkgVUkgRWZmZWN0cyBUcmFuc2ZlciAxLjcuMgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMDkgQVVUSE9SUy50eHQgKGh0dHA6Ly9qcXVlcnl1aS5jb20vYWJvdXQpCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoTUlULUxJQ0VOU0UudHh0KQogKiBhbmQgR1BMIChHUEwtTElDRU5TRS50eHQpIGxpY2Vuc2VzLgogKgogKiBodHRwOi8vZG9jcy5qcXVlcnkuY29tL1VJL0VmZmVjdHMvVHJhbnNmZXIKICoKICogRGVwZW5kczoKICoJZWZmZWN0cy5jb3JlLmpzCiAqLwooZnVuY3Rpb24oYSl7YS5lZmZlY3RzLnRyYW5zZmVyPWZ1bmN0aW9uKGIpe3JldHVybiB0aGlzLnF1ZXVlKGZ1bmN0aW9uKCl7dmFyIGY9YSh0aGlzKSxoPWEoYi5vcHRpb25zLnRvKSxlPWgub2Zmc2V0KCksZz17dG9wOmUudG9wLGxlZnQ6ZS5sZWZ0LGhlaWdodDpoLmlubmVySGVpZ2h0KCksd2lkdGg6aC5pbm5lcldpZHRoKCl9LGQ9Zi5vZmZzZXQoKSxjPWEoJzxkaXYgY2xhc3M9InVpLWVmZmVjdHMtdHJhbnNmZXIiPjwvZGl2PicpLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpLmFkZENsYXNzKGIub3B0aW9ucy5jbGFzc05hbWUpLmNzcyh7dG9wOmQudG9wLGxlZnQ6ZC5sZWZ0LGhlaWdodDpmLmlubmVySGVpZ2h0KCksd2lkdGg6Zi5pbm5lcldpZHRoKCkscG9zaXRpb246ImFic29sdXRlIn0pLmFuaW1hdGUoZyxiLmR1cmF0aW9uLGIub3B0aW9ucy5lYXNpbmcsZnVuY3Rpb24oKXtjLnJlbW92ZSgpOyhiLmNhbGxiYWNrJiZiLmNhbGxiYWNrLmFwcGx5KGZbMF0sYXJndW1lbnRzKSk7Zi5kZXF1ZXVlKCl9KX0pfX0pKGpRdWVyeSk7Ow==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>